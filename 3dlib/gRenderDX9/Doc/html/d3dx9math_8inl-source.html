<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gRenderDX9: d3dx9math.inl Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>d3dx9math.inl</h1><div class="fragment"><pre>00001 
00002 <span class="comment">//</span>
00003 <span class="comment">//  Copyright (C) Microsoft Corporation.  All Rights Reserved.</span>
00004 <span class="comment">//</span>
00005 <span class="comment">//  File:       d3dx9math.inl</span>
00006 <span class="comment">//  Content:    D3DX math inline functions</span>
00007 <span class="comment">//</span>
00009 <span class="comment"></span>
00010 <span class="preprocessor">#ifndef __D3DX9MATH_INL__</span>
00011 <span class="preprocessor"></span><span class="preprocessor">#define __D3DX9MATH_INL__</span>
00012 <span class="preprocessor"></span>
00013 
00014 <span class="comment">//===========================================================================</span>
00015 <span class="comment">//</span>
00016 <span class="comment">// Inline Class Methods</span>
00017 <span class="comment">//</span>
00018 <span class="comment">//===========================================================================</span>
00019 
00020 <span class="preprocessor">#ifdef __cplusplus</span>
00021 <span class="preprocessor"></span>
00022 <span class="comment">//--------------------------</span>
00023 <span class="comment">// Float16</span>
00024 <span class="comment">//--------------------------</span>
00025 
00026 D3DXINLINE
00027 D3DXFLOAT16::D3DXFLOAT16( FLOAT f )
00028 {
00029     D3DXFloat32To16Array(<span class="keyword">this</span>, &amp;f, 1);
00030 }
00031 
00032 D3DXINLINE
00033 D3DXFLOAT16::D3DXFLOAT16( CONST D3DXFLOAT16&amp; f )
00034 {
00035     value = f.value;
00036 }
00037 
00038 <span class="comment">// casting</span>
00039 D3DXINLINE
00040 D3DXFLOAT16::operator FLOAT ()
00041 {
00042     FLOAT f;
00043     D3DXFloat16To32Array(&amp;f, <span class="keyword">this</span>, 1);
00044     <span class="keywordflow">return</span> f;
00045 }
00046 
00047 <span class="comment">// binary operators</span>
00048 D3DXINLINE BOOL
00049 D3DXFLOAT16::operator == ( CONST D3DXFLOAT16&amp; f )<span class="keyword"> const</span>
00050 <span class="keyword"></span>{
00051     <span class="keywordflow">return</span> value == f.value;
00052 }
00053 
00054 D3DXINLINE BOOL
00055 D3DXFLOAT16::operator != ( CONST D3DXFLOAT16&amp; f )<span class="keyword"> const</span>
00056 <span class="keyword"></span>{
00057     <span class="keywordflow">return</span> value != f.value;
00058 }
00059 
00060 
00061 <span class="comment">//--------------------------</span>
00062 <span class="comment">// 2D Vector</span>
00063 <span class="comment">//--------------------------</span>
00064 
00065 D3DXINLINE
00066 D3DXVECTOR2::D3DXVECTOR2( CONST FLOAT *pf )
00067 {
00068 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00069 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00070         <span class="keywordflow">return</span>;
00071 <span class="preprocessor">#endif</span>
00072 <span class="preprocessor"></span>
00073     x = pf[0];
00074     y = pf[1];
00075 }
00076 
00077 D3DXINLINE
00078 D3DXVECTOR2::D3DXVECTOR2( CONST D3DXFLOAT16 *pf )
00079 {
00080 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00081 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00082         <span class="keywordflow">return</span>;
00083 <span class="preprocessor">#endif</span>
00084 <span class="preprocessor"></span>
00085     D3DXFloat16To32Array(&amp;x, pf, 2);    
00086 }
00087 
00088 D3DXINLINE
00089 D3DXVECTOR2::D3DXVECTOR2( FLOAT fx, FLOAT fy )
00090 {
00091     x = fx;
00092     y = fy;
00093 }
00094 
00095 
00096 <span class="comment">// casting</span>
00097 D3DXINLINE
00098 D3DXVECTOR2::operator FLOAT* ()
00099 {
00100     <span class="keywordflow">return</span> (FLOAT *) &amp;x;
00101 }
00102 
00103 D3DXINLINE
00104 D3DXVECTOR2::operator CONST FLOAT* ()<span class="keyword"> const</span>
00105 <span class="keyword"></span>{
00106     <span class="keywordflow">return</span> (CONST FLOAT *) &amp;x;
00107 }
00108 
00109 
00110 <span class="comment">// assignment operators</span>
00111 D3DXINLINE D3DXVECTOR2&amp;
00112 D3DXVECTOR2::operator += ( CONST D3DXVECTOR2&amp; v )
00113 {
00114     x += v.x;
00115     y += v.y;
00116     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00117 }
00118 
00119 D3DXINLINE D3DXVECTOR2&amp;
00120 D3DXVECTOR2::operator -= ( CONST D3DXVECTOR2&amp; v )
00121 {
00122     x -= v.x;
00123     y -= v.y;
00124     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00125 }
00126 
00127 D3DXINLINE D3DXVECTOR2&amp;
00128 D3DXVECTOR2::operator *= ( FLOAT f )
00129 {
00130     x *= f;
00131     y *= f;
00132     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00133 }
00134 
00135 D3DXINLINE D3DXVECTOR2&amp;
00136 D3DXVECTOR2::operator /= ( FLOAT f )
00137 {
00138     FLOAT fInv = 1.0f / f;
00139     x *= fInv;
00140     y *= fInv;
00141     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00142 }
00143 
00144 
00145 <span class="comment">// unary operators</span>
00146 D3DXINLINE D3DXVECTOR2
00147 D3DXVECTOR2::operator + ()<span class="keyword"> const</span>
00148 <span class="keyword"></span>{
00149     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00150 }
00151 
00152 D3DXINLINE D3DXVECTOR2
00153 D3DXVECTOR2::operator - ()<span class="keyword"> const</span>
00154 <span class="keyword"></span>{
00155     <span class="keywordflow">return</span> D3DXVECTOR2(-x, -y);
00156 }
00157 
00158 
00159 <span class="comment">// binary operators</span>
00160 D3DXINLINE D3DXVECTOR2
00161 D3DXVECTOR2::operator + ( CONST D3DXVECTOR2&amp; v )<span class="keyword"> const</span>
00162 <span class="keyword"></span>{
00163     <span class="keywordflow">return</span> D3DXVECTOR2(x + v.x, y + v.y);
00164 }
00165 
00166 D3DXINLINE D3DXVECTOR2
00167 D3DXVECTOR2::operator - ( CONST D3DXVECTOR2&amp; v )<span class="keyword"> const</span>
00168 <span class="keyword"></span>{
00169     <span class="keywordflow">return</span> D3DXVECTOR2(x - v.x, y - v.y);
00170 }
00171 
00172 D3DXINLINE D3DXVECTOR2
00173 D3DXVECTOR2::operator * ( FLOAT f )<span class="keyword"> const</span>
00174 <span class="keyword"></span>{
00175     <span class="keywordflow">return</span> D3DXVECTOR2(x * f, y * f);
00176 }
00177 
00178 D3DXINLINE D3DXVECTOR2
00179 D3DXVECTOR2::operator / ( FLOAT f )<span class="keyword"> const</span>
00180 <span class="keyword"></span>{
00181     FLOAT fInv = 1.0f / f;
00182     <span class="keywordflow">return</span> D3DXVECTOR2(x * fInv, y * fInv);
00183 }
00184 
00185 D3DXINLINE D3DXVECTOR2
00186 operator * ( FLOAT f, CONST D3DXVECTOR2&amp; v )
00187 {
00188     <span class="keywordflow">return</span> D3DXVECTOR2(f * v.x, f * v.y);
00189 }
00190 
00191 D3DXINLINE BOOL
00192 D3DXVECTOR2::operator == ( CONST D3DXVECTOR2&amp; v )<span class="keyword"> const</span>
00193 <span class="keyword"></span>{
00194     <span class="keywordflow">return</span> x == v.x &amp;&amp; y == v.y;
00195 }
00196 
00197 D3DXINLINE BOOL
00198 D3DXVECTOR2::operator != ( CONST D3DXVECTOR2&amp; v )<span class="keyword"> const</span>
00199 <span class="keyword"></span>{
00200     <span class="keywordflow">return</span> x != v.x || y != v.y;
00201 }
00202 
00203 
00204 
00205 <span class="comment">//--------------------------</span>
00206 <span class="comment">// 2D Vector (16 bit)</span>
00207 <span class="comment">//--------------------------</span>
00208 
00209 D3DXINLINE
00210 D3DXVECTOR2_16F::D3DXVECTOR2_16F( CONST FLOAT *pf )
00211 {
00212 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00213 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00214         <span class="keywordflow">return</span>;
00215 <span class="preprocessor">#endif</span>
00216 <span class="preprocessor"></span>
00217     D3DXFloat32To16Array(&amp;x, pf, 2);
00218 }
00219 
00220 D3DXINLINE
00221 D3DXVECTOR2_16F::D3DXVECTOR2_16F( CONST D3DXFLOAT16 *pf )
00222 {
00223 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00224 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00225         <span class="keywordflow">return</span>;
00226 <span class="preprocessor">#endif</span>
00227 <span class="preprocessor"></span>
00228     *((DWORD *) &amp;x) = *((DWORD *) &amp;pf[0]);
00229 }
00230 
00231 D3DXINLINE
00232 D3DXVECTOR2_16F::D3DXVECTOR2_16F( CONST D3DXFLOAT16 &amp;fx, CONST D3DXFLOAT16 &amp;fy )
00233 {
00234     x = fx;
00235     y = fy;
00236 }
00237 
00238 
00239 <span class="comment">// casting</span>
00240 D3DXINLINE
00241 D3DXVECTOR2_16F::operator D3DXFLOAT16* ()
00242 {
00243     <span class="keywordflow">return</span> (D3DXFLOAT16*) &amp;x;
00244 }
00245 
00246 D3DXINLINE
00247 D3DXVECTOR2_16F::operator CONST D3DXFLOAT16* ()<span class="keyword"> const</span>
00248 <span class="keyword"></span>{
00249     <span class="keywordflow">return</span> (CONST D3DXFLOAT16*) &amp;x;
00250 }
00251 
00252 
00253 <span class="comment">// binary operators</span>
00254 D3DXINLINE BOOL 
00255 D3DXVECTOR2_16F::operator == ( CONST D3DXVECTOR2_16F &amp;v )<span class="keyword"> const</span>
00256 <span class="keyword"></span>{
00257     <span class="keywordflow">return</span> *((DWORD *) &amp;x) == *((DWORD *) &amp;v.x);
00258 }
00259 
00260 D3DXINLINE BOOL 
00261 D3DXVECTOR2_16F::operator != ( CONST D3DXVECTOR2_16F &amp;v )<span class="keyword"> const</span>
00262 <span class="keyword"></span>{
00263     <span class="keywordflow">return</span> *((DWORD *) &amp;x) != *((DWORD *) &amp;v.x);
00264 }
00265 
00266 
00267 <span class="comment">//--------------------------</span>
00268 <span class="comment">// 3D Vector</span>
00269 <span class="comment">//--------------------------</span>
00270 D3DXINLINE
00271 D3DXVECTOR3::D3DXVECTOR3( CONST FLOAT *pf )
00272 {
00273 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00274 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00275         <span class="keywordflow">return</span>;
00276 <span class="preprocessor">#endif</span>
00277 <span class="preprocessor"></span>
00278     x = pf[0];
00279     y = pf[1];
00280     z = pf[2];
00281 }
00282 
00283 D3DXINLINE
00284 D3DXVECTOR3::D3DXVECTOR3( CONST D3DVECTOR&amp; v )
00285 {
00286     x = v.x;
00287     y = v.y;
00288     z = v.z;
00289 }
00290 
00291 D3DXINLINE
00292 D3DXVECTOR3::D3DXVECTOR3( CONST D3DXFLOAT16 *pf )
00293 {
00294 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00295 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00296         <span class="keywordflow">return</span>;
00297 <span class="preprocessor">#endif</span>
00298 <span class="preprocessor"></span>
00299     D3DXFloat16To32Array(&amp;x, pf, 3);
00300 }
00301 
00302 D3DXINLINE
00303 D3DXVECTOR3::D3DXVECTOR3( FLOAT fx, FLOAT fy, FLOAT fz )
00304 {
00305     x = fx;
00306     y = fy;
00307     z = fz;
00308 }
00309 
00310 
00311 <span class="comment">// casting</span>
00312 D3DXINLINE
00313 D3DXVECTOR3::operator FLOAT* ()
00314 {
00315     <span class="keywordflow">return</span> (FLOAT *) &amp;x;
00316 }
00317 
00318 D3DXINLINE
00319 D3DXVECTOR3::operator CONST FLOAT* ()<span class="keyword"> const</span>
00320 <span class="keyword"></span>{
00321     <span class="keywordflow">return</span> (CONST FLOAT *) &amp;x;
00322 }
00323 
00324 
00325 <span class="comment">// assignment operators</span>
00326 D3DXINLINE D3DXVECTOR3&amp;
00327 D3DXVECTOR3::operator += ( CONST D3DXVECTOR3&amp; v )
00328 {
00329     x += v.x;
00330     y += v.y;
00331     z += v.z;
00332     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00333 }
00334 
00335 D3DXINLINE D3DXVECTOR3&amp;
00336 D3DXVECTOR3::operator -= ( CONST D3DXVECTOR3&amp; v )
00337 {
00338     x -= v.x;
00339     y -= v.y;
00340     z -= v.z;
00341     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00342 }
00343 
00344 D3DXINLINE D3DXVECTOR3&amp;
00345 D3DXVECTOR3::operator *= ( FLOAT f )
00346 {
00347     x *= f;
00348     y *= f;
00349     z *= f;
00350     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00351 }
00352 
00353 D3DXINLINE D3DXVECTOR3&amp;
00354 D3DXVECTOR3::operator /= ( FLOAT f )
00355 {
00356     FLOAT fInv = 1.0f / f;
00357     x *= fInv;
00358     y *= fInv;
00359     z *= fInv;
00360     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00361 }
00362 
00363 
00364 <span class="comment">// unary operators</span>
00365 D3DXINLINE D3DXVECTOR3
00366 D3DXVECTOR3::operator + ()<span class="keyword"> const</span>
00367 <span class="keyword"></span>{
00368     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00369 }
00370 
00371 D3DXINLINE D3DXVECTOR3
00372 D3DXVECTOR3::operator - ()<span class="keyword"> const</span>
00373 <span class="keyword"></span>{
00374     <span class="keywordflow">return</span> D3DXVECTOR3(-x, -y, -z);
00375 }
00376 
00377 
00378 <span class="comment">// binary operators</span>
00379 D3DXINLINE D3DXVECTOR3
00380 D3DXVECTOR3::operator + ( CONST D3DXVECTOR3&amp; v )<span class="keyword"> const</span>
00381 <span class="keyword"></span>{
00382     <span class="keywordflow">return</span> D3DXVECTOR3(x + v.x, y + v.y, z + v.z);
00383 }
00384 
00385 D3DXINLINE D3DXVECTOR3
00386 D3DXVECTOR3::operator - ( CONST D3DXVECTOR3&amp; v )<span class="keyword"> const</span>
00387 <span class="keyword"></span>{
00388     <span class="keywordflow">return</span> D3DXVECTOR3(x - v.x, y - v.y, z - v.z);
00389 }
00390 
00391 D3DXINLINE D3DXVECTOR3
00392 D3DXVECTOR3::operator * ( FLOAT f )<span class="keyword"> const</span>
00393 <span class="keyword"></span>{
00394     <span class="keywordflow">return</span> D3DXVECTOR3(x * f, y * f, z * f);
00395 }
00396 
00397 D3DXINLINE D3DXVECTOR3
00398 D3DXVECTOR3::operator / ( FLOAT f )<span class="keyword"> const</span>
00399 <span class="keyword"></span>{
00400     FLOAT fInv = 1.0f / f;
00401     <span class="keywordflow">return</span> D3DXVECTOR3(x * fInv, y * fInv, z * fInv);
00402 }
00403 
00404 
00405 D3DXINLINE D3DXVECTOR3
00406 operator * ( FLOAT f, CONST <span class="keyword">struct</span> D3DXVECTOR3&amp; v )
00407 {
00408     <span class="keywordflow">return</span> D3DXVECTOR3(f * v.x, f * v.y, f * v.z);
00409 }
00410 
00411 
00412 D3DXINLINE BOOL
00413 D3DXVECTOR3::operator == ( CONST D3DXVECTOR3&amp; v )<span class="keyword"> const</span>
00414 <span class="keyword"></span>{
00415     <span class="keywordflow">return</span> x == v.x &amp;&amp; y == v.y &amp;&amp; z == v.z;
00416 }
00417 
00418 D3DXINLINE BOOL
00419 D3DXVECTOR3::operator != ( CONST D3DXVECTOR3&amp; v )<span class="keyword"> const</span>
00420 <span class="keyword"></span>{
00421     <span class="keywordflow">return</span> x != v.x || y != v.y || z != v.z;
00422 }
00423 
00424 
00425 
00426 <span class="comment">//--------------------------</span>
00427 <span class="comment">// 3D Vector (16 bit)</span>
00428 <span class="comment">//--------------------------</span>
00429 
00430 D3DXINLINE
00431 D3DXVECTOR3_16F::D3DXVECTOR3_16F( CONST FLOAT *pf )
00432 {
00433 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00434 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00435         <span class="keywordflow">return</span>;
00436 <span class="preprocessor">#endif</span>
00437 <span class="preprocessor"></span>
00438     D3DXFloat32To16Array(&amp;x, pf, 3);
00439 }
00440 
00441 D3DXINLINE
00442 D3DXVECTOR3_16F::D3DXVECTOR3_16F( CONST D3DVECTOR&amp; v )
00443 {
00444     D3DXFloat32To16Array(&amp;x, &amp;v.x, 1);
00445     D3DXFloat32To16Array(&amp;y, &amp;v.y, 1);
00446     D3DXFloat32To16Array(&amp;z, &amp;v.z, 1);
00447 }
00448 
00449 D3DXINLINE
00450 D3DXVECTOR3_16F::D3DXVECTOR3_16F( CONST D3DXFLOAT16 *pf )
00451 {
00452 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00453 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00454         <span class="keywordflow">return</span>;
00455 <span class="preprocessor">#endif</span>
00456 <span class="preprocessor"></span>
00457     *((DWORD *) &amp;x) = *((DWORD *) &amp;pf[0]);
00458     *((WORD  *) &amp;z) = *((WORD  *) &amp;pf[2]);
00459 }
00460 
00461 D3DXINLINE
00462 D3DXVECTOR3_16F::D3DXVECTOR3_16F( CONST D3DXFLOAT16 &amp;fx, CONST D3DXFLOAT16 &amp;fy, CONST D3DXFLOAT16 &amp;fz )
00463 {
00464     x = fx;
00465     y = fy;
00466     z = fz;
00467 }
00468 
00469 
00470 <span class="comment">// casting</span>
00471 D3DXINLINE
00472 D3DXVECTOR3_16F::operator D3DXFLOAT16* ()
00473 {
00474     <span class="keywordflow">return</span> (D3DXFLOAT16*) &amp;x;
00475 }
00476 
00477 D3DXINLINE
00478 D3DXVECTOR3_16F::operator CONST D3DXFLOAT16* ()<span class="keyword"> const</span>
00479 <span class="keyword"></span>{
00480     <span class="keywordflow">return</span> (CONST D3DXFLOAT16*) &amp;x;
00481 }
00482 
00483 
00484 <span class="comment">// binary operators</span>
00485 D3DXINLINE BOOL 
00486 D3DXVECTOR3_16F::operator == ( CONST D3DXVECTOR3_16F &amp;v )<span class="keyword"> const</span>
00487 <span class="keyword"></span>{
00488     <span class="keywordflow">return</span> *((DWORD *) &amp;x) == *((DWORD *) &amp;v.x) &amp;&amp;
00489            *((WORD  *) &amp;z) == *((WORD  *) &amp;v.z);
00490 }
00491 
00492 D3DXINLINE BOOL 
00493 D3DXVECTOR3_16F::operator != ( CONST D3DXVECTOR3_16F &amp;v )<span class="keyword"> const</span>
00494 <span class="keyword"></span>{
00495     <span class="keywordflow">return</span> *((DWORD *) &amp;x) != *((DWORD *) &amp;v.x) ||
00496            *((WORD  *) &amp;z) != *((WORD  *) &amp;v.z);
00497 }
00498 
00499 
00500 <span class="comment">//--------------------------</span>
00501 <span class="comment">// 4D Vector</span>
00502 <span class="comment">//--------------------------</span>
00503 D3DXINLINE
00504 D3DXVECTOR4::D3DXVECTOR4( CONST FLOAT *pf )
00505 {
00506 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00507 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00508         <span class="keywordflow">return</span>;
00509 <span class="preprocessor">#endif</span>
00510 <span class="preprocessor"></span>
00511     x = pf[0];
00512     y = pf[1];
00513     z = pf[2];
00514     w = pf[3];
00515 }
00516 
00517 D3DXINLINE
00518 D3DXVECTOR4::D3DXVECTOR4( CONST D3DXFLOAT16 *pf )
00519 {
00520 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00521 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00522         <span class="keywordflow">return</span>;
00523 <span class="preprocessor">#endif</span>
00524 <span class="preprocessor"></span>
00525     D3DXFloat16To32Array(&amp;x, pf, 4);
00526 }
00527 
00528 D3DXINLINE
00529 D3DXVECTOR4::D3DXVECTOR4( CONST D3DVECTOR&amp; v, FLOAT f )
00530 {
00531     x = v.x;
00532     y = v.y;
00533     z = v.z;
00534     w = f;
00535 }
00536 
00537 D3DXINLINE
00538 D3DXVECTOR4::D3DXVECTOR4( FLOAT fx, FLOAT fy, FLOAT fz, FLOAT fw )
00539 {
00540     x = fx;
00541     y = fy;
00542     z = fz;
00543     w = fw;
00544 }
00545 
00546 
00547 <span class="comment">// casting</span>
00548 D3DXINLINE
00549 D3DXVECTOR4::operator FLOAT* ()
00550 {
00551     <span class="keywordflow">return</span> (FLOAT *) &amp;x;
00552 }
00553 
00554 D3DXINLINE
00555 D3DXVECTOR4::operator CONST FLOAT* ()<span class="keyword"> const</span>
00556 <span class="keyword"></span>{
00557     <span class="keywordflow">return</span> (CONST FLOAT *) &amp;x;
00558 }
00559 
00560 
00561 <span class="comment">// assignment operators</span>
00562 D3DXINLINE D3DXVECTOR4&amp;
00563 D3DXVECTOR4::operator += ( CONST D3DXVECTOR4&amp; v )
00564 {
00565     x += v.x;
00566     y += v.y;
00567     z += v.z;
00568     w += v.w;
00569     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00570 }
00571 
00572 D3DXINLINE D3DXVECTOR4&amp;
00573 D3DXVECTOR4::operator -= ( CONST D3DXVECTOR4&amp; v )
00574 {
00575     x -= v.x;
00576     y -= v.y;
00577     z -= v.z;
00578     w -= v.w;
00579     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00580 }
00581 
00582 D3DXINLINE D3DXVECTOR4&amp;
00583 D3DXVECTOR4::operator *= ( FLOAT f )
00584 {
00585     x *= f;
00586     y *= f;
00587     z *= f;
00588     w *= f;
00589     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00590 }
00591 
00592 D3DXINLINE D3DXVECTOR4&amp;
00593 D3DXVECTOR4::operator /= ( FLOAT f )
00594 {
00595     FLOAT fInv = 1.0f / f;
00596     x *= fInv;
00597     y *= fInv;
00598     z *= fInv;
00599     w *= fInv;
00600     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00601 }
00602 
00603 
00604 <span class="comment">// unary operators</span>
00605 D3DXINLINE D3DXVECTOR4
00606 D3DXVECTOR4::operator + ()<span class="keyword"> const</span>
00607 <span class="keyword"></span>{
00608     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00609 }
00610 
00611 D3DXINLINE D3DXVECTOR4
00612 D3DXVECTOR4::operator - ()<span class="keyword"> const</span>
00613 <span class="keyword"></span>{
00614     <span class="keywordflow">return</span> D3DXVECTOR4(-x, -y, -z, -w);
00615 }
00616 
00617 
00618 <span class="comment">// binary operators</span>
00619 D3DXINLINE D3DXVECTOR4
00620 D3DXVECTOR4::operator + ( CONST D3DXVECTOR4&amp; v )<span class="keyword"> const</span>
00621 <span class="keyword"></span>{
00622     <span class="keywordflow">return</span> D3DXVECTOR4(x + v.x, y + v.y, z + v.z, w + v.w);
00623 }
00624 
00625 D3DXINLINE D3DXVECTOR4
00626 D3DXVECTOR4::operator - ( CONST D3DXVECTOR4&amp; v )<span class="keyword"> const</span>
00627 <span class="keyword"></span>{
00628     <span class="keywordflow">return</span> D3DXVECTOR4(x - v.x, y - v.y, z - v.z, w - v.w);
00629 }
00630 
00631 D3DXINLINE D3DXVECTOR4
00632 D3DXVECTOR4::operator * ( FLOAT f )<span class="keyword"> const</span>
00633 <span class="keyword"></span>{
00634     <span class="keywordflow">return</span> D3DXVECTOR4(x * f, y * f, z * f, w * f);
00635 }
00636 
00637 D3DXINLINE D3DXVECTOR4
00638 D3DXVECTOR4::operator / ( FLOAT f )<span class="keyword"> const</span>
00639 <span class="keyword"></span>{
00640     FLOAT fInv = 1.0f / f;
00641     <span class="keywordflow">return</span> D3DXVECTOR4(x * fInv, y * fInv, z * fInv, w * fInv);
00642 }
00643 
00644 D3DXINLINE D3DXVECTOR4
00645 operator * ( FLOAT f, CONST D3DXVECTOR4&amp; v )
00646 {
00647     <span class="keywordflow">return</span> D3DXVECTOR4(f * v.x, f * v.y, f * v.z, f * v.w);
00648 }
00649 
00650 
00651 D3DXINLINE BOOL
00652 D3DXVECTOR4::operator == ( CONST D3DXVECTOR4&amp; v )<span class="keyword"> const</span>
00653 <span class="keyword"></span>{
00654     <span class="keywordflow">return</span> x == v.x &amp;&amp; y == v.y &amp;&amp; z == v.z &amp;&amp; w == v.w;
00655 }
00656 
00657 D3DXINLINE BOOL
00658 D3DXVECTOR4::operator != ( CONST D3DXVECTOR4&amp; v )<span class="keyword"> const</span>
00659 <span class="keyword"></span>{
00660     <span class="keywordflow">return</span> x != v.x || y != v.y || z != v.z || w != v.w;
00661 }
00662 
00663 
00664 
00665 <span class="comment">//--------------------------</span>
00666 <span class="comment">// 4D Vector (16 bit)</span>
00667 <span class="comment">//--------------------------</span>
00668 
00669 D3DXINLINE
00670 D3DXVECTOR4_16F::D3DXVECTOR4_16F( CONST FLOAT *pf )
00671 {
00672 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00673 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00674         <span class="keywordflow">return</span>;
00675 <span class="preprocessor">#endif</span>
00676 <span class="preprocessor"></span>
00677     D3DXFloat32To16Array(&amp;x, pf, 4);
00678 }
00679 
00680 D3DXINLINE
00681 D3DXVECTOR4_16F::D3DXVECTOR4_16F( CONST D3DXFLOAT16 *pf )
00682 {
00683 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00684 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00685         <span class="keywordflow">return</span>;
00686 <span class="preprocessor">#endif</span>
00687 <span class="preprocessor"></span>
00688     *((DWORD *) &amp;x) = *((DWORD *) &amp;pf[0]);
00689     *((DWORD *) &amp;z) = *((DWORD *) &amp;pf[2]);
00690 }
00691 
00692 D3DXINLINE
00693 D3DXVECTOR4_16F::D3DXVECTOR4_16F( CONST D3DXVECTOR3_16F&amp; v, CONST D3DXFLOAT16&amp; f )
00694 {
00695     x = v.x;
00696     y = v.y;
00697     z = v.z;
00698     w = f;
00699 }
00700 
00701 D3DXINLINE
00702 D3DXVECTOR4_16F::D3DXVECTOR4_16F( CONST D3DXFLOAT16 &amp;fx, CONST D3DXFLOAT16 &amp;fy, CONST D3DXFLOAT16 &amp;fz, CONST D3DXFLOAT16 &amp;fw )
00703 {
00704     x = fx;
00705     y = fy;
00706     z = fz;
00707     w = fw;
00708 }
00709 
00710 
00711 <span class="comment">// casting</span>
00712 D3DXINLINE
00713 D3DXVECTOR4_16F::operator D3DXFLOAT16* ()
00714 {
00715     <span class="keywordflow">return</span> (D3DXFLOAT16*) &amp;x;
00716 }
00717 
00718 D3DXINLINE
00719 D3DXVECTOR4_16F::operator CONST D3DXFLOAT16* ()<span class="keyword"> const</span>
00720 <span class="keyword"></span>{
00721     <span class="keywordflow">return</span> (CONST D3DXFLOAT16*) &amp;x;
00722 }
00723 
00724 
00725 <span class="comment">// binary operators</span>
00726 D3DXINLINE BOOL 
00727 D3DXVECTOR4_16F::operator == ( CONST D3DXVECTOR4_16F &amp;v )<span class="keyword"> const</span>
00728 <span class="keyword"></span>{
00729     <span class="keywordflow">return</span> *((DWORD *) &amp;x) == *((DWORD *) &amp;v.x) &amp;&amp;
00730            *((DWORD *) &amp;z) == *((DWORD *) &amp;v.z);
00731 }
00732 
00733 D3DXINLINE BOOL 
00734 D3DXVECTOR4_16F::operator != ( CONST D3DXVECTOR4_16F &amp;v )<span class="keyword"> const</span>
00735 <span class="keyword"></span>{
00736     <span class="keywordflow">return</span> *((DWORD *) &amp;x) != *((DWORD *) &amp;v.x) ||
00737            *((DWORD *) &amp;z) != *((DWORD *) &amp;v.z);
00738 }
00739 
00740 
00741 <span class="comment">//--------------------------</span>
00742 <span class="comment">// Matrix</span>
00743 <span class="comment">//--------------------------</span>
00744 D3DXINLINE
00745 D3DXMATRIX::D3DXMATRIX( CONST FLOAT* pf )
00746 {
00747 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00748 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00749         <span class="keywordflow">return</span>;
00750 <span class="preprocessor">#endif</span>
00751 <span class="preprocessor"></span>
00752     memcpy(&amp;_11, pf, <span class="keyword">sizeof</span>(D3DXMATRIX));
00753 }
00754 
00755 D3DXINLINE
00756 D3DXMATRIX::D3DXMATRIX( CONST D3DMATRIX&amp; mat )
00757 {
00758     memcpy(&amp;_11, &amp;mat, <span class="keyword">sizeof</span>(D3DXMATRIX));
00759 }
00760 
00761 D3DXINLINE
00762 D3DXMATRIX::D3DXMATRIX( CONST D3DXFLOAT16* pf )
00763 {
00764 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
00765 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
00766         <span class="keywordflow">return</span>;
00767 <span class="preprocessor">#endif</span>
00768 <span class="preprocessor"></span>
00769     D3DXFloat16To32Array(&amp;_11, pf, 16);
00770 }
00771 
00772 D3DXINLINE
00773 D3DXMATRIX::D3DXMATRIX( FLOAT f11, FLOAT f12, FLOAT f13, FLOAT f14,
00774                         FLOAT f21, FLOAT f22, FLOAT f23, FLOAT f24,
00775                         FLOAT f31, FLOAT f32, FLOAT f33, FLOAT f34,
00776                         FLOAT f41, FLOAT f42, FLOAT f43, FLOAT f44 )
00777 {
00778     _11 = f11; _12 = f12; _13 = f13; _14 = f14;
00779     _21 = f21; _22 = f22; _23 = f23; _24 = f24;
00780     _31 = f31; _32 = f32; _33 = f33; _34 = f34;
00781     _41 = f41; _42 = f42; _43 = f43; _44 = f44;
00782 }
00783 
00784 
00785 
00786 <span class="comment">// access grants</span>
00787 D3DXINLINE FLOAT&amp;
00788 D3DXMATRIX::operator () ( UINT iRow, UINT iCol )
00789 {
00790     <span class="keywordflow">return</span> m[iRow][iCol];
00791 }
00792 
00793 D3DXINLINE FLOAT
00794 D3DXMATRIX::operator () ( UINT iRow, UINT iCol )<span class="keyword"> const</span>
00795 <span class="keyword"></span>{
00796     <span class="keywordflow">return</span> m[iRow][iCol];
00797 }
00798 
00799 
00800 <span class="comment">// casting operators</span>
00801 D3DXINLINE
00802 D3DXMATRIX::operator FLOAT* ()
00803 {
00804     <span class="keywordflow">return</span> (FLOAT *) &amp;_11;
00805 }
00806 
00807 D3DXINLINE
00808 D3DXMATRIX::operator CONST FLOAT* ()<span class="keyword"> const</span>
00809 <span class="keyword"></span>{
00810     <span class="keywordflow">return</span> (CONST FLOAT *) &amp;_11;
00811 }
00812 
00813 
00814 <span class="comment">// assignment operators</span>
00815 D3DXINLINE D3DXMATRIX&amp;
00816 D3DXMATRIX::operator *= ( CONST D3DXMATRIX&amp; mat )
00817 {
00818     D3DXMatrixMultiply(<span class="keyword">this</span>, <span class="keyword">this</span>, &amp;mat);
00819     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00820 }
00821 
00822 D3DXINLINE D3DXMATRIX&amp;
00823 D3DXMATRIX::operator += ( CONST D3DXMATRIX&amp; mat )
00824 {
00825     _11 += mat._11; _12 += mat._12; _13 += mat._13; _14 += mat._14;
00826     _21 += mat._21; _22 += mat._22; _23 += mat._23; _24 += mat._24;
00827     _31 += mat._31; _32 += mat._32; _33 += mat._33; _34 += mat._34;
00828     _41 += mat._41; _42 += mat._42; _43 += mat._43; _44 += mat._44;
00829     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00830 }
00831 
00832 D3DXINLINE D3DXMATRIX&amp;
00833 D3DXMATRIX::operator -= ( CONST D3DXMATRIX&amp; mat )
00834 {
00835     _11 -= mat._11; _12 -= mat._12; _13 -= mat._13; _14 -= mat._14;
00836     _21 -= mat._21; _22 -= mat._22; _23 -= mat._23; _24 -= mat._24;
00837     _31 -= mat._31; _32 -= mat._32; _33 -= mat._33; _34 -= mat._34;
00838     _41 -= mat._41; _42 -= mat._42; _43 -= mat._43; _44 -= mat._44;
00839     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00840 }
00841 
00842 D3DXINLINE D3DXMATRIX&amp;
00843 D3DXMATRIX::operator *= ( FLOAT f )
00844 {
00845     _11 *= f; _12 *= f; _13 *= f; _14 *= f;
00846     _21 *= f; _22 *= f; _23 *= f; _24 *= f;
00847     _31 *= f; _32 *= f; _33 *= f; _34 *= f;
00848     _41 *= f; _42 *= f; _43 *= f; _44 *= f;
00849     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00850 }
00851 
00852 D3DXINLINE D3DXMATRIX&amp;
00853 D3DXMATRIX::operator /= ( FLOAT f )
00854 {
00855     FLOAT fInv = 1.0f / f;
00856     _11 *= fInv; _12 *= fInv; _13 *= fInv; _14 *= fInv;
00857     _21 *= fInv; _22 *= fInv; _23 *= fInv; _24 *= fInv;
00858     _31 *= fInv; _32 *= fInv; _33 *= fInv; _34 *= fInv;
00859     _41 *= fInv; _42 *= fInv; _43 *= fInv; _44 *= fInv;
00860     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00861 }
00862 
00863 
00864 <span class="comment">// unary operators</span>
00865 D3DXINLINE D3DXMATRIX
00866 D3DXMATRIX::operator + ()<span class="keyword"> const</span>
00867 <span class="keyword"></span>{
00868     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00869 }
00870 
00871 D3DXINLINE D3DXMATRIX
00872 D3DXMATRIX::operator - ()<span class="keyword"> const</span>
00873 <span class="keyword"></span>{
00874     <span class="keywordflow">return</span> D3DXMATRIX(-_11, -_12, -_13, -_14,
00875                       -_21, -_22, -_23, -_24,
00876                       -_31, -_32, -_33, -_34,
00877                       -_41, -_42, -_43, -_44);
00878 }
00879 
00880 
00881 <span class="comment">// binary operators</span>
00882 D3DXINLINE D3DXMATRIX
00883 D3DXMATRIX::operator * ( CONST D3DXMATRIX&amp; mat )<span class="keyword"> const</span>
00884 <span class="keyword"></span>{
00885     D3DXMATRIX matT;
00886     D3DXMatrixMultiply(&amp;matT, <span class="keyword">this</span>, &amp;mat);
00887     <span class="keywordflow">return</span> matT;
00888 }
00889 
00890 D3DXINLINE D3DXMATRIX
00891 D3DXMATRIX::operator + ( CONST D3DXMATRIX&amp; mat )<span class="keyword"> const</span>
00892 <span class="keyword"></span>{
00893     <span class="keywordflow">return</span> D3DXMATRIX(_11 + mat._11, _12 + mat._12, _13 + mat._13, _14 + mat._14,
00894                       _21 + mat._21, _22 + mat._22, _23 + mat._23, _24 + mat._24,
00895                       _31 + mat._31, _32 + mat._32, _33 + mat._33, _34 + mat._34,
00896                       _41 + mat._41, _42 + mat._42, _43 + mat._43, _44 + mat._44);
00897 }
00898 
00899 D3DXINLINE D3DXMATRIX
00900 D3DXMATRIX::operator - ( CONST D3DXMATRIX&amp; mat )<span class="keyword"> const</span>
00901 <span class="keyword"></span>{
00902     <span class="keywordflow">return</span> D3DXMATRIX(_11 - mat._11, _12 - mat._12, _13 - mat._13, _14 - mat._14,
00903                       _21 - mat._21, _22 - mat._22, _23 - mat._23, _24 - mat._24,
00904                       _31 - mat._31, _32 - mat._32, _33 - mat._33, _34 - mat._34,
00905                       _41 - mat._41, _42 - mat._42, _43 - mat._43, _44 - mat._44);
00906 }
00907 
00908 D3DXINLINE D3DXMATRIX
00909 D3DXMATRIX::operator * ( FLOAT f )<span class="keyword"> const</span>
00910 <span class="keyword"></span>{
00911     <span class="keywordflow">return</span> D3DXMATRIX(_11 * f, _12 * f, _13 * f, _14 * f,
00912                       _21 * f, _22 * f, _23 * f, _24 * f,
00913                       _31 * f, _32 * f, _33 * f, _34 * f,
00914                       _41 * f, _42 * f, _43 * f, _44 * f);
00915 }
00916 
00917 D3DXINLINE D3DXMATRIX
00918 D3DXMATRIX::operator / ( FLOAT f )<span class="keyword"> const</span>
00919 <span class="keyword"></span>{
00920     FLOAT fInv = 1.0f / f;
00921     <span class="keywordflow">return</span> D3DXMATRIX(_11 * fInv, _12 * fInv, _13 * fInv, _14 * fInv,
00922                       _21 * fInv, _22 * fInv, _23 * fInv, _24 * fInv,
00923                       _31 * fInv, _32 * fInv, _33 * fInv, _34 * fInv,
00924                       _41 * fInv, _42 * fInv, _43 * fInv, _44 * fInv);
00925 }
00926 
00927 
00928 D3DXINLINE D3DXMATRIX
00929 operator * ( FLOAT f, CONST D3DXMATRIX&amp; mat )
00930 {
00931     <span class="keywordflow">return</span> D3DXMATRIX(f * mat._11, f * mat._12, f * mat._13, f * mat._14,
00932                       f * mat._21, f * mat._22, f * mat._23, f * mat._24,
00933                       f * mat._31, f * mat._32, f * mat._33, f * mat._34,
00934                       f * mat._41, f * mat._42, f * mat._43, f * mat._44);
00935 }
00936 
00937 
00938 D3DXINLINE BOOL
00939 D3DXMATRIX::operator == ( CONST D3DXMATRIX&amp; mat )<span class="keyword"> const</span>
00940 <span class="keyword"></span>{
00941     <span class="keywordflow">return</span> 0 == memcmp(<span class="keyword">this</span>, &amp;mat, <span class="keyword">sizeof</span>(D3DXMATRIX));
00942 }
00943 
00944 D3DXINLINE BOOL
00945 D3DXMATRIX::operator != ( CONST D3DXMATRIX&amp; mat )<span class="keyword"> const</span>
00946 <span class="keyword"></span>{
00947     <span class="keywordflow">return</span> 0 != memcmp(<span class="keyword">this</span>, &amp;mat, <span class="keyword">sizeof</span>(D3DXMATRIX));
00948 }
00949 
00950 
00951 
00952 <span class="comment">//--------------------------</span>
00953 <span class="comment">// Aligned Matrices</span>
00954 <span class="comment">//--------------------------</span>
00955 
00956 D3DXINLINE
00957 _D3DXMATRIXA16::_D3DXMATRIXA16( CONST FLOAT* f ) : 
00958     D3DXMATRIX( f ) 
00959 {
00960 }
00961 
00962 D3DXINLINE
00963 _D3DXMATRIXA16::_D3DXMATRIXA16( CONST D3DMATRIX&amp; m ) : 
00964     D3DXMATRIX( m ) 
00965 {
00966 }
00967 
00968 D3DXINLINE
00969 _D3DXMATRIXA16::_D3DXMATRIXA16( CONST D3DXFLOAT16* f ) : 
00970     D3DXMATRIX( f ) 
00971 {
00972 }
00973 
00974 D3DXINLINE
00975 _D3DXMATRIXA16::_D3DXMATRIXA16( FLOAT _11, FLOAT _12, FLOAT _13, FLOAT _14,
00976                                 FLOAT _21, FLOAT _22, FLOAT _23, FLOAT _24,
00977                                 FLOAT _31, FLOAT _32, FLOAT _33, FLOAT _34,
00978                                 FLOAT _41, FLOAT _42, FLOAT _43, FLOAT _44 ) :
00979     D3DXMATRIX(_11, _12, _13, _14,
00980                _21, _22, _23, _24,
00981                _31, _32, _33, _34,
00982                _41, _42, _43, _44) 
00983 {
00984 }
00985 
00986 D3DXINLINE <span class="keywordtype">void</span>* 
00987 _D3DXMATRIXA16::operator new( size_t s )
00988 {
00989     LPBYTE p = ::new BYTE[s + 16];
00990     <span class="keywordflow">if</span> (p)
00991     {
00992         BYTE offset = (BYTE)(16 - ((UINT_PTR)p &amp; 15));
00993         p += offset;
00994         p[-1] = offset;
00995     }
00996     <span class="keywordflow">return</span> p;
00997 }
00998 
00999 D3DXINLINE <span class="keywordtype">void</span>* 
01000 _D3DXMATRIXA16::operator new[]( size_t s )
01001 {
01002     LPBYTE p = ::new BYTE[s + 16];
01003     <span class="keywordflow">if</span> (p)
01004     {
01005         BYTE offset = (BYTE)(16 - ((UINT_PTR)p &amp; 15));
01006         p += offset;
01007         p[-1] = offset;
01008     }
01009     <span class="keywordflow">return</span> p;
01010 }
01011 
01012 D3DXINLINE <span class="keywordtype">void</span> 
01013 _D3DXMATRIXA16::operator delete(<span class="keywordtype">void</span>* p)
01014 {
01015     <span class="keywordflow">if</span>(p)
01016     {
01017         BYTE* pb = static_cast&lt;BYTE*&gt;(p);
01018         pb -= pb[-1];
01019         ::delete [] pb;
01020     }
01021 }
01022 
01023 D3DXINLINE <span class="keywordtype">void</span> 
01024 _D3DXMATRIXA16::operator delete[](<span class="keywordtype">void</span>* p)
01025 {
01026     <span class="keywordflow">if</span>(p)
01027     {
01028         BYTE* pb = static_cast&lt;BYTE*&gt;(p);
01029         pb -= pb[-1];
01030         ::delete [] pb;
01031     }
01032 }
01033 
01034 D3DXINLINE _D3DXMATRIXA16&amp; 
01035 _D3DXMATRIXA16::operator=(CONST D3DXMATRIX&amp; rhs)
01036 {
01037     memcpy(&amp;_11, &amp;rhs, <span class="keyword">sizeof</span>(D3DXMATRIX));
01038     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01039 }
01040 
01041 
01042 <span class="comment">//--------------------------</span>
01043 <span class="comment">// Quaternion</span>
01044 <span class="comment">//--------------------------</span>
01045 
01046 D3DXINLINE
01047 D3DXQUATERNION::D3DXQUATERNION( CONST FLOAT* pf )
01048 {
01049 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01050 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
01051         <span class="keywordflow">return</span>;
01052 <span class="preprocessor">#endif</span>
01053 <span class="preprocessor"></span>
01054     x = pf[0];
01055     y = pf[1];
01056     z = pf[2];
01057     w = pf[3];
01058 }
01059 
01060 D3DXINLINE
01061 D3DXQUATERNION::D3DXQUATERNION( CONST D3DXFLOAT16* pf )
01062 {
01063 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01064 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
01065         <span class="keywordflow">return</span>;
01066 <span class="preprocessor">#endif</span>
01067 <span class="preprocessor"></span>
01068     D3DXFloat16To32Array(&amp;x, pf, 4);
01069 }
01070 
01071 D3DXINLINE
01072 D3DXQUATERNION::D3DXQUATERNION( FLOAT fx, FLOAT fy, FLOAT fz, FLOAT fw )
01073 {
01074     x = fx;
01075     y = fy;
01076     z = fz;
01077     w = fw;
01078 }
01079 
01080 
01081 <span class="comment">// casting</span>
01082 D3DXINLINE
01083 D3DXQUATERNION::operator FLOAT* ()
01084 {
01085     <span class="keywordflow">return</span> (FLOAT *) &amp;x;
01086 }
01087 
01088 D3DXINLINE
01089 D3DXQUATERNION::operator CONST FLOAT* ()<span class="keyword"> const</span>
01090 <span class="keyword"></span>{
01091     <span class="keywordflow">return</span> (CONST FLOAT *) &amp;x;
01092 }
01093 
01094 
01095 <span class="comment">// assignment operators</span>
01096 D3DXINLINE D3DXQUATERNION&amp;
01097 D3DXQUATERNION::operator += ( CONST D3DXQUATERNION&amp; q )
01098 {
01099     x += q.x;
01100     y += q.y;
01101     z += q.z;
01102     w += q.w;
01103     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01104 }
01105 
01106 D3DXINLINE D3DXQUATERNION&amp;
01107 D3DXQUATERNION::operator -= ( CONST D3DXQUATERNION&amp; q )
01108 {
01109     x -= q.x;
01110     y -= q.y;
01111     z -= q.z;
01112     w -= q.w;
01113     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01114 }
01115 
01116 D3DXINLINE D3DXQUATERNION&amp;
01117 D3DXQUATERNION::operator *= ( CONST D3DXQUATERNION&amp; q )
01118 {
01119     D3DXQuaternionMultiply(<span class="keyword">this</span>, <span class="keyword">this</span>, &amp;q);
01120     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01121 }
01122 
01123 D3DXINLINE D3DXQUATERNION&amp;
01124 D3DXQUATERNION::operator *= ( FLOAT f )
01125 {
01126     x *= f;
01127     y *= f;
01128     z *= f;
01129     w *= f;
01130     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01131 }
01132 
01133 D3DXINLINE D3DXQUATERNION&amp;
01134 D3DXQUATERNION::operator /= ( FLOAT f )
01135 {
01136     FLOAT fInv = 1.0f / f;
01137     x *= fInv;
01138     y *= fInv;
01139     z *= fInv;
01140     w *= fInv;
01141     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01142 }
01143 
01144 
01145 <span class="comment">// unary operators</span>
01146 D3DXINLINE D3DXQUATERNION
01147 D3DXQUATERNION::operator + ()<span class="keyword"> const</span>
01148 <span class="keyword"></span>{
01149     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01150 }
01151 
01152 D3DXINLINE D3DXQUATERNION
01153 D3DXQUATERNION::operator - ()<span class="keyword"> const</span>
01154 <span class="keyword"></span>{
01155     <span class="keywordflow">return</span> D3DXQUATERNION(-x, -y, -z, -w);
01156 }
01157 
01158 
01159 <span class="comment">// binary operators</span>
01160 D3DXINLINE D3DXQUATERNION
01161 D3DXQUATERNION::operator + ( CONST D3DXQUATERNION&amp; q )<span class="keyword"> const</span>
01162 <span class="keyword"></span>{
01163     <span class="keywordflow">return</span> D3DXQUATERNION(x + q.x, y + q.y, z + q.z, w + q.w);
01164 }
01165 
01166 D3DXINLINE D3DXQUATERNION
01167 D3DXQUATERNION::operator - ( CONST D3DXQUATERNION&amp; q )<span class="keyword"> const</span>
01168 <span class="keyword"></span>{
01169     <span class="keywordflow">return</span> D3DXQUATERNION(x - q.x, y - q.y, z - q.z, w - q.w);
01170 }
01171 
01172 D3DXINLINE D3DXQUATERNION
01173 D3DXQUATERNION::operator * ( CONST D3DXQUATERNION&amp; q )<span class="keyword"> const</span>
01174 <span class="keyword"></span>{
01175     D3DXQUATERNION qT;
01176     D3DXQuaternionMultiply(&amp;qT, <span class="keyword">this</span>, &amp;q);
01177     <span class="keywordflow">return</span> qT;
01178 }
01179 
01180 D3DXINLINE D3DXQUATERNION
01181 D3DXQUATERNION::operator * ( FLOAT f )<span class="keyword"> const</span>
01182 <span class="keyword"></span>{
01183     <span class="keywordflow">return</span> D3DXQUATERNION(x * f, y * f, z * f, w * f);
01184 }
01185 
01186 D3DXINLINE D3DXQUATERNION
01187 D3DXQUATERNION::operator / ( FLOAT f )<span class="keyword"> const</span>
01188 <span class="keyword"></span>{
01189     FLOAT fInv = 1.0f / f;
01190     <span class="keywordflow">return</span> D3DXQUATERNION(x * fInv, y * fInv, z * fInv, w * fInv);
01191 }
01192 
01193 
01194 D3DXINLINE D3DXQUATERNION
01195 operator * (FLOAT f, CONST D3DXQUATERNION&amp; q )
01196 {
01197     <span class="keywordflow">return</span> D3DXQUATERNION(f * q.x, f * q.y, f * q.z, f * q.w);
01198 }
01199 
01200 
01201 D3DXINLINE BOOL
01202 D3DXQUATERNION::operator == ( CONST D3DXQUATERNION&amp; q )<span class="keyword"> const</span>
01203 <span class="keyword"></span>{
01204     <span class="keywordflow">return</span> x == q.x &amp;&amp; y == q.y &amp;&amp; z == q.z &amp;&amp; w == q.w;
01205 }
01206 
01207 D3DXINLINE BOOL
01208 D3DXQUATERNION::operator != ( CONST D3DXQUATERNION&amp; q )<span class="keyword"> const</span>
01209 <span class="keyword"></span>{
01210     <span class="keywordflow">return</span> x != q.x || y != q.y || z != q.z || w != q.w;
01211 }
01212 
01213 
01214 
01215 <span class="comment">//--------------------------</span>
01216 <span class="comment">// Plane</span>
01217 <span class="comment">//--------------------------</span>
01218 
01219 D3DXINLINE
01220 D3DXPLANE::D3DXPLANE( CONST FLOAT* pf )
01221 {
01222 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01223 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
01224         <span class="keywordflow">return</span>;
01225 <span class="preprocessor">#endif</span>
01226 <span class="preprocessor"></span>
01227     a = pf[0];
01228     b = pf[1];
01229     c = pf[2];
01230     d = pf[3];
01231 }
01232 
01233 D3DXINLINE
01234 D3DXPLANE::D3DXPLANE( CONST D3DXFLOAT16* pf )
01235 {
01236 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01237 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
01238         <span class="keywordflow">return</span>;
01239 <span class="preprocessor">#endif</span>
01240 <span class="preprocessor"></span>
01241     D3DXFloat16To32Array(&amp;a, pf, 4);
01242 }
01243 
01244 D3DXINLINE
01245 D3DXPLANE::D3DXPLANE( FLOAT fa, FLOAT fb, FLOAT fc, FLOAT fd )
01246 {
01247     a = fa;
01248     b = fb;
01249     c = fc;
01250     d = fd;
01251 }
01252 
01253 
01254 <span class="comment">// casting</span>
01255 D3DXINLINE
01256 D3DXPLANE::operator FLOAT* ()
01257 {
01258     <span class="keywordflow">return</span> (FLOAT *) &amp;a;
01259 }
01260 
01261 D3DXINLINE
01262 D3DXPLANE::operator CONST FLOAT* ()<span class="keyword"> const</span>
01263 <span class="keyword"></span>{
01264     <span class="keywordflow">return</span> (CONST FLOAT *) &amp;a;
01265 }
01266 
01267 
01268 <span class="comment">// assignment operators</span>
01269 D3DXINLINE D3DXPLANE&amp;
01270 D3DXPLANE::operator *= ( FLOAT f )
01271 {
01272     a *= f;
01273     b *= f;
01274     c *= f;
01275     d *= f;
01276     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01277 }
01278 
01279 D3DXINLINE D3DXPLANE&amp;
01280 D3DXPLANE::operator /= ( FLOAT f )
01281 {
01282     FLOAT fInv = 1.0f / f;
01283     a *= fInv;
01284     b *= fInv;
01285     c *= fInv;
01286     d *= fInv;
01287     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01288 }
01289 
01290 
01291 <span class="comment">// unary operators</span>
01292 D3DXINLINE D3DXPLANE
01293 D3DXPLANE::operator + ()<span class="keyword"> const</span>
01294 <span class="keyword"></span>{
01295     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01296 }
01297 
01298 D3DXINLINE D3DXPLANE
01299 D3DXPLANE::operator - ()<span class="keyword"> const</span>
01300 <span class="keyword"></span>{
01301     <span class="keywordflow">return</span> D3DXPLANE(-a, -b, -c, -d);
01302 }
01303 
01304 
01305 <span class="comment">// binary operators</span>
01306 D3DXINLINE D3DXPLANE
01307 D3DXPLANE::operator * ( FLOAT f )<span class="keyword"> const</span>
01308 <span class="keyword"></span>{
01309     <span class="keywordflow">return</span> D3DXPLANE(a * f, b * f, c * f, d * f);
01310 }
01311 
01312 D3DXINLINE D3DXPLANE
01313 D3DXPLANE::operator / ( FLOAT f )<span class="keyword"> const</span>
01314 <span class="keyword"></span>{
01315     FLOAT fInv = 1.0f / f;
01316     <span class="keywordflow">return</span> D3DXPLANE(a * fInv, b * fInv, c * fInv, d * fInv);
01317 }
01318 
01319 D3DXINLINE D3DXPLANE
01320 operator * (FLOAT f, CONST D3DXPLANE&amp; p )
01321 {
01322     <span class="keywordflow">return</span> D3DXPLANE(f * p.a, f * p.b, f * p.c, f * p.d);
01323 }
01324 
01325 D3DXINLINE BOOL
01326 D3DXPLANE::operator == ( CONST D3DXPLANE&amp; p )<span class="keyword"> const</span>
01327 <span class="keyword"></span>{
01328     <span class="keywordflow">return</span> a == p.a &amp;&amp; b == p.b &amp;&amp; c == p.c &amp;&amp; d == p.d;
01329 }
01330 
01331 D3DXINLINE BOOL
01332 D3DXPLANE::operator != ( CONST D3DXPLANE&amp; p )<span class="keyword"> const</span>
01333 <span class="keyword"></span>{
01334     <span class="keywordflow">return</span> a != p.a || b != p.b || c != p.c || d != p.d;
01335 }
01336 
01337 
01338 
01339 
01340 <span class="comment">//--------------------------</span>
01341 <span class="comment">// Color</span>
01342 <span class="comment">//--------------------------</span>
01343 
01344 D3DXINLINE
01345 D3DXCOLOR::D3DXCOLOR( DWORD dw )
01346 {
01347     CONST FLOAT f = 1.0f / 255.0f;
01348     r = f * (FLOAT) (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) (dw &gt;&gt; 16);
01349     g = f * (FLOAT) (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) (dw &gt;&gt;  8);
01350     b = f * (FLOAT) (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) (dw &gt;&gt;  0);
01351     a = f * (FLOAT) (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) (dw &gt;&gt; 24);
01352 }
01353 
01354 D3DXINLINE
01355 D3DXCOLOR::D3DXCOLOR( CONST FLOAT* pf )
01356 {
01357 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01358 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
01359         <span class="keywordflow">return</span>;
01360 <span class="preprocessor">#endif</span>
01361 <span class="preprocessor"></span>
01362     r = pf[0];
01363     g = pf[1];
01364     b = pf[2];
01365     a = pf[3];
01366 }
01367 
01368 D3DXINLINE
01369 D3DXCOLOR::D3DXCOLOR( CONST D3DXFLOAT16* pf )
01370 {
01371 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01372 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pf)
01373         <span class="keywordflow">return</span>;
01374 <span class="preprocessor">#endif</span>
01375 <span class="preprocessor"></span>
01376     D3DXFloat16To32Array(&amp;r, pf, 4);
01377 }
01378 
01379 D3DXINLINE
01380 D3DXCOLOR::D3DXCOLOR( CONST D3DCOLORVALUE&amp; c )
01381 {
01382     r = c.r;
01383     g = c.g;
01384     b = c.b;
01385     a = c.a;
01386 }
01387 
01388 D3DXINLINE
01389 D3DXCOLOR::D3DXCOLOR( FLOAT fr, FLOAT fg, FLOAT fb, FLOAT fa )
01390 {
01391     r = fr;
01392     g = fg;
01393     b = fb;
01394     a = fa;
01395 }
01396 
01397 
01398 <span class="comment">// casting</span>
01399 D3DXINLINE
01400 D3DXCOLOR::operator DWORD ()<span class="keyword"> const</span>
01401 <span class="keyword"></span>{
01402     DWORD dwR = r &gt;= 1.0f ? 0xff : r &lt;= 0.0f ? 0x00 : (DWORD) (r * 255.0f + 0.5f);
01403     DWORD dwG = g &gt;= 1.0f ? 0xff : g &lt;= 0.0f ? 0x00 : (DWORD) (g * 255.0f + 0.5f);
01404     DWORD dwB = b &gt;= 1.0f ? 0xff : b &lt;= 0.0f ? 0x00 : (DWORD) (b * 255.0f + 0.5f);
01405     DWORD dwA = a &gt;= 1.0f ? 0xff : a &lt;= 0.0f ? 0x00 : (DWORD) (a * 255.0f + 0.5f);
01406 
01407     <span class="keywordflow">return</span> (dwA &lt;&lt; 24) | (dwR &lt;&lt; 16) | (dwG &lt;&lt; 8) | dwB;
01408 }
01409 
01410 
01411 D3DXINLINE
01412 D3DXCOLOR::operator FLOAT * ()
01413 {
01414     <span class="keywordflow">return</span> (FLOAT *) &amp;r;
01415 }
01416 
01417 D3DXINLINE
01418 D3DXCOLOR::operator CONST FLOAT * ()<span class="keyword"> const</span>
01419 <span class="keyword"></span>{
01420     <span class="keywordflow">return</span> (CONST FLOAT *) &amp;r;
01421 }
01422 
01423 
01424 D3DXINLINE
01425 D3DXCOLOR::operator D3DCOLORVALUE * ()
01426 {
01427     <span class="keywordflow">return</span> (D3DCOLORVALUE *) &amp;r;
01428 }
01429 
01430 D3DXINLINE
01431 D3DXCOLOR::operator CONST D3DCOLORVALUE * ()<span class="keyword"> const</span>
01432 <span class="keyword"></span>{
01433     <span class="keywordflow">return</span> (CONST D3DCOLORVALUE *) &amp;r;
01434 }
01435 
01436 
01437 D3DXINLINE
01438 D3DXCOLOR::operator D3DCOLORVALUE&amp; ()
01439 {
01440     <span class="keywordflow">return</span> *((D3DCOLORVALUE *) &amp;r);
01441 }
01442 
01443 D3DXINLINE
01444 D3DXCOLOR::operator CONST D3DCOLORVALUE&amp; ()<span class="keyword"> const</span>
01445 <span class="keyword"></span>{
01446     <span class="keywordflow">return</span> *((CONST D3DCOLORVALUE *) &amp;r);
01447 }
01448 
01449 
01450 <span class="comment">// assignment operators</span>
01451 D3DXINLINE D3DXCOLOR&amp;
01452 D3DXCOLOR::operator += ( CONST D3DXCOLOR&amp; c )
01453 {
01454     r += c.r;
01455     g += c.g;
01456     b += c.b;
01457     a += c.a;
01458     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01459 }
01460 
01461 D3DXINLINE D3DXCOLOR&amp;
01462 D3DXCOLOR::operator -= ( CONST D3DXCOLOR&amp; c )
01463 {
01464     r -= c.r;
01465     g -= c.g;
01466     b -= c.b;
01467     a -= c.a;
01468     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01469 }
01470 
01471 D3DXINLINE D3DXCOLOR&amp;
01472 D3DXCOLOR::operator *= ( FLOAT f )
01473 {
01474     r *= f;
01475     g *= f;
01476     b *= f;
01477     a *= f;
01478     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01479 }
01480 
01481 D3DXINLINE D3DXCOLOR&amp;
01482 D3DXCOLOR::operator /= ( FLOAT f )
01483 {
01484     FLOAT fInv = 1.0f / f;
01485     r *= fInv;
01486     g *= fInv;
01487     b *= fInv;
01488     a *= fInv;
01489     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01490 }
01491 
01492 
01493 <span class="comment">// unary operators</span>
01494 D3DXINLINE D3DXCOLOR
01495 D3DXCOLOR::operator + ()<span class="keyword"> const</span>
01496 <span class="keyword"></span>{
01497     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01498 }
01499 
01500 D3DXINLINE D3DXCOLOR
01501 D3DXCOLOR::operator - ()<span class="keyword"> const</span>
01502 <span class="keyword"></span>{
01503     <span class="keywordflow">return</span> D3DXCOLOR(-r, -g, -b, -a);
01504 }
01505 
01506 
01507 <span class="comment">// binary operators</span>
01508 D3DXINLINE D3DXCOLOR
01509 D3DXCOLOR::operator + ( CONST D3DXCOLOR&amp; c )<span class="keyword"> const</span>
01510 <span class="keyword"></span>{
01511     <span class="keywordflow">return</span> D3DXCOLOR(r + c.r, g + c.g, b + c.b, a + c.a);
01512 }
01513 
01514 D3DXINLINE D3DXCOLOR
01515 D3DXCOLOR::operator - ( CONST D3DXCOLOR&amp; c )<span class="keyword"> const</span>
01516 <span class="keyword"></span>{
01517     <span class="keywordflow">return</span> D3DXCOLOR(r - c.r, g - c.g, b - c.b, a - c.a);
01518 }
01519 
01520 D3DXINLINE D3DXCOLOR
01521 D3DXCOLOR::operator * ( FLOAT f )<span class="keyword"> const</span>
01522 <span class="keyword"></span>{
01523     <span class="keywordflow">return</span> D3DXCOLOR(r * f, g * f, b * f, a * f);
01524 }
01525 
01526 D3DXINLINE D3DXCOLOR
01527 D3DXCOLOR::operator / ( FLOAT f )<span class="keyword"> const</span>
01528 <span class="keyword"></span>{
01529     FLOAT fInv = 1.0f / f;
01530     <span class="keywordflow">return</span> D3DXCOLOR(r * fInv, g * fInv, b * fInv, a * fInv);
01531 }
01532 
01533 
01534 D3DXINLINE D3DXCOLOR
01535 operator * (FLOAT f, CONST D3DXCOLOR&amp; c )
01536 {
01537     <span class="keywordflow">return</span> D3DXCOLOR(f * c.r, f * c.g, f * c.b, f * c.a);
01538 }
01539 
01540 
01541 D3DXINLINE BOOL
01542 D3DXCOLOR::operator == ( CONST D3DXCOLOR&amp; c )<span class="keyword"> const</span>
01543 <span class="keyword"></span>{
01544     <span class="keywordflow">return</span> r == c.r &amp;&amp; g == c.g &amp;&amp; b == c.b &amp;&amp; a == c.a;
01545 }
01546 
01547 D3DXINLINE BOOL
01548 D3DXCOLOR::operator != ( CONST D3DXCOLOR&amp; c )<span class="keyword"> const</span>
01549 <span class="keyword"></span>{
01550     <span class="keywordflow">return</span> r != c.r || g != c.g || b != c.b || a != c.a;
01551 }
01552 
01553 
01554 <span class="preprocessor">#endif //__cplusplus</span>
01555 <span class="preprocessor"></span>
01556 
01557 
01558 <span class="comment">//===========================================================================</span>
01559 <span class="comment">//</span>
01560 <span class="comment">// Inline functions</span>
01561 <span class="comment">//</span>
01562 <span class="comment">//===========================================================================</span>
01563 
01564 
01565 <span class="comment">//--------------------------</span>
01566 <span class="comment">// 2D Vector</span>
01567 <span class="comment">//--------------------------</span>
01568 
01569 D3DXINLINE FLOAT D3DXVec2Length
01570     ( CONST D3DXVECTOR2 *pV )
01571 {
01572 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01573 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pV)
01574         <span class="keywordflow">return</span> 0.0f;
01575 <span class="preprocessor">#endif</span>
01576 <span class="preprocessor"></span>
01577 <span class="preprocessor">#ifdef __cplusplus</span>
01578 <span class="preprocessor"></span>    <span class="keywordflow">return</span> sqrtf(pV-&gt;x * pV-&gt;x + pV-&gt;y * pV-&gt;y);
01579 <span class="preprocessor">#else</span>
01580 <span class="preprocessor"></span>    <span class="keywordflow">return</span> (FLOAT) sqrt(pV-&gt;x * pV-&gt;x + pV-&gt;y * pV-&gt;y);
01581 <span class="preprocessor">#endif</span>
01582 <span class="preprocessor"></span>}
01583 
01584 D3DXINLINE FLOAT D3DXVec2LengthSq
01585     ( CONST D3DXVECTOR2 *pV )
01586 {
01587 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01588 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pV)
01589         <span class="keywordflow">return</span> 0.0f;
01590 <span class="preprocessor">#endif</span>
01591 <span class="preprocessor"></span>
01592     <span class="keywordflow">return</span> pV-&gt;x * pV-&gt;x + pV-&gt;y * pV-&gt;y;
01593 }
01594 
01595 D3DXINLINE FLOAT D3DXVec2Dot
01596     ( CONST D3DXVECTOR2 *pV1, CONST D3DXVECTOR2 *pV2 )
01597 {
01598 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01599 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pV1 || !pV2)
01600         <span class="keywordflow">return</span> 0.0f;
01601 <span class="preprocessor">#endif</span>
01602 <span class="preprocessor"></span>
01603     <span class="keywordflow">return</span> pV1-&gt;x * pV2-&gt;x + pV1-&gt;y * pV2-&gt;y;
01604 }
01605 
01606 D3DXINLINE FLOAT D3DXVec2CCW
01607     ( CONST D3DXVECTOR2 *pV1, CONST D3DXVECTOR2 *pV2 )
01608 {
01609 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01610 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pV1 || !pV2)
01611         <span class="keywordflow">return</span> 0.0f;
01612 <span class="preprocessor">#endif</span>
01613 <span class="preprocessor"></span>
01614     <span class="keywordflow">return</span> pV1-&gt;x * pV2-&gt;y - pV1-&gt;y * pV2-&gt;x;
01615 }
01616 
01617 D3DXINLINE D3DXVECTOR2* D3DXVec2Add
01618     ( D3DXVECTOR2 *pOut, CONST D3DXVECTOR2 *pV1, CONST D3DXVECTOR2 *pV2 )
01619 {
01620 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01621 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01622         <span class="keywordflow">return</span> NULL;
01623 <span class="preprocessor">#endif</span>
01624 <span class="preprocessor"></span>
01625     pOut-&gt;x = pV1-&gt;x + pV2-&gt;x;
01626     pOut-&gt;y = pV1-&gt;y + pV2-&gt;y;
01627     <span class="keywordflow">return</span> pOut;
01628 }
01629 
01630 D3DXINLINE D3DXVECTOR2* D3DXVec2Subtract
01631     ( D3DXVECTOR2 *pOut, CONST D3DXVECTOR2 *pV1, CONST D3DXVECTOR2 *pV2 )
01632 {
01633 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01634 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01635         <span class="keywordflow">return</span> NULL;
01636 <span class="preprocessor">#endif</span>
01637 <span class="preprocessor"></span>
01638     pOut-&gt;x = pV1-&gt;x - pV2-&gt;x;
01639     pOut-&gt;y = pV1-&gt;y - pV2-&gt;y;
01640     <span class="keywordflow">return</span> pOut;
01641 }
01642 
01643 D3DXINLINE D3DXVECTOR2* D3DXVec2Minimize
01644     ( D3DXVECTOR2 *pOut, CONST D3DXVECTOR2 *pV1, CONST D3DXVECTOR2 *pV2 )
01645 {
01646 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01647 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01648         <span class="keywordflow">return</span> NULL;
01649 <span class="preprocessor">#endif</span>
01650 <span class="preprocessor"></span>
01651     pOut-&gt;x = pV1-&gt;x &lt; pV2-&gt;x ? pV1-&gt;x : pV2-&gt;x;
01652     pOut-&gt;y = pV1-&gt;y &lt; pV2-&gt;y ? pV1-&gt;y : pV2-&gt;y;
01653     <span class="keywordflow">return</span> pOut;
01654 }
01655 
01656 D3DXINLINE D3DXVECTOR2* D3DXVec2Maximize
01657     ( D3DXVECTOR2 *pOut, CONST D3DXVECTOR2 *pV1, CONST D3DXVECTOR2 *pV2 )
01658 {
01659 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01660 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01661         <span class="keywordflow">return</span> NULL;
01662 <span class="preprocessor">#endif</span>
01663 <span class="preprocessor"></span>
01664     pOut-&gt;x = pV1-&gt;x &gt; pV2-&gt;x ? pV1-&gt;x : pV2-&gt;x;
01665     pOut-&gt;y = pV1-&gt;y &gt; pV2-&gt;y ? pV1-&gt;y : pV2-&gt;y;
01666     <span class="keywordflow">return</span> pOut;
01667 }
01668 
01669 D3DXINLINE D3DXVECTOR2* D3DXVec2Scale
01670     ( D3DXVECTOR2 *pOut, CONST D3DXVECTOR2 *pV, FLOAT s )
01671 {
01672 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01673 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV)
01674         <span class="keywordflow">return</span> NULL;
01675 <span class="preprocessor">#endif</span>
01676 <span class="preprocessor"></span>
01677     pOut-&gt;x = pV-&gt;x * s;
01678     pOut-&gt;y = pV-&gt;y * s;
01679     <span class="keywordflow">return</span> pOut;
01680 }
01681 
01682 D3DXINLINE D3DXVECTOR2* D3DXVec2Lerp
01683     ( D3DXVECTOR2 *pOut, CONST D3DXVECTOR2 *pV1, CONST D3DXVECTOR2 *pV2,
01684       FLOAT s )
01685 {
01686 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01687 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01688         <span class="keywordflow">return</span> NULL;
01689 <span class="preprocessor">#endif</span>
01690 <span class="preprocessor"></span>
01691     pOut-&gt;x = pV1-&gt;x + s * (pV2-&gt;x - pV1-&gt;x);
01692     pOut-&gt;y = pV1-&gt;y + s * (pV2-&gt;y - pV1-&gt;y);
01693     <span class="keywordflow">return</span> pOut;
01694 }
01695 
01696 
01697 <span class="comment">//--------------------------</span>
01698 <span class="comment">// 3D Vector</span>
01699 <span class="comment">//--------------------------</span>
01700 
01701 D3DXINLINE FLOAT D3DXVec3Length
01702     ( CONST D3DXVECTOR3 *pV )
01703 {
01704 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01705 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pV)
01706         <span class="keywordflow">return</span> 0.0f;
01707 <span class="preprocessor">#endif</span>
01708 <span class="preprocessor"></span>
01709 <span class="preprocessor">#ifdef __cplusplus</span>
01710 <span class="preprocessor"></span>    <span class="keywordflow">return</span> sqrtf(pV-&gt;x * pV-&gt;x + pV-&gt;y * pV-&gt;y + pV-&gt;z * pV-&gt;z);
01711 <span class="preprocessor">#else</span>
01712 <span class="preprocessor"></span>    <span class="keywordflow">return</span> (FLOAT) sqrt(pV-&gt;x * pV-&gt;x + pV-&gt;y * pV-&gt;y + pV-&gt;z * pV-&gt;z);
01713 <span class="preprocessor">#endif</span>
01714 <span class="preprocessor"></span>}
01715 
01716 D3DXINLINE FLOAT D3DXVec3LengthSq
01717     ( CONST D3DXVECTOR3 *pV )
01718 {
01719 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01720 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pV)
01721         <span class="keywordflow">return</span> 0.0f;
01722 <span class="preprocessor">#endif</span>
01723 <span class="preprocessor"></span>
01724     <span class="keywordflow">return</span> pV-&gt;x * pV-&gt;x + pV-&gt;y * pV-&gt;y + pV-&gt;z * pV-&gt;z;
01725 }
01726 
01727 D3DXINLINE FLOAT D3DXVec3Dot
01728     ( CONST D3DXVECTOR3 *pV1, CONST D3DXVECTOR3 *pV2 )
01729 {
01730 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01731 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pV1 || !pV2)
01732         <span class="keywordflow">return</span> 0.0f;
01733 <span class="preprocessor">#endif</span>
01734 <span class="preprocessor"></span>
01735     <span class="keywordflow">return</span> pV1-&gt;x * pV2-&gt;x + pV1-&gt;y * pV2-&gt;y + pV1-&gt;z * pV2-&gt;z;
01736 }
01737 
01738 D3DXINLINE D3DXVECTOR3* D3DXVec3Cross
01739     ( D3DXVECTOR3 *pOut, CONST D3DXVECTOR3 *pV1, CONST D3DXVECTOR3 *pV2 )
01740 {
01741     D3DXVECTOR3 v;
01742 
01743 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01744 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01745         <span class="keywordflow">return</span> NULL;
01746 <span class="preprocessor">#endif</span>
01747 <span class="preprocessor"></span>
01748     v.x = pV1-&gt;y * pV2-&gt;z - pV1-&gt;z * pV2-&gt;y;
01749     v.y = pV1-&gt;z * pV2-&gt;x - pV1-&gt;x * pV2-&gt;z;
01750     v.z = pV1-&gt;x * pV2-&gt;y - pV1-&gt;y * pV2-&gt;x;
01751 
01752     *pOut = v;
01753     <span class="keywordflow">return</span> pOut;
01754 }
01755 
01756 D3DXINLINE D3DXVECTOR3* D3DXVec3Add
01757     ( D3DXVECTOR3 *pOut, CONST D3DXVECTOR3 *pV1, CONST D3DXVECTOR3 *pV2 )
01758 {
01759 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01760 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01761         <span class="keywordflow">return</span> NULL;
01762 <span class="preprocessor">#endif</span>
01763 <span class="preprocessor"></span>
01764     pOut-&gt;x = pV1-&gt;x + pV2-&gt;x;
01765     pOut-&gt;y = pV1-&gt;y + pV2-&gt;y;
01766     pOut-&gt;z = pV1-&gt;z + pV2-&gt;z;
01767     <span class="keywordflow">return</span> pOut;
01768 }
01769 
01770 D3DXINLINE D3DXVECTOR3* D3DXVec3Subtract
01771     ( D3DXVECTOR3 *pOut, CONST D3DXVECTOR3 *pV1, CONST D3DXVECTOR3 *pV2 )
01772 {
01773 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01774 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01775         <span class="keywordflow">return</span> NULL;
01776 <span class="preprocessor">#endif</span>
01777 <span class="preprocessor"></span>
01778     pOut-&gt;x = pV1-&gt;x - pV2-&gt;x;
01779     pOut-&gt;y = pV1-&gt;y - pV2-&gt;y;
01780     pOut-&gt;z = pV1-&gt;z - pV2-&gt;z;
01781     <span class="keywordflow">return</span> pOut;
01782 }
01783 
01784 D3DXINLINE D3DXVECTOR3* D3DXVec3Minimize
01785     ( D3DXVECTOR3 *pOut, CONST D3DXVECTOR3 *pV1, CONST D3DXVECTOR3 *pV2 )
01786 {
01787 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01788 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01789         <span class="keywordflow">return</span> NULL;
01790 <span class="preprocessor">#endif</span>
01791 <span class="preprocessor"></span>
01792     pOut-&gt;x = pV1-&gt;x &lt; pV2-&gt;x ? pV1-&gt;x : pV2-&gt;x;
01793     pOut-&gt;y = pV1-&gt;y &lt; pV2-&gt;y ? pV1-&gt;y : pV2-&gt;y;
01794     pOut-&gt;z = pV1-&gt;z &lt; pV2-&gt;z ? pV1-&gt;z : pV2-&gt;z;
01795     <span class="keywordflow">return</span> pOut;
01796 }
01797 
01798 D3DXINLINE D3DXVECTOR3* D3DXVec3Maximize
01799     ( D3DXVECTOR3 *pOut, CONST D3DXVECTOR3 *pV1, CONST D3DXVECTOR3 *pV2 )
01800 {
01801 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01802 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01803         <span class="keywordflow">return</span> NULL;
01804 <span class="preprocessor">#endif</span>
01805 <span class="preprocessor"></span>
01806     pOut-&gt;x = pV1-&gt;x &gt; pV2-&gt;x ? pV1-&gt;x : pV2-&gt;x;
01807     pOut-&gt;y = pV1-&gt;y &gt; pV2-&gt;y ? pV1-&gt;y : pV2-&gt;y;
01808     pOut-&gt;z = pV1-&gt;z &gt; pV2-&gt;z ? pV1-&gt;z : pV2-&gt;z;
01809     <span class="keywordflow">return</span> pOut;
01810 }
01811 
01812 D3DXINLINE D3DXVECTOR3* D3DXVec3Scale
01813     ( D3DXVECTOR3 *pOut, CONST D3DXVECTOR3 *pV, FLOAT s)
01814 {
01815 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01816 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV)
01817         <span class="keywordflow">return</span> NULL;
01818 <span class="preprocessor">#endif</span>
01819 <span class="preprocessor"></span>
01820     pOut-&gt;x = pV-&gt;x * s;
01821     pOut-&gt;y = pV-&gt;y * s;
01822     pOut-&gt;z = pV-&gt;z * s;
01823     <span class="keywordflow">return</span> pOut;
01824 }
01825 
01826 D3DXINLINE D3DXVECTOR3* D3DXVec3Lerp
01827     ( D3DXVECTOR3 *pOut, CONST D3DXVECTOR3 *pV1, CONST D3DXVECTOR3 *pV2,
01828       FLOAT s )
01829 {
01830 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01831 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01832         <span class="keywordflow">return</span> NULL;
01833 <span class="preprocessor">#endif</span>
01834 <span class="preprocessor"></span>
01835     pOut-&gt;x = pV1-&gt;x + s * (pV2-&gt;x - pV1-&gt;x);
01836     pOut-&gt;y = pV1-&gt;y + s * (pV2-&gt;y - pV1-&gt;y);
01837     pOut-&gt;z = pV1-&gt;z + s * (pV2-&gt;z - pV1-&gt;z);
01838     <span class="keywordflow">return</span> pOut;
01839 }
01840 
01841 
01842 <span class="comment">//--------------------------</span>
01843 <span class="comment">// 4D Vector</span>
01844 <span class="comment">//--------------------------</span>
01845 
01846 D3DXINLINE FLOAT D3DXVec4Length
01847     ( CONST D3DXVECTOR4 *pV )
01848 {
01849 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01850 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pV)
01851         <span class="keywordflow">return</span> 0.0f;
01852 <span class="preprocessor">#endif</span>
01853 <span class="preprocessor"></span>
01854 <span class="preprocessor">#ifdef __cplusplus</span>
01855 <span class="preprocessor"></span>    <span class="keywordflow">return</span> sqrtf(pV-&gt;x * pV-&gt;x + pV-&gt;y * pV-&gt;y + pV-&gt;z * pV-&gt;z + pV-&gt;w * pV-&gt;w);
01856 <span class="preprocessor">#else</span>
01857 <span class="preprocessor"></span>    <span class="keywordflow">return</span> (FLOAT) sqrt(pV-&gt;x * pV-&gt;x + pV-&gt;y * pV-&gt;y + pV-&gt;z * pV-&gt;z + pV-&gt;w * pV-&gt;w);
01858 <span class="preprocessor">#endif</span>
01859 <span class="preprocessor"></span>}
01860 
01861 D3DXINLINE FLOAT D3DXVec4LengthSq
01862     ( CONST D3DXVECTOR4 *pV )
01863 {
01864 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01865 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pV)
01866         <span class="keywordflow">return</span> 0.0f;
01867 <span class="preprocessor">#endif</span>
01868 <span class="preprocessor"></span>
01869     <span class="keywordflow">return</span> pV-&gt;x * pV-&gt;x + pV-&gt;y * pV-&gt;y + pV-&gt;z * pV-&gt;z + pV-&gt;w * pV-&gt;w;
01870 }
01871 
01872 D3DXINLINE FLOAT D3DXVec4Dot
01873     ( CONST D3DXVECTOR4 *pV1, CONST D3DXVECTOR4 *pV2 )
01874 {
01875 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01876 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pV1 || !pV2)
01877         <span class="keywordflow">return</span> 0.0f;
01878 <span class="preprocessor">#endif</span>
01879 <span class="preprocessor"></span>
01880     <span class="keywordflow">return</span> pV1-&gt;x * pV2-&gt;x + pV1-&gt;y * pV2-&gt;y + pV1-&gt;z * pV2-&gt;z + pV1-&gt;w * pV2-&gt;w;
01881 }
01882 
01883 D3DXINLINE D3DXVECTOR4* D3DXVec4Add
01884     ( D3DXVECTOR4 *pOut, CONST D3DXVECTOR4 *pV1, CONST D3DXVECTOR4 *pV2)
01885 {
01886 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01887 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01888         <span class="keywordflow">return</span> NULL;
01889 <span class="preprocessor">#endif</span>
01890 <span class="preprocessor"></span>
01891     pOut-&gt;x = pV1-&gt;x + pV2-&gt;x;
01892     pOut-&gt;y = pV1-&gt;y + pV2-&gt;y;
01893     pOut-&gt;z = pV1-&gt;z + pV2-&gt;z;
01894     pOut-&gt;w = pV1-&gt;w + pV2-&gt;w;
01895     <span class="keywordflow">return</span> pOut;
01896 }
01897 
01898 D3DXINLINE D3DXVECTOR4* D3DXVec4Subtract
01899     ( D3DXVECTOR4 *pOut, CONST D3DXVECTOR4 *pV1, CONST D3DXVECTOR4 *pV2)
01900 {
01901 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01902 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01903         <span class="keywordflow">return</span> NULL;
01904 <span class="preprocessor">#endif</span>
01905 <span class="preprocessor"></span>
01906     pOut-&gt;x = pV1-&gt;x - pV2-&gt;x;
01907     pOut-&gt;y = pV1-&gt;y - pV2-&gt;y;
01908     pOut-&gt;z = pV1-&gt;z - pV2-&gt;z;
01909     pOut-&gt;w = pV1-&gt;w - pV2-&gt;w;
01910     <span class="keywordflow">return</span> pOut;
01911 }
01912 
01913 D3DXINLINE D3DXVECTOR4* D3DXVec4Minimize
01914     ( D3DXVECTOR4 *pOut, CONST D3DXVECTOR4 *pV1, CONST D3DXVECTOR4 *pV2)
01915 {
01916 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01917 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01918         <span class="keywordflow">return</span> NULL;
01919 <span class="preprocessor">#endif</span>
01920 <span class="preprocessor"></span>
01921     pOut-&gt;x = pV1-&gt;x &lt; pV2-&gt;x ? pV1-&gt;x : pV2-&gt;x;
01922     pOut-&gt;y = pV1-&gt;y &lt; pV2-&gt;y ? pV1-&gt;y : pV2-&gt;y;
01923     pOut-&gt;z = pV1-&gt;z &lt; pV2-&gt;z ? pV1-&gt;z : pV2-&gt;z;
01924     pOut-&gt;w = pV1-&gt;w &lt; pV2-&gt;w ? pV1-&gt;w : pV2-&gt;w;
01925     <span class="keywordflow">return</span> pOut;
01926 }
01927 
01928 D3DXINLINE D3DXVECTOR4* D3DXVec4Maximize
01929     ( D3DXVECTOR4 *pOut, CONST D3DXVECTOR4 *pV1, CONST D3DXVECTOR4 *pV2)
01930 {
01931 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01932 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01933         <span class="keywordflow">return</span> NULL;
01934 <span class="preprocessor">#endif</span>
01935 <span class="preprocessor"></span>
01936     pOut-&gt;x = pV1-&gt;x &gt; pV2-&gt;x ? pV1-&gt;x : pV2-&gt;x;
01937     pOut-&gt;y = pV1-&gt;y &gt; pV2-&gt;y ? pV1-&gt;y : pV2-&gt;y;
01938     pOut-&gt;z = pV1-&gt;z &gt; pV2-&gt;z ? pV1-&gt;z : pV2-&gt;z;
01939     pOut-&gt;w = pV1-&gt;w &gt; pV2-&gt;w ? pV1-&gt;w : pV2-&gt;w;
01940     <span class="keywordflow">return</span> pOut;
01941 }
01942 
01943 D3DXINLINE D3DXVECTOR4* D3DXVec4Scale
01944     ( D3DXVECTOR4 *pOut, CONST D3DXVECTOR4 *pV, FLOAT s)
01945 {
01946 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01947 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV)
01948         <span class="keywordflow">return</span> NULL;
01949 <span class="preprocessor">#endif</span>
01950 <span class="preprocessor"></span>
01951     pOut-&gt;x = pV-&gt;x * s;
01952     pOut-&gt;y = pV-&gt;y * s;
01953     pOut-&gt;z = pV-&gt;z * s;
01954     pOut-&gt;w = pV-&gt;w * s;
01955     <span class="keywordflow">return</span> pOut;
01956 }
01957 
01958 D3DXINLINE D3DXVECTOR4* D3DXVec4Lerp
01959     ( D3DXVECTOR4 *pOut, CONST D3DXVECTOR4 *pV1, CONST D3DXVECTOR4 *pV2,
01960       FLOAT s )
01961 {
01962 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01963 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pV1 || !pV2)
01964         <span class="keywordflow">return</span> NULL;
01965 <span class="preprocessor">#endif</span>
01966 <span class="preprocessor"></span>
01967     pOut-&gt;x = pV1-&gt;x + s * (pV2-&gt;x - pV1-&gt;x);
01968     pOut-&gt;y = pV1-&gt;y + s * (pV2-&gt;y - pV1-&gt;y);
01969     pOut-&gt;z = pV1-&gt;z + s * (pV2-&gt;z - pV1-&gt;z);
01970     pOut-&gt;w = pV1-&gt;w + s * (pV2-&gt;w - pV1-&gt;w);
01971     <span class="keywordflow">return</span> pOut;
01972 }
01973 
01974 
01975 <span class="comment">//--------------------------</span>
01976 <span class="comment">// 4D Matrix</span>
01977 <span class="comment">//--------------------------</span>
01978 
01979 D3DXINLINE D3DXMATRIX* D3DXMatrixIdentity
01980     ( D3DXMATRIX *pOut )
01981 {
01982 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
01983 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut)
01984         <span class="keywordflow">return</span> NULL;
01985 <span class="preprocessor">#endif</span>
01986 <span class="preprocessor"></span>
01987     pOut-&gt;m[0][1] = pOut-&gt;m[0][2] = pOut-&gt;m[0][3] =
01988     pOut-&gt;m[1][0] = pOut-&gt;m[1][2] = pOut-&gt;m[1][3] =
01989     pOut-&gt;m[2][0] = pOut-&gt;m[2][1] = pOut-&gt;m[2][3] =
01990     pOut-&gt;m[3][0] = pOut-&gt;m[3][1] = pOut-&gt;m[3][2] = 0.0f;
01991 
01992     pOut-&gt;m[0][0] = pOut-&gt;m[1][1] = pOut-&gt;m[2][2] = pOut-&gt;m[3][3] = 1.0f;
01993     <span class="keywordflow">return</span> pOut;
01994 }
01995 
01996 
01997 D3DXINLINE BOOL D3DXMatrixIsIdentity
01998     ( CONST D3DXMATRIX *pM )
01999 {
02000 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02001 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pM)
02002         <span class="keywordflow">return</span> FALSE;
02003 <span class="preprocessor">#endif</span>
02004 <span class="preprocessor"></span>
02005     <span class="keywordflow">return</span> pM-&gt;m[0][0] == 1.0f &amp;&amp; pM-&gt;m[0][1] == 0.0f &amp;&amp; pM-&gt;m[0][2] == 0.0f &amp;&amp; pM-&gt;m[0][3] == 0.0f &amp;&amp;
02006            pM-&gt;m[1][0] == 0.0f &amp;&amp; pM-&gt;m[1][1] == 1.0f &amp;&amp; pM-&gt;m[1][2] == 0.0f &amp;&amp; pM-&gt;m[1][3] == 0.0f &amp;&amp;
02007            pM-&gt;m[2][0] == 0.0f &amp;&amp; pM-&gt;m[2][1] == 0.0f &amp;&amp; pM-&gt;m[2][2] == 1.0f &amp;&amp; pM-&gt;m[2][3] == 0.0f &amp;&amp;
02008            pM-&gt;m[3][0] == 0.0f &amp;&amp; pM-&gt;m[3][1] == 0.0f &amp;&amp; pM-&gt;m[3][2] == 0.0f &amp;&amp; pM-&gt;m[3][3] == 1.0f;
02009 }
02010 
02011 
02012 <span class="comment">//--------------------------</span>
02013 <span class="comment">// Quaternion</span>
02014 <span class="comment">//--------------------------</span>
02015 
02016 D3DXINLINE FLOAT D3DXQuaternionLength
02017     ( CONST D3DXQUATERNION *pQ )
02018 {
02019 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02020 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pQ)
02021         <span class="keywordflow">return</span> 0.0f;
02022 <span class="preprocessor">#endif</span>
02023 <span class="preprocessor"></span>
02024 <span class="preprocessor">#ifdef __cplusplus</span>
02025 <span class="preprocessor"></span>    <span class="keywordflow">return</span> sqrtf(pQ-&gt;x * pQ-&gt;x + pQ-&gt;y * pQ-&gt;y + pQ-&gt;z * pQ-&gt;z + pQ-&gt;w * pQ-&gt;w);
02026 <span class="preprocessor">#else</span>
02027 <span class="preprocessor"></span>    <span class="keywordflow">return</span> (FLOAT) sqrt(pQ-&gt;x * pQ-&gt;x + pQ-&gt;y * pQ-&gt;y + pQ-&gt;z * pQ-&gt;z + pQ-&gt;w * pQ-&gt;w);
02028 <span class="preprocessor">#endif</span>
02029 <span class="preprocessor"></span>}
02030 
02031 D3DXINLINE FLOAT D3DXQuaternionLengthSq
02032     ( CONST D3DXQUATERNION *pQ )
02033 {
02034 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02035 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pQ)
02036         <span class="keywordflow">return</span> 0.0f;
02037 <span class="preprocessor">#endif</span>
02038 <span class="preprocessor"></span>
02039     <span class="keywordflow">return</span> pQ-&gt;x * pQ-&gt;x + pQ-&gt;y * pQ-&gt;y + pQ-&gt;z * pQ-&gt;z + pQ-&gt;w * pQ-&gt;w;
02040 }
02041 
02042 D3DXINLINE FLOAT D3DXQuaternionDot
02043     ( CONST D3DXQUATERNION *pQ1, CONST D3DXQUATERNION *pQ2 )
02044 {
02045 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02046 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pQ1 || !pQ2)
02047         <span class="keywordflow">return</span> 0.0f;
02048 <span class="preprocessor">#endif</span>
02049 <span class="preprocessor"></span>
02050     <span class="keywordflow">return</span> pQ1-&gt;x * pQ2-&gt;x + pQ1-&gt;y * pQ2-&gt;y + pQ1-&gt;z * pQ2-&gt;z + pQ1-&gt;w * pQ2-&gt;w;
02051 }
02052 
02053 
02054 D3DXINLINE D3DXQUATERNION* D3DXQuaternionIdentity
02055     ( D3DXQUATERNION *pOut )
02056 {
02057 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02058 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut)
02059         <span class="keywordflow">return</span> NULL;
02060 <span class="preprocessor">#endif</span>
02061 <span class="preprocessor"></span>
02062     pOut-&gt;x = pOut-&gt;y = pOut-&gt;z = 0.0f;
02063     pOut-&gt;w = 1.0f;
02064     <span class="keywordflow">return</span> pOut;
02065 }
02066 
02067 D3DXINLINE BOOL D3DXQuaternionIsIdentity
02068     ( CONST D3DXQUATERNION *pQ )
02069 {
02070 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02071 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pQ)
02072         <span class="keywordflow">return</span> FALSE;
02073 <span class="preprocessor">#endif</span>
02074 <span class="preprocessor"></span>
02075     <span class="keywordflow">return</span> pQ-&gt;x == 0.0f &amp;&amp; pQ-&gt;y == 0.0f &amp;&amp; pQ-&gt;z == 0.0f &amp;&amp; pQ-&gt;w == 1.0f;
02076 }
02077 
02078 
02079 D3DXINLINE D3DXQUATERNION* D3DXQuaternionConjugate
02080     ( D3DXQUATERNION *pOut, CONST D3DXQUATERNION *pQ )
02081 {
02082 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02083 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pQ)
02084         <span class="keywordflow">return</span> NULL;
02085 <span class="preprocessor">#endif</span>
02086 <span class="preprocessor"></span>
02087     pOut-&gt;x = -pQ-&gt;x;
02088     pOut-&gt;y = -pQ-&gt;y;
02089     pOut-&gt;z = -pQ-&gt;z;
02090     pOut-&gt;w =  pQ-&gt;w;
02091     <span class="keywordflow">return</span> pOut;
02092 }
02093 
02094 
02095 <span class="comment">//--------------------------</span>
02096 <span class="comment">// Plane</span>
02097 <span class="comment">//--------------------------</span>
02098 
02099 D3DXINLINE FLOAT D3DXPlaneDot
02100     ( CONST D3DXPLANE *pP, CONST D3DXVECTOR4 *pV)
02101 {
02102 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02103 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pP || !pV)
02104         <span class="keywordflow">return</span> 0.0f;
02105 <span class="preprocessor">#endif</span>
02106 <span class="preprocessor"></span>
02107     <span class="keywordflow">return</span> pP-&gt;a * pV-&gt;x + pP-&gt;b * pV-&gt;y + pP-&gt;c * pV-&gt;z + pP-&gt;d * pV-&gt;w;
02108 }
02109 
02110 D3DXINLINE FLOAT D3DXPlaneDotCoord
02111     ( CONST D3DXPLANE *pP, CONST D3DXVECTOR3 *pV)
02112 {
02113 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02114 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pP || !pV)
02115         <span class="keywordflow">return</span> 0.0f;
02116 <span class="preprocessor">#endif</span>
02117 <span class="preprocessor"></span>
02118     <span class="keywordflow">return</span> pP-&gt;a * pV-&gt;x + pP-&gt;b * pV-&gt;y + pP-&gt;c * pV-&gt;z + pP-&gt;d;
02119 }
02120 
02121 D3DXINLINE FLOAT D3DXPlaneDotNormal
02122     ( CONST D3DXPLANE *pP, CONST D3DXVECTOR3 *pV)
02123 {
02124 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02125 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pP || !pV)
02126         <span class="keywordflow">return</span> 0.0f;
02127 <span class="preprocessor">#endif</span>
02128 <span class="preprocessor"></span>
02129     <span class="keywordflow">return</span> pP-&gt;a * pV-&gt;x + pP-&gt;b * pV-&gt;y + pP-&gt;c * pV-&gt;z;
02130 }
02131 
02132 D3DXINLINE D3DXPLANE* D3DXPlaneScale
02133     (D3DXPLANE *pOut, CONST D3DXPLANE *pP, FLOAT s)
02134 {
02135 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02136 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pP)
02137         <span class="keywordflow">return</span> NULL;
02138 <span class="preprocessor">#endif</span>
02139 <span class="preprocessor"></span>
02140     pOut-&gt;a = pP-&gt;a * s;
02141     pOut-&gt;b = pP-&gt;b * s;
02142     pOut-&gt;c = pP-&gt;c * s;
02143     pOut-&gt;d = pP-&gt;d * s;
02144     <span class="keywordflow">return</span> pOut;
02145 }
02146 
02147 
02148 <span class="comment">//--------------------------</span>
02149 <span class="comment">// Color</span>
02150 <span class="comment">//--------------------------</span>
02151 
02152 D3DXINLINE D3DXCOLOR* D3DXColorNegative
02153     (D3DXCOLOR *pOut, CONST D3DXCOLOR *pC)
02154 {
02155 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02156 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pC)
02157         <span class="keywordflow">return</span> NULL;
02158 <span class="preprocessor">#endif</span>
02159 <span class="preprocessor"></span>
02160     pOut-&gt;r = 1.0f - pC-&gt;r;
02161     pOut-&gt;g = 1.0f - pC-&gt;g;
02162     pOut-&gt;b = 1.0f - pC-&gt;b;
02163     pOut-&gt;a = pC-&gt;a;
02164     <span class="keywordflow">return</span> pOut;
02165 }
02166 
02167 D3DXINLINE D3DXCOLOR* D3DXColorAdd
02168     (D3DXCOLOR *pOut, CONST D3DXCOLOR *pC1, CONST D3DXCOLOR *pC2)
02169 {
02170 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02171 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pC1 || !pC2)
02172         <span class="keywordflow">return</span> NULL;
02173 <span class="preprocessor">#endif</span>
02174 <span class="preprocessor"></span>
02175     pOut-&gt;r = pC1-&gt;r + pC2-&gt;r;
02176     pOut-&gt;g = pC1-&gt;g + pC2-&gt;g;
02177     pOut-&gt;b = pC1-&gt;b + pC2-&gt;b;
02178     pOut-&gt;a = pC1-&gt;a + pC2-&gt;a;
02179     <span class="keywordflow">return</span> pOut;
02180 }
02181 
02182 D3DXINLINE D3DXCOLOR* D3DXColorSubtract
02183     (D3DXCOLOR *pOut, CONST D3DXCOLOR *pC1, CONST D3DXCOLOR *pC2)
02184 {
02185 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02186 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pC1 || !pC2)
02187         <span class="keywordflow">return</span> NULL;
02188 <span class="preprocessor">#endif</span>
02189 <span class="preprocessor"></span>
02190     pOut-&gt;r = pC1-&gt;r - pC2-&gt;r;
02191     pOut-&gt;g = pC1-&gt;g - pC2-&gt;g;
02192     pOut-&gt;b = pC1-&gt;b - pC2-&gt;b;
02193     pOut-&gt;a = pC1-&gt;a - pC2-&gt;a;
02194     <span class="keywordflow">return</span> pOut;
02195 }
02196 
02197 D3DXINLINE D3DXCOLOR* D3DXColorScale
02198     (D3DXCOLOR *pOut, CONST D3DXCOLOR *pC, FLOAT s)
02199 {
02200 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02201 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pC)
02202         <span class="keywordflow">return</span> NULL;
02203 <span class="preprocessor">#endif</span>
02204 <span class="preprocessor"></span>
02205     pOut-&gt;r = pC-&gt;r * s;
02206     pOut-&gt;g = pC-&gt;g * s;
02207     pOut-&gt;b = pC-&gt;b * s;
02208     pOut-&gt;a = pC-&gt;a * s;
02209     <span class="keywordflow">return</span> pOut;
02210 }
02211 
02212 D3DXINLINE D3DXCOLOR* D3DXColorModulate
02213     (D3DXCOLOR *pOut, CONST D3DXCOLOR *pC1, CONST D3DXCOLOR *pC2)
02214 {
02215 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02216 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pC1 || !pC2)
02217         <span class="keywordflow">return</span> NULL;
02218 <span class="preprocessor">#endif</span>
02219 <span class="preprocessor"></span>
02220     pOut-&gt;r = pC1-&gt;r * pC2-&gt;r;
02221     pOut-&gt;g = pC1-&gt;g * pC2-&gt;g;
02222     pOut-&gt;b = pC1-&gt;b * pC2-&gt;b;
02223     pOut-&gt;a = pC1-&gt;a * pC2-&gt;a;
02224     <span class="keywordflow">return</span> pOut;
02225 }
02226 
02227 D3DXINLINE D3DXCOLOR* D3DXColorLerp
02228     (D3DXCOLOR *pOut, CONST D3DXCOLOR *pC1, CONST D3DXCOLOR *pC2, FLOAT s)
02229 {
02230 <span class="preprocessor">#ifdef D3DX_DEBUG</span>
02231 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(!pOut || !pC1 || !pC2)
02232         <span class="keywordflow">return</span> NULL;
02233 <span class="preprocessor">#endif</span>
02234 <span class="preprocessor"></span>
02235     pOut-&gt;r = pC1-&gt;r + s * (pC2-&gt;r - pC1-&gt;r);
02236     pOut-&gt;g = pC1-&gt;g + s * (pC2-&gt;g - pC1-&gt;g);
02237     pOut-&gt;b = pC1-&gt;b + s * (pC2-&gt;b - pC1-&gt;b);
02238     pOut-&gt;a = pC1-&gt;a + s * (pC2-&gt;a - pC1-&gt;a);
02239     <span class="keywordflow">return</span> pOut;
02240 }
02241 
02242 
02243 <span class="preprocessor">#endif // __D3DX9MATH_INL__</span>
02244 <span class="preprocessor"></span>
</pre></div><hr><address style="align: right;"><small>
Generated on Tue Jun 13 11:14:34 2006 for gRenderDX9 by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
