<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gRenderDX9: d3dIndexBuffer.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>d3dIndexBuffer.h</h1><div class="fragment"><pre>00001 <span class="comment">/*****************************************************************************/</span>
00002 <span class="comment">/*  File:   d3dIndexBuffer.h</span>
00003 <span class="comment">/*  Desc:   IndexBuffer interface implementation for DirectX9 </span>
00004 <span class="comment">/*  Author: Ruslan Shestopalyuk</span>
00005 <span class="comment">/*  Date:   02.11.2004</span>
00006 <span class="comment">/*****************************************************************************/</span>
00007 <span class="preprocessor">#ifndef __D3DINDEXBUFFER_H__</span>
00008 <span class="preprocessor"></span><span class="preprocessor">#define __D3DINDEXBUFFER_H__</span>
00009 <span class="preprocessor"></span><span class="preprocessor">#include "IIndexBuffer.h"</span>
00010 
00011 <span class="comment">/*****************************************************************************/</span>
00012 <span class="comment">/*  Class:  IndexBufferDX9</span>
00013 <span class="comment">/*  Desc:   Direct3D9 Index buffer implementation</span>
00014 <span class="comment">/*****************************************************************************/</span>
00015 <span class="keyword">class </span>IndexBufferDX9 : <span class="keyword">public</span> IIndexBuffer
00016 {
00017     std::string                 m_Name;             <span class="comment">//  index buffer name</span>
00018     <span class="keywordtype">bool</span>                        m_bDynamic;         <span class="comment">//  when true, ib is dynamic, else it is static</span>
00019     <span class="keywordtype">int</span>                         m_SizeBytes;        <span class="comment">//  size of vertex data, in bytes  </span>
00020     <span class="keywordtype">int</span>                         m_NIndices;         <span class="comment">//  number of vertices in the buffer</span>
00021     <span class="keywordtype">bool</span>                        m_bLocked;          <span class="comment">//  whether buffer is locked</span>
00022     <span class="keywordtype">int</span>                         m_NFilledIdx;       <span class="comment">//  first index which was not filled</span>
00023     <span class="keywordtype">int</span>                         m_IdxStride;        <span class="comment">//  index stride, in bytes</span>
00024     IndexSize                   m_IndexSize;        <span class="comment">//  index size type</span>
00025 
00026     IDirect3DIndexBuffer9*      m_pBuffer;          <span class="comment">//  d3d index buffer interface</span>
00027 
00028     <span class="keywordtype">int</span>                         m_FirstValidStamp;  <span class="comment">//  the first valid lock index in the lock sequence</span>
00029     <span class="keywordtype">int</span>                         m_CurrentStamp;     <span class="comment">//  current number of locks</span>
00030 
00031 <span class="keyword">public</span>:
00032                         IndexBufferDX9          ( <span class="keyword">const</span> <span class="keywordtype">char</span>* name );
00033     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>        Create                  ( <span class="keywordtype">int</span> nBytes, <span class="keywordtype">bool</span> bDynamic = <span class="keyword">true</span>, IndexSize = isWORD ); 
00034     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>        Bind                    ();
00035 
00036     <span class="keyword">virtual</span> <span class="keywordtype">int</span>         GetSizeBytes            ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_SizeBytes; }
00037     <span class="keyword">virtual</span> IndexSize   GetIndexSize            ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_IndexSize; }
00038     <span class="keyword">virtual</span> <span class="keywordtype">int</span>         GetNIndices             ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_NIndices; }
00039     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* GetName                 ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_Name.c_str(); }
00040     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>        IsLocked                ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_bLocked; }
00041     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>        IsDynamic               ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_bDynamic; }
00042 
00043     <span class="keyword">virtual</span> <span class="keywordtype">void</span>        DeleteDeviceObjects     ();
00044     <span class="keyword">virtual</span> <span class="keywordtype">void</span>        InvalidateDeviceObjects ();
00045     <span class="keyword">virtual</span> <span class="keywordtype">void</span>        RestoreDeviceObjects    ();
00046 
00047     <span class="keywordtype">void</span>                CreateQuadBuffer        ();
00048     <span class="keyword">virtual</span> BYTE*       Lock                    ( <span class="keywordtype">int</span> firstIdx, <span class="keywordtype">int</span> numIdx, DWORD&amp; stamp, <span class="keywordtype">bool</span> bDiscard = <span class="keyword">false</span> );
00049     <span class="keyword">virtual</span> BYTE*       LockAppend              ( <span class="keywordtype">int</span> numIdx, <span class="keywordtype">int</span>&amp; offset, DWORD&amp; stamp );
00050     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>        HasAppendSpace           ( <span class="keywordtype">int</span> numIdx );
00051     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>        IsStampValid            ( DWORD stamp ) { <span class="keywordflow">return</span> stamp &gt;= m_FirstValidStamp; }
00052     <span class="keywordtype">void</span>                Unlock                  ();
00053     <span class="keyword">virtual</span> <span class="keywordtype">void</span>        Purge                   ();
00054 
00055 }; <span class="comment">// class IndexBufferDX9</span>
00056 
00057 <span class="preprocessor">#endif // __D3DINDEXBUFFER_H__</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Tue Jun 13 11:14:33 2006 for gRenderDX9 by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
