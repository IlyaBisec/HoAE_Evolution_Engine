<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gRenderDX9: d3dEnumeration.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>d3dEnumeration.h</h1><div class="fragment"><pre>00001 <span class="comment">//-----------------------------------------------------------------------------</span>
00002 <span class="comment">// File: D3DEnumeration.h</span>
00003 <span class="comment">// Desc: Enumerates D3D adapters, devices, modes, etc.</span>
00004 <span class="comment">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
00005 <span class="comment">//-----------------------------------------------------------------------------</span>
00006 <span class="preprocessor">#ifndef __D3DENUM_H__</span>
00007 <span class="preprocessor"></span><span class="preprocessor">#define __D3DENUM_H__</span>
00008 <span class="preprocessor"></span>
00009 <span class="preprocessor">#include &lt;vector&gt;</span>
00010 
00011 <span class="comment">//-----------------------------------------------------------------------------</span>
00012 <span class="comment">// Enum: VertexProcessingType</span>
00013 <span class="comment">// Desc: Enumeration of all possible D3D vertex processing types.</span>
00014 <span class="comment">//-----------------------------------------------------------------------------</span>
00015 <span class="keyword">enum</span> VertexProcessingType
00016 {
00017     vpSoftware      = 0,
00018     vpMixed         = 1,
00019     vpHardware      = 2,
00020     vpPureHardware  = 3,
00021 }; <span class="comment">// enum VertexProcessingType</span>
00022 
00023 
00024 <span class="comment">//-----------------------------------------------------------------------------</span>
00025 <span class="comment">// Name: struct D3DDSMSConflict</span>
00026 <span class="comment">// Desc: A depth/stencil buffer format that is incompatible with a</span>
00027 <span class="comment">//       multisample type.</span>
00028 <span class="comment">//-----------------------------------------------------------------------------</span>
00029 <span class="keyword">struct </span>D3DDSMSConflict
00030 {
00031     D3DFORMAT                       m_DSFormat;
00032     D3DMULTISAMPLE_TYPE             m_MSType;
00033 }; <span class="comment">// struct D3DDSMSConflict</span>
00034 
00035 <span class="comment">//-----------------------------------------------------------------------------</span>
00036 <span class="comment">// Name: struct D3DDeviceCombo</span>
00037 <span class="comment">// Desc: A combination of adapter format, back buffer format, and windowed/fullscreen </span>
00038 <span class="comment">//       that is compatible with a particular D3D device (and the app).</span>
00039 <span class="comment">//-----------------------------------------------------------------------------</span>
00040 <span class="keyword">struct </span>D3DDeviceCombo
00041 {
00042     <span class="keywordtype">int</span>                                 m_Ordinal;
00043     D3DDEVTYPE                          m_DevType;
00044     D3DFORMAT                           m_AdapterFormat;
00045     D3DFORMAT                           m_BackBufferFormat;
00046     <span class="keywordtype">bool</span>                                m_bIsWindowed;
00047     std::vector&lt;D3DFORMAT&gt;              m_DepthStencilFormats;
00048     std::vector&lt;D3DMULTISAMPLE_TYPE&gt;    m_MSampleTypes;
00049     std::vector&lt;DWORD&gt;                  m_MSampleQualities; 
00050     std::vector&lt;D3DDSMSConflict&gt;        m_DSMSConflicts;
00051     std::vector&lt;VertexProcessingType&gt;   m_VProcessTypes;
00052     std::vector&lt;DWORD&gt;                  m_PresentIntervals;
00053 }; <span class="comment">// struct D3DDeviceCombo</span>
00054 
00055 <span class="comment">//-----------------------------------------------------------------------------</span>
00056 <span class="comment">// Name: struct D3DDeviceInfo</span>
00057 <span class="comment">// Desc: Info about a D3D device, including a list of D3DDeviceCombos (see below) </span>
00058 <span class="comment">//       that work with the device.</span>
00059 <span class="comment">//-----------------------------------------------------------------------------</span>
00060 <span class="keyword">struct </span>D3DDeviceInfo
00061 {
00062     <span class="keywordtype">int</span>                             m_Ordinal;
00063     D3DDEVTYPE                      m_DevType;
00064     D3DCAPS9                        m_Caps;
00065     std::vector&lt;D3DDeviceCombo&gt;     m_DevCombos; 
00066 }; <span class="comment">// struct D3DDeviceInfo</span>
00067 
00068 <span class="comment">//-----------------------------------------------------------------------------</span>
00069 <span class="comment">// Name: struct D3DAdapterInfo</span>
00070 <span class="comment">// Desc: Info about a display adapter.</span>
00071 <span class="comment">//-----------------------------------------------------------------------------</span>
00072 <span class="keyword">struct </span>D3DAdapterInfo
00073 {
00074     <span class="keywordtype">int</span>                             m_Ordinal;
00075     D3DADAPTER_IDENTIFIER9          m_Identifier;
00076     std::vector&lt;D3DDISPLAYMODE&gt;     m_DisplayModes; 
00077     std::vector&lt;D3DDeviceInfo&gt;      m_DevInfos; 
00078 }; <span class="comment">// struct D3DAdapterInfo</span>
00079 
00080 <span class="keyword">typedef</span> bool (*ConfirmDeviceCallback)(  D3DCAPS9* pCaps, 
00081                                         VertexProcessingType vertexProcessingType, 
00082                                         D3DFORMAT adapterFormat, 
00083                                         D3DFORMAT backBufferFormat );
00084 <span class="comment">//-----------------------------------------------------------------------------</span>
00085 <span class="comment">// Name: class D3DEnumeration</span>
00086 <span class="comment">// Desc: Enumerates available D3D adapters, devices, modes, etc.</span>
00087 <span class="comment">//-----------------------------------------------------------------------------</span>
00088 <span class="keyword">class </span>D3DEnumeration
00089 {
00090 <span class="keyword">private</span>:
00091     IDirect3D9*     m_pD3D;
00092 
00093     HRESULT         EnumerateDevices                ( D3DAdapterInfo* pAdapterInfo, std::vector&lt;D3DFORMAT&gt;&amp; adapterFormatList );
00094     HRESULT         EnumerateDeviceCombos           ( D3DDeviceInfo* pDeviceInfo, std::vector&lt;D3DFORMAT&gt;&amp; adapterFormatList );
00095     <span class="keywordtype">void</span>            BuildDepthStencilFormatList     ( D3DDeviceCombo* pDeviceCombo );
00096     <span class="keywordtype">void</span>            BuildMultiSampleTypeList        ( D3DDeviceCombo* pDeviceCombo );
00097     <span class="keywordtype">void</span>            BuildDSMSConflictList           ( D3DDeviceCombo* pDeviceCombo );
00098     <span class="keywordtype">void</span>            BuildVertexProcessingTypeList   ( D3DDeviceInfo* pDeviceInfo, D3DDeviceCombo* pDeviceCombo );
00099     <span class="keywordtype">void</span>            BuildPresentIntervalList        ( D3DDeviceInfo* pDeviceInfo, D3DDeviceCombo* pDeviceCombo );
00100 
00101 <span class="keyword">public</span>:
00102     std::vector&lt;D3DAdapterInfo&gt; m_AdapterInfoList;
00103 
00104     <span class="comment">// The following variables can be used to limit what modes, formats, </span>
00105     <span class="comment">// etc. are enumerated.  Set them to the values you want before calling</span>
00106     <span class="comment">// Enumerate().</span>
00107     ConfirmDeviceCallback       ConfirmDevice;
00108     UINT                        m_AppMinFullscreenWidth;
00109     UINT                        m_AppMinFullscreenHeight;
00110     UINT                        m_AppMinColorChannelBits;     <span class="comment">// min color bits per channel in adapter format</span>
00111     UINT                        m_AppMinAlphaChannelBits;     <span class="comment">// min alpha bits per pixel in back buffer format</span>
00112     UINT                        m_AppMinDepthBits;
00113     UINT                        m_AppMinStencilBits;
00114     <span class="keywordtype">bool</span>                        m_bUseZBuffer;
00115     <span class="keywordtype">bool</span>                        m_bAppUsesMixedVP;            <span class="comment">// whether app can take advantage of mixed vp mode</span>
00116     <span class="keywordtype">bool</span>                        m_bAppRequiresWindowed;        
00117     <span class="keywordtype">bool</span>                        m_bAppRequiresFullscreen;
00118     std::vector&lt;D3DFORMAT&gt;      m_AllowedFormats;         
00119 
00120                                 D3DEnumeration     ();
00121     <span class="keywordtype">void</span>                        SetD3D             ( IDirect3D9* pD3D ) { m_pD3D = pD3D; }
00122     IDirect3D9*                 GetD3D             () { <span class="keywordflow">if</span> (m_pD3D) m_pD3D-&gt;AddRef(); <span class="keywordflow">return</span> m_pD3D; }
00123     HRESULT                     Enumerate          ();
00124 }; <span class="comment">// class D3DEnumeration</span>
00125 
00126 <span class="preprocessor">#endif // __D3DENUM_H__</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Tue Jun 13 11:14:33 2006 for gRenderDX9 by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
