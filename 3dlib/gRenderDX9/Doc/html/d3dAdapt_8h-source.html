<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gRenderDX9: d3dAdapt.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>d3dAdapt.h</h1><div class="fragment"><pre>00001 <span class="comment">/*****************************************************************************/</span>
00002 <span class="comment">/*  File:   d3dAdapt.h</span>
00003 <span class="comment">/*  Desc:   Utilities form mapping d3d constants/enumerations to/from the engine</span>
00004 <span class="comment">/*  Author: Ruslan Shestopalyuk</span>
00005 <span class="comment">/*  Date:   02.11.2004</span>
00006 <span class="comment">/*****************************************************************************/</span>
00007 <span class="preprocessor">#ifndef __D3DADAPT_H__</span>
00008 <span class="preprocessor"></span><span class="preprocessor">#define __D3DADAPT_H__</span>
00009 <span class="preprocessor"></span><span class="preprocessor">#include "IRenderSystem.h"</span>
00010 <span class="preprocessor">#include "ITexture.h"</span>
00011 <span class="preprocessor">#include "IVertexBuffer.h"</span>
00012 
00013 <span class="keyword">inline</span> D3DFORMAT ConvertDepthStencilFormat( DepthStencilFormat dsFormat )
00014 {
00015     <span class="keywordflow">switch</span> (dsFormat)
00016     {
00017         <span class="keywordflow">case</span> dsfD16Lockable : <span class="keywordflow">return</span> D3DFMT_D16_LOCKABLE;
00018         <span class="keywordflow">case</span> dsfD32         : <span class="keywordflow">return</span> D3DFMT_D32;
00019         <span class="keywordflow">case</span> dsfD15S1       : <span class="keywordflow">return</span> D3DFMT_D15S1;
00020         <span class="keywordflow">case</span> dsfD24S8       : <span class="keywordflow">return</span> D3DFMT_D24S8;
00021         <span class="keywordflow">case</span> dsfD16         : <span class="keywordflow">return</span> D3DFMT_D16;
00022     }
00023     <span class="keywordflow">return</span> D3DFMT_D16;
00024 } <span class="comment">// ConvertDepthStencilFormat</span>
00025 
00026 <span class="keyword">inline</span> DepthStencilFormat ConvertDepthStencilFormat( D3DFORMAT dsFormat )
00027 {
00028     <span class="keywordflow">switch</span> (dsFormat)
00029     {
00030         <span class="keywordflow">case</span> D3DFMT_D16_LOCKABLE    : <span class="keywordflow">return</span> dsfD16Lockable;
00031         <span class="keywordflow">case</span> D3DFMT_D32             : <span class="keywordflow">return</span> dsfD32;
00032         <span class="keywordflow">case</span> D3DFMT_D15S1           : <span class="keywordflow">return</span> dsfD15S1;
00033         <span class="keywordflow">case</span> D3DFMT_D24S8           : <span class="keywordflow">return</span> dsfD24S8;
00034         <span class="keywordflow">case</span> D3DFMT_D16             : <span class="keywordflow">return</span> dsfD16;
00035     }
00036     <span class="keywordflow">return</span> dsfNone;
00037 } <span class="comment">// ConvertDepthStencilFormat</span>
00038 
00039 <span class="keyword">inline</span> D3DFORMAT ConvertColorFormat( ColorFormat clrFormat )
00040 {
00041     D3DFORMAT d3dcf = D3DFMT_A4R4G4B4;
00042     <span class="keywordflow">switch</span> (clrFormat)
00043     {
00044         <span class="keywordflow">case</span> cfARGB4444: d3dcf = D3DFMT_A4R4G4B4;       <span class="keywordflow">break</span>;
00045         <span class="keywordflow">case</span> cfXRGB1555: d3dcf = D3DFMT_X1R5G5B5;       <span class="keywordflow">break</span>;
00046         <span class="keywordflow">case</span> cfARGB8888: d3dcf = D3DFMT_A8R8G8B8;       <span class="keywordflow">break</span>;
00047         <span class="keywordflow">case</span> cfXRGB8888: d3dcf = D3DFMT_X8R8G8B8;       <span class="keywordflow">break</span>;
00048         <span class="keywordflow">case</span> cfRGB888:   d3dcf = D3DFMT_R8G8B8;         <span class="keywordflow">break</span>;
00049         <span class="keywordflow">case</span> cfA8:       d3dcf = D3DFMT_A8;             <span class="keywordflow">break</span>;
00050         <span class="keywordflow">case</span> cfRGB565:   d3dcf = D3DFMT_R5G6B5;         <span class="keywordflow">break</span>;
00051         <span class="keywordflow">case</span> cfV8U8:     d3dcf = D3DFMT_V8U8;           <span class="keywordflow">break</span>;
00052         <span class="keywordflow">case</span> cfR16F:     d3dcf = D3DFMT_R16F;           <span class="keywordflow">break</span>;     
00053         <span class="keywordflow">case</span> cfGR16F:    d3dcf = D3DFMT_G16R16F;        <span class="keywordflow">break</span>;     
00054         <span class="keywordflow">case</span> cfABGR16F:  d3dcf = D3DFMT_A16B16G16R16F;  <span class="keywordflow">break</span>;     
00055         <span class="keywordflow">case</span> cfR32F:     d3dcf = D3DFMT_R32F;           <span class="keywordflow">break</span>;     
00056         <span class="keywordflow">case</span> cfGR32F:    d3dcf = D3DFMT_G32R32F;        <span class="keywordflow">break</span>;     
00057         <span class="keywordflow">case</span> cfABGR32F:  d3dcf = D3DFMT_A32B32G32R32F;  <span class="keywordflow">break</span>;  
00058         <span class="keywordflow">case</span> cfDXT1:     d3dcf = D3DFMT_DXT1;           <span class="keywordflow">break</span>;  
00059         <span class="keywordflow">case</span> cfDXT2:     d3dcf = D3DFMT_DXT2;           <span class="keywordflow">break</span>;
00060         <span class="keywordflow">case</span> cfDXT3:     d3dcf = D3DFMT_DXT3;           <span class="keywordflow">break</span>;
00061         <span class="keywordflow">case</span> cfDXT4:     d3dcf = D3DFMT_DXT4;           <span class="keywordflow">break</span>;
00062         <span class="keywordflow">case</span> cfDXT5:     d3dcf = D3DFMT_DXT5;           <span class="keywordflow">break</span>;
00063         <span class="keywordflow">case</span> cfUnknown:  d3dcf = D3DFMT_UNKNOWN;        <span class="keywordflow">break</span>;
00064     }
00065     <span class="keywordflow">return</span> d3dcf;
00066 } <span class="comment">// ConvertColorFormat</span>
00067 
00068 <span class="keyword">inline</span> ColorFormat ConvertColorFormat( D3DFORMAT colFmt )
00069 {
00070     ColorFormat res = cfARGB4444;
00071     <span class="keywordflow">switch</span> (colFmt)
00072     {
00073     <span class="keywordflow">case</span> D3DFMT_A4R4G4B4:       res = cfARGB4444;   <span class="keywordflow">break</span>;
00074     <span class="keywordflow">case</span> D3DFMT_X1R5G5B5:       res = cfXRGB1555;   <span class="keywordflow">break</span>;
00075     <span class="keywordflow">case</span> D3DFMT_A8R8G8B8:       res = cfARGB8888;   <span class="keywordflow">break</span>;
00076     <span class="keywordflow">case</span> D3DFMT_X8R8G8B8:       res = cfXRGB8888;   <span class="keywordflow">break</span>;
00077     <span class="keywordflow">case</span> D3DFMT_R5G6B5:         res = cfRGB565;     <span class="keywordflow">break</span>;
00078     <span class="keywordflow">case</span> D3DFMT_V8U8:           res = cfV8U8;       <span class="keywordflow">break</span>;
00079     <span class="keywordflow">case</span> D3DFMT_R8G8B8:         res = cfRGB888;     <span class="keywordflow">break</span>;
00080     <span class="keywordflow">case</span> D3DFMT_A8:             res = cfA8;         <span class="keywordflow">break</span>;
00081     <span class="keywordflow">case</span> D3DFMT_R16F:           res = cfR16F;       <span class="keywordflow">break</span>;     
00082     <span class="keywordflow">case</span> D3DFMT_G16R16F:        res = cfGR16F;      <span class="keywordflow">break</span>;     
00083     <span class="keywordflow">case</span> D3DFMT_A16B16G16R16F:  res = cfABGR16F;    <span class="keywordflow">break</span>;     
00084     <span class="keywordflow">case</span> D3DFMT_R32F:           res = cfR32F;       <span class="keywordflow">break</span>;     
00085     <span class="keywordflow">case</span> D3DFMT_G32R32F:        res = cfGR32F;      <span class="keywordflow">break</span>;     
00086     <span class="keywordflow">case</span> D3DFMT_A32B32G32R32F:  res = cfABGR32F;    <span class="keywordflow">break</span>;
00087     <span class="keywordflow">case</span> D3DFMT_DXT1:           res = cfDXT1;       <span class="keywordflow">break</span>;
00088     <span class="keywordflow">case</span> D3DFMT_DXT2:           res = cfDXT2;       <span class="keywordflow">break</span>;
00089     <span class="keywordflow">case</span> D3DFMT_DXT3:           res = cfDXT3;       <span class="keywordflow">break</span>;
00090     <span class="keywordflow">case</span> D3DFMT_DXT4:           res = cfDXT4;       <span class="keywordflow">break</span>;
00091     <span class="keywordflow">case</span> D3DFMT_DXT5:           res = cfDXT5;       <span class="keywordflow">break</span>;
00092     <span class="keywordflow">case</span> D3DFMT_UNKNOWN:        res = cfUnknown;    <span class="keywordflow">break</span>;
00093     };
00094     <span class="keywordflow">return</span> res;
00095 } <span class="comment">// ConvertColorFormat</span>
00096 
00097 <span class="keyword">inline</span> D3DPOOL ConvertMemoryPool( TextureMemoryPool memPool )
00098 {
00099     D3DPOOL pool = D3DPOOL_MANAGED;
00100     <span class="keywordflow">switch</span> (memPool)
00101     {
00102     <span class="keywordflow">case</span> tmpDefault:    pool = D3DPOOL_DEFAULT;     <span class="keywordflow">break</span>;
00103     <span class="keywordflow">case</span> tmpSystem:     pool = D3DPOOL_SYSTEMMEM;   <span class="keywordflow">break</span>;
00104     <span class="keywordflow">case</span> tmpManaged:    pool = D3DPOOL_MANAGED;     <span class="keywordflow">break</span>;
00105     };
00106     <span class="keywordflow">return</span> pool;
00107 } <span class="comment">// ConvertMemoryPool</span>
00108 
00109 <span class="keyword">inline</span> TextureMemoryPool ConvertMemoryPool( D3DPOOL memPool )
00110 {
00111     TextureMemoryPool pool = tmpManaged;
00112     <span class="keywordflow">switch</span> (memPool)
00113     {
00114         <span class="keywordflow">case</span> D3DPOOL_DEFAULT:    pool = tmpDefault;  <span class="keywordflow">break</span>;
00115         <span class="keywordflow">case</span> D3DPOOL_SYSTEMMEM:  pool = tmpSystem;   <span class="keywordflow">break</span>;
00116         <span class="keywordflow">case</span> D3DPOOL_MANAGED:    pool = tmpManaged;  <span class="keywordflow">break</span>;
00117     };
00118     <span class="keywordflow">return</span> pool;
00119 } <span class="comment">// ConvertMemoryPool</span>
00120 
00121 <span class="keyword">inline</span> D3DDECLTYPE ConvertVElemType( VertCompType type )
00122 {
00123     D3DDECLTYPE res = D3DDECLTYPE_UNUSED;
00124     <span class="keywordflow">switch</span> (type)
00125     {
00126         <span class="keywordflow">case</span> ctFloat1: res = D3DDECLTYPE_FLOAT1;    <span class="keywordflow">break</span>;
00127         <span class="keywordflow">case</span> ctFloat2: res = D3DDECLTYPE_FLOAT2;    <span class="keywordflow">break</span>;
00128         <span class="keywordflow">case</span> ctFloat3: res = D3DDECLTYPE_FLOAT3;    <span class="keywordflow">break</span>;
00129         <span class="keywordflow">case</span> ctFloat4: res = D3DDECLTYPE_FLOAT4;    <span class="keywordflow">break</span>;
00130         <span class="keywordflow">case</span> ctColor:  res = D3DDECLTYPE_D3DCOLOR;  <span class="keywordflow">break</span>;
00131         <span class="keywordflow">case</span> ctShort2: res = D3DDECLTYPE_SHORT2;    <span class="keywordflow">break</span>;
00132         <span class="keywordflow">case</span> ctShort4: res = D3DDECLTYPE_SHORT4;    <span class="keywordflow">break</span>;
00133         <span class="keywordflow">case</span> ctUByte4: res = D3DDECLTYPE_UBYTE4;    <span class="keywordflow">break</span>;
00134     };
00135     <span class="keywordflow">return</span> res;
00136 } <span class="comment">// ConvertVElemType</span>
00137 
00138 <span class="keyword">inline</span> D3DDECLUSAGE ConvertVElemUsage( VertCompUsage usage )
00139 {
00140     D3DDECLUSAGE res = D3DDECLUSAGE_TEXCOORD;
00141     <span class="keywordflow">switch</span> (usage)
00142     {
00143         <span class="keywordflow">case</span> vcPosition: 
00144         <span class="keywordflow">case</span> vcPositionRHW: 
00145             res = D3DDECLUSAGE_POSITION;  <span class="keywordflow">break</span>;
00146         <span class="keywordflow">case</span> vcNormal:      res = D3DDECLUSAGE_NORMAL;    <span class="keywordflow">break</span>;
00147         <span class="keywordflow">case</span> vcDiffuse:     res = D3DDECLUSAGE_COLOR;     <span class="keywordflow">break</span>;
00148         <span class="keywordflow">case</span> vcSpecular:    res = D3DDECLUSAGE_COLOR;     <span class="keywordflow">break</span>;
00149         <span class="keywordflow">case</span> vcBinormal:    res = D3DDECLUSAGE_BINORMAL;  <span class="keywordflow">break</span>;
00150         <span class="keywordflow">case</span> vcTangent:     res = D3DDECLUSAGE_TANGENT;   <span class="keywordflow">break</span>;
00151         <span class="keywordflow">case</span> vcBlend0:
00152         <span class="keywordflow">case</span> vcBlend1:
00153         <span class="keywordflow">case</span> vcBlend2:
00154         <span class="keywordflow">case</span> vcBlend3:
00155             res = D3DDECLUSAGE_BLENDWEIGHT; <span class="keywordflow">break</span>;
00156         <span class="keywordflow">case</span> vcBlendIdx:
00157         <span class="keywordflow">case</span> vcBlendIdx0:
00158         <span class="keywordflow">case</span> vcBlendIdx1:
00159         <span class="keywordflow">case</span> vcBlendIdx2:
00160         <span class="keywordflow">case</span> vcBlendIdx3:
00161             res = D3DDECLUSAGE_BLENDINDICES; <span class="keywordflow">break</span>;
00162         <span class="keywordflow">case</span> vcTexCoor0:
00163         <span class="keywordflow">case</span> vcTexCoor1:
00164         <span class="keywordflow">case</span> vcTexCoor2:
00165         <span class="keywordflow">case</span> vcTexCoor3:
00166         <span class="keywordflow">case</span> vcTexCoor4:
00167         <span class="keywordflow">case</span> vcTexCoor5:
00168         <span class="keywordflow">case</span> vcTexCoor6:
00169         <span class="keywordflow">case</span> vcTexCoor7:
00170             res = D3DDECLUSAGE_TEXCOORD; <span class="keywordflow">break</span>;
00171     };
00172     <span class="keywordflow">return</span> res;
00173 } <span class="comment">// ConvertVElemUsage</span>
00174 
00175 <span class="keyword">inline</span> <span class="keywordtype">int</span> GetVElemUsageIndex( VertCompUsage usage )
00176 {
00177     <span class="keywordtype">int</span> res = 0;
00178     <span class="keywordflow">switch</span> (usage)
00179     {
00180         <span class="keywordflow">case</span> vcSpecular:    res = 1; <span class="keywordflow">break</span>;
00181         <span class="keywordflow">case</span> vcTexCoor0:    res = 0; <span class="keywordflow">break</span>;
00182         <span class="keywordflow">case</span> vcTexCoor1:    res = 1; <span class="keywordflow">break</span>;
00183         <span class="keywordflow">case</span> vcTexCoor2:    res = 2; <span class="keywordflow">break</span>;
00184         <span class="keywordflow">case</span> vcTexCoor3:    res = 3; <span class="keywordflow">break</span>;
00185         <span class="keywordflow">case</span> vcTexCoor4:    res = 4; <span class="keywordflow">break</span>;
00186         <span class="keywordflow">case</span> vcTexCoor5:    res = 5; <span class="keywordflow">break</span>;
00187         <span class="keywordflow">case</span> vcTexCoor6:    res = 6; <span class="keywordflow">break</span>;
00188         <span class="keywordflow">case</span> vcTexCoor7:    res = 7; <span class="keywordflow">break</span>;
00189         <span class="keywordflow">case</span> vcBlend0:      res = 0; <span class="keywordflow">break</span>;
00190         <span class="keywordflow">case</span> vcBlend1:      res = 1; <span class="keywordflow">break</span>;
00191         <span class="keywordflow">case</span> vcBlend2:      res = 2; <span class="keywordflow">break</span>;
00192         <span class="keywordflow">case</span> vcBlend3:      res = 3; <span class="keywordflow">break</span>;
00193         <span class="keywordflow">case</span> vcBlendIdx0:   res = 0; <span class="keywordflow">break</span>;
00194         <span class="keywordflow">case</span> vcBlendIdx1:   res = 1; <span class="keywordflow">break</span>;
00195         <span class="keywordflow">case</span> vcBlendIdx2:   res = 2; <span class="keywordflow">break</span>;
00196         <span class="keywordflow">case</span> vcBlendIdx3:   res = 3; <span class="keywordflow">break</span>;
00197     };
00198     <span class="keywordflow">return</span> res;
00199 } <span class="comment">// GetVElemUsageIndex</span>
00200 
00201 <span class="keyword">inline</span> <span class="keywordtype">bool</span> MapsToD3DVElemUsage( VertCompUsage usage )
00202 {
00203     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00204 } <span class="comment">// MapsToD3DVElemUsage</span>
00205 
00206 <span class="keyword">inline</span> D3DPRIMITIVETYPE ConvertPrimitiveType( PrimitiveType priType )
00207 {
00208     D3DPRIMITIVETYPE d3dPri = D3DPT_POINTLIST;
00209     <span class="keywordflow">switch</span> (priType)
00210     {
00211     <span class="keywordflow">case</span> ptTriangleList:    d3dPri = D3DPT_TRIANGLELIST;    <span class="keywordflow">break</span>;
00212     <span class="keywordflow">case</span> ptTriangleStrip:   d3dPri = D3DPT_TRIANGLESTRIP;   <span class="keywordflow">break</span>;
00213     <span class="keywordflow">case</span> ptTriangleFan:     d3dPri = D3DPT_TRIANGLEFAN;     <span class="keywordflow">break</span>;
00214     <span class="keywordflow">case</span> ptLineStrip:       d3dPri = D3DPT_LINESTRIP;       <span class="keywordflow">break</span>;
00215     <span class="keywordflow">case</span> ptLineList:        d3dPri = D3DPT_LINELIST;        <span class="keywordflow">break</span>;
00216     <span class="keywordflow">case</span> ptPointList:       d3dPri = D3DPT_POINTLIST;       <span class="keywordflow">break</span>;
00217     <span class="keywordflow">case</span> ptQuadList:        d3dPri = D3DPT_TRIANGLELIST;    <span class="keywordflow">break</span>;
00218     }
00219     <span class="keywordflow">return</span> d3dPri;
00220 }  <span class="comment">// ConvertPrimitiveType</span>
00221 
00222 IDirect3DVertexDeclaration9* CreateVDecl( IDirect3DDevice9* pDevice, <span class="keyword">const</span> VertexDeclaration&amp; vdecl );
00223 DWORD CreateFVF( <span class="keyword">const</span> VertexDeclaration&amp; vdecl );
00224 
00225 <span class="preprocessor">#endif // __D3DADAPT_H__</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Tue Jun 13 11:14:33 2006 for gRenderDX9 by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
