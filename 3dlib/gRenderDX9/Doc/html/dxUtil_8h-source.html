<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gRenderDX9: dxUtil.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>dxUtil.h</h1><div class="fragment"><pre>00001 <span class="comment">//-----------------------------------------------------------------------------</span>
00002 <span class="comment">// File: DXUtil.h</span>
00003 <span class="comment">//</span>
00004 <span class="comment">// Desc: Helper functions and typing shortcuts for DirectX programming.</span>
00005 <span class="comment">//</span>
00006 <span class="comment">// Copyright (c) Microsoft Corporation. All rights reserved</span>
00007 <span class="comment">//-----------------------------------------------------------------------------</span>
00008 <span class="preprocessor">#ifndef DXUTIL_H</span>
00009 <span class="preprocessor"></span><span class="preprocessor">#define DXUTIL_H</span>
00010 <span class="preprocessor"></span>
00011 
00012 <span class="comment">//-----------------------------------------------------------------------------</span>
00013 <span class="comment">// Miscellaneous helper functions</span>
00014 <span class="comment">//-----------------------------------------------------------------------------</span>
00015 <span class="preprocessor">#define SAFE_DELETE(p)       { if(p) { delete (p);     (p)=NULL; } }</span>
00016 <span class="preprocessor"></span><span class="preprocessor">#define SAFE_DELETE_ARRAY(p) { if(p) { delete[] (p);   (p)=NULL; } }</span>
00017 <span class="preprocessor"></span>
00018 <span class="preprocessor">#ifndef UNDER_CE</span>
00019 <span class="preprocessor"></span><span class="comment">//-----------------------------------------------------------------------------</span>
00020 <span class="comment">// Name: DXUtil_GetDXSDKMediaPath() and DXUtil_FindMediaFile() </span>
00021 <span class="comment">// Desc: Returns the DirectX SDK path, as stored in the system registry</span>
00022 <span class="comment">//       during the SDK install.</span>
00023 <span class="comment">//-----------------------------------------------------------------------------</span>
00024 HRESULT DXUtil_GetDXSDKMediaPathCch( TCHAR* strDest, <span class="keywordtype">int</span> cchDest );
00025 HRESULT DXUtil_GetDXSDKMediaPathCb( TCHAR* szDest, <span class="keywordtype">int</span> cbDest );
00026 HRESULT DXUtil_FindMediaFileCch( TCHAR* strDestPath, <span class="keywordtype">int</span> cchDest, LPCTSTR strFilename );
00027 HRESULT DXUtil_FindMediaFileCb( TCHAR* szDestPath, <span class="keywordtype">int</span> cbDest, LPCTSTR strFilename );
00028 <span class="preprocessor">#endif // !UNDER_CE</span>
00029 <span class="preprocessor"></span>
00030 
00031 <span class="comment">//-----------------------------------------------------------------------------</span>
00032 <span class="comment">// Name: DXUtil_Read*RegKey() and DXUtil_Write*RegKey()</span>
00033 <span class="comment">// Desc: Helper functions to read/write a string registry key </span>
00034 <span class="comment">//-----------------------------------------------------------------------------</span>
00035 HRESULT DXUtil_WriteStringRegKey( HKEY hKey, LPCTSTR strRegName, LPCTSTR strValue );
00036 HRESULT DXUtil_WriteFloatRegKey( HKEY hKey, LPCTSTR strRegName, FLOAT fValue );
00037 HRESULT DXUtil_WriteIntRegKey( HKEY hKey, LPCTSTR strRegName, DWORD dwValue );
00038 HRESULT DXUtil_WriteGuidRegKey( HKEY hKey, LPCTSTR strRegName, GUID guidValue );
00039 HRESULT DXUtil_WriteBoolRegKey( HKEY hKey, LPCTSTR strRegName, BOOL bValue );
00040 
00041 HRESULT DXUtil_ReadStringRegKeyCch( HKEY hKey, LPCTSTR strRegName, TCHAR* strDest, DWORD cchDest, LPCTSTR strDefault );
00042 HRESULT DXUtil_ReadStringRegKeyCb( HKEY hKey, LPCTSTR strRegName, TCHAR* strDest, DWORD cbDest, LPCTSTR strDefault );
00043 HRESULT DXUtil_ReadFloatRegKey( HKEY hKey, LPCTSTR strRegName, FLOAT* fDest, FLOAT fDefault );
00044 HRESULT DXUtil_ReadIntRegKey( HKEY hKey, LPCTSTR strRegName, DWORD* pdwValue, DWORD dwDefault );
00045 HRESULT DXUtil_ReadGuidRegKey( HKEY hKey, LPCTSTR strRegName, GUID* pGuidValue, GUID&amp; guidDefault );
00046 HRESULT DXUtil_ReadBoolRegKey( HKEY hKey, LPCTSTR strRegName, BOOL* pbValue, BOOL bDefault );
00047 
00048 
00049 <span class="comment">//-----------------------------------------------------------------------------</span>
00050 <span class="comment">// Name: DXUtil_Timer()</span>
00051 <span class="comment">// Desc: Performs timer opertations. Use the following commands:</span>
00052 <span class="comment">//          TIMER_RESET           - to reset the timer</span>
00053 <span class="comment">//          TIMER_START           - to start the timer</span>
00054 <span class="comment">//          TIMER_STOP            - to stop (or pause) the timer</span>
00055 <span class="comment">//          TIMER_ADVANCE         - to advance the timer by 0.1 seconds</span>
00056 <span class="comment">//          TIMER_GETABSOLUTETIME - to get the absolute system time</span>
00057 <span class="comment">//          TIMER_GETAPPTIME      - to get the current time</span>
00058 <span class="comment">//          TIMER_GETELAPSEDTIME  - to get the time that elapsed between </span>
00059 <span class="comment">//                                  TIMER_GETELAPSEDTIME calls</span>
00060 <span class="comment">//-----------------------------------------------------------------------------</span>
00061 <span class="keyword">enum</span> TIMER_COMMAND { TIMER_RESET, TIMER_START, TIMER_STOP, TIMER_ADVANCE,
00062                      TIMER_GETABSOLUTETIME, TIMER_GETAPPTIME, TIMER_GETELAPSEDTIME };
00063 FLOAT __stdcall DXUtil_Timer( TIMER_COMMAND command );
00064 
00065 
00066 <span class="comment">//-----------------------------------------------------------------------------</span>
00067 <span class="comment">// UNICODE support for converting between CHAR, TCHAR, and WCHAR strings</span>
00068 <span class="comment">//-----------------------------------------------------------------------------</span>
00069 HRESULT DXUtil_ConvertAnsiStringToWideCch( WCHAR* wstrDestination, <span class="keyword">const</span> CHAR* strSource, <span class="keywordtype">int</span> cchDestChar );
00070 HRESULT DXUtil_ConvertWideStringToAnsiCch( CHAR* strDestination, <span class="keyword">const</span> WCHAR* wstrSource, <span class="keywordtype">int</span> cchDestChar );
00071 HRESULT DXUtil_ConvertGenericStringToAnsiCch( CHAR* strDestination, <span class="keyword">const</span> TCHAR* tstrSource, <span class="keywordtype">int</span> cchDestChar );
00072 HRESULT DXUtil_ConvertGenericStringToWideCch( WCHAR* wstrDestination, <span class="keyword">const</span> TCHAR* tstrSource, <span class="keywordtype">int</span> cchDestChar );
00073 HRESULT DXUtil_ConvertAnsiStringToGenericCch( TCHAR* tstrDestination, <span class="keyword">const</span> CHAR* strSource, <span class="keywordtype">int</span> cchDestChar );
00074 HRESULT DXUtil_ConvertWideStringToGenericCch( TCHAR* tstrDestination, <span class="keyword">const</span> WCHAR* wstrSource, <span class="keywordtype">int</span> cchDestChar );
00075 HRESULT DXUtil_ConvertAnsiStringToWideCb( WCHAR* wstrDestination, <span class="keyword">const</span> CHAR* strSource, <span class="keywordtype">int</span> cbDestChar );
00076 HRESULT DXUtil_ConvertWideStringToAnsiCb( CHAR* strDestination, <span class="keyword">const</span> WCHAR* wstrSource, <span class="keywordtype">int</span> cbDestChar );
00077 HRESULT DXUtil_ConvertGenericStringToAnsiCb( CHAR* strDestination, <span class="keyword">const</span> TCHAR* tstrSource, <span class="keywordtype">int</span> cbDestChar );
00078 HRESULT DXUtil_ConvertGenericStringToWideCb( WCHAR* wstrDestination, <span class="keyword">const</span> TCHAR* tstrSource, <span class="keywordtype">int</span> cbDestChar );
00079 HRESULT DXUtil_ConvertAnsiStringToGenericCb( TCHAR* tstrDestination, <span class="keyword">const</span> CHAR* strSource, <span class="keywordtype">int</span> cbDestChar );
00080 HRESULT DXUtil_ConvertWideStringToGenericCb( TCHAR* tstrDestination, <span class="keyword">const</span> WCHAR* wstrSource, <span class="keywordtype">int</span> cbDestChar );
00081 
00082 <span class="comment">//-----------------------------------------------------------------------------</span>
00083 <span class="comment">// GUID to String converting </span>
00084 <span class="comment">//-----------------------------------------------------------------------------</span>
00085 HRESULT DXUtil_ConvertGUIDToStringCch( <span class="keyword">const</span> GUID* pGuidSrc, TCHAR* strDest, <span class="keywordtype">int</span> cchDestChar );
00086 HRESULT DXUtil_ConvertGUIDToStringCb( <span class="keyword">const</span> GUID* pGuidSrc, TCHAR* strDest, <span class="keywordtype">int</span> cbDestChar );
00087 HRESULT DXUtil_ConvertStringToGUID( <span class="keyword">const</span> TCHAR* strIn, GUID* pGuidOut );
00088 
00089 
00090 <span class="comment">//-----------------------------------------------------------------------------</span>
00091 <span class="comment">// Debug printing support</span>
00092 <span class="comment">// See dxerr9.h for more debug printing support</span>
00093 <span class="comment">//-----------------------------------------------------------------------------</span>
00094 VOID    DXUtil_Trace( LPCTSTR strMsg, ... );
00095 
00096 <span class="preprocessor">#if defined(DEBUG) | defined(_DEBUG)</span>
00097 <span class="preprocessor"></span><span class="preprocessor">    #define DXTRACE           DXUtil_Trace</span>
00098 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00099 <span class="preprocessor"></span><span class="preprocessor">    #define DXTRACE           sizeof</span>
00100 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00101 <span class="preprocessor"></span>
00102 
00103 <span class="comment">//-----------------------------------------------------------------------------</span>
00104 <span class="comment">// Name: ArrayListType</span>
00105 <span class="comment">// Desc: Indicates how data should be stored in a CArrayList</span>
00106 <span class="comment">//-----------------------------------------------------------------------------</span>
00107 <span class="keyword">enum</span> ArrayListType
00108 {
00109     AL_VALUE,       <span class="comment">// entry data is copied into the list</span>
00110     AL_REFERENCE,   <span class="comment">// entry pointers are copied into the list</span>
00111 };
00112 
00113 <span class="comment">//-----------------------------------------------------------------------------</span>
00114 <span class="comment">// Name: CArrayList</span>
00115 <span class="comment">// Desc: A growable array</span>
00116 <span class="comment">//-----------------------------------------------------------------------------</span>
00117 <span class="keyword">class </span>CArrayList
00118 {
00119 <span class="keyword">protected</span>:
00120     ArrayListType   m_ArrayListType;
00121     <span class="keywordtype">void</span>*           m_pData;
00122     UINT            m_BytesPerEntry;
00123     UINT            m_NumEntries;
00124     UINT            m_NumEntriesAllocated;
00125 
00126 <span class="keyword">public</span>:
00127                 CArrayList  ( ArrayListType Type, UINT BytesPerEntry = 0 );
00128                 ~CArrayList ( <span class="keywordtype">void</span> );
00129     HRESULT     Add         ( <span class="keywordtype">void</span>* pEntry );
00130     <span class="keywordtype">void</span>        Remove      ( UINT Entry );
00131     <span class="keywordtype">void</span>*       GetPtr      ( UINT Entry );
00132     UINT        Count       ( <span class="keywordtype">void</span> ) { <span class="keywordflow">return</span> m_NumEntries; }
00133     <span class="keywordtype">bool</span>        Contains    ( <span class="keywordtype">void</span>* pEntryData );
00134     <span class="keywordtype">void</span>        Clear       ( <span class="keywordtype">void</span> ) { m_NumEntries = 0; }
00135 }; <span class="comment">// class CArrayList</span>
00136 
00137 <span class="comment">//-----------------------------------------------------------------------------</span>
00138 <span class="comment">// WinCE build support</span>
00139 <span class="comment">//-----------------------------------------------------------------------------</span>
00140 <span class="preprocessor">#ifdef UNDER_CE</span>
00141 <span class="preprocessor"></span>
00142 <span class="preprocessor">#define CheckDlgButton(hdialog, id, state) ::SendMessage(::GetDlgItem(hdialog, id), BM_SETCHECK, state, 0)</span>
00143 <span class="preprocessor"></span><span class="preprocessor">#define IsDlgButtonChecked(hdialog, id) ::SendMessage(::GetDlgItem(hdialog, id), BM_GETCHECK, 0L, 0L)</span>
00144 <span class="preprocessor"></span><span class="preprocessor">#define GETTIMESTAMP GetTickCount</span>
00145 <span class="preprocessor"></span><span class="preprocessor">#define _TWINCE(x) _T(x)</span>
00146 <span class="preprocessor"></span>
00147 __inline <span class="keywordtype">int</span> GetScrollPos(HWND hWnd, <span class="keywordtype">int</span> nBar)
00148 {
00149     SCROLLINFO si;
00150     memset(&amp;si, 0, <span class="keyword">sizeof</span>(si));
00151     si.cbSize = <span class="keyword">sizeof</span>(si);
00152     si.fMask = SIF_POS;
00153     <span class="keywordflow">if</span> (!GetScrollInfo(hWnd, nBar, &amp;si))
00154     {
00155         <span class="keywordflow">return</span> 0;
00156     }
00157     <span class="keywordflow">else</span>
00158     {
00159         <span class="keywordflow">return</span> si.nPos;
00160     }
00161 }
00162 
00163 <span class="preprocessor">#else // !UNDER_CE</span>
00164 <span class="preprocessor"></span>
00165 <span class="preprocessor">#define GETTIMESTAMP timeGetTime</span>
00166 <span class="preprocessor"></span><span class="preprocessor">#define _TWINCE(x) x</span>
00167 <span class="preprocessor"></span>
00168 <span class="preprocessor">#endif // UNDER_CE</span>
00169 <span class="preprocessor"></span>
00170 
00171 <span class="preprocessor">#endif // DXUTIL_H</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Tue Jun 13 11:14:34 2006 for gRenderDX9 by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
