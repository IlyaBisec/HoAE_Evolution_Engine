<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gRenderDX9: d3dSettings.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>d3dSettings.h</h1><div class="fragment"><pre>00001 <span class="comment">//-----------------------------------------------------------------------------</span>
00002 <span class="comment">// File: D3DSettings.h</span>
00003 <span class="comment">//</span>
00004 <span class="comment">// Desc: Settings class and change-settings dialog class for the Direct3D </span>
00005 <span class="comment">//       samples framework library.</span>
00006 <span class="comment">//</span>
00007 <span class="comment">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
00008 <span class="comment">//-----------------------------------------------------------------------------</span>
00009 <span class="preprocessor">#ifndef D3DSETTINGS_H</span>
00010 <span class="preprocessor"></span><span class="preprocessor">#define D3DSETTINGS_H</span>
00011 <span class="preprocessor"></span>
00012 
00013 <span class="comment">//-----------------------------------------------------------------------------</span>
00014 <span class="comment">// Name: class D3DSettings</span>
00015 <span class="comment">// Desc: Current D3D settings: adapter, device, mode, formats, etc.</span>
00016 <span class="comment">//-----------------------------------------------------------------------------</span>
00017 <span class="keyword">class </span>D3DSettings 
00018 {
00019 <span class="keyword">public</span>:
00020     <span class="keywordtype">bool</span>                    m_bIsWindowed;
00021 
00022     D3DAdapterInfo*         pWindowed_AdapterInfo;
00023     D3DDeviceInfo*          pWindowed_DeviceInfo;
00024     D3DDeviceCombo*         pWindowed_DeviceCombo;
00025 
00026     D3DDISPLAYMODE          Windowed_DisplayMode; <span class="comment">// not changable by the user</span>
00027     D3DFORMAT               Windowed_DepthStencilBufferFormat;
00028     D3DMULTISAMPLE_TYPE     Windowed_WorstMultisampleType;
00029     D3DMULTISAMPLE_TYPE     Windowed_BestMultisampleType;
00030     D3DMULTISAMPLE_TYPE     Windowed_MultisampleType;
00031     DWORD                   Windowed_MultisampleQuality;
00032     VertexProcessingType    Windowed_VertexProcessingType;
00033     UINT                    Windowed_PresentInterval;
00034     <span class="keywordtype">bool</span>                    bDeviceClip;
00035     <span class="keywordtype">int</span>                     Windowed_Width;
00036     <span class="keywordtype">int</span>                     Windowed_Height;
00037 
00038     D3DAdapterInfo*         pFullscreen_AdapterInfo;
00039     D3DDeviceInfo*          pFullscreen_DeviceInfo;
00040     D3DDeviceCombo*         pFullscreen_DeviceCombo;
00041 
00042     D3DDISPLAYMODE          Fullscreen_DisplayMode;             <span class="comment">// changable by the user</span>
00043     D3DFORMAT               Fullscreen_DepthStencilBufferFormat;
00044     D3DMULTISAMPLE_TYPE     Fullscreen_WorstMultisampleType;
00045     D3DMULTISAMPLE_TYPE     Fullscreen_BestMultisampleType;
00046     D3DMULTISAMPLE_TYPE     Fullscreen_MultisampleType;
00047     DWORD                   Fullscreen_MultisampleQuality;
00048     VertexProcessingType    Fullscreen_VertexProcessingType;
00049     UINT                    Fullscreen_PresentInterval;
00050 
00051     D3DAdapterInfo*         PAdapterInfo()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_bIsWindowed ? pWindowed_AdapterInfo : pFullscreen_AdapterInfo; }
00052     D3DDeviceInfo*          PDeviceInfo ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_bIsWindowed ? pWindowed_DeviceInfo  : pFullscreen_DeviceInfo; }
00053     D3DDeviceCombo*         PDeviceCombo()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_bIsWindowed ? pWindowed_DeviceCombo : pFullscreen_DeviceCombo; }
00054 
00055     <span class="keywordtype">int</span>                     Ordinal     () { <span class="keywordflow">return</span> PDeviceCombo()-&gt;m_Ordinal; }
00056     D3DDEVTYPE              DevType     () { <span class="keywordflow">return</span> PDeviceCombo()-&gt;m_DevType; }
00057 
00058     <span class="keywordtype">bool</span>                    m_BackBufferForceTrueColor;
00059     D3DFORMAT               BackBufferFormat() {
00060         <span class="keywordflow">if</span>(m_BackBufferForceTrueColor) {
00061             <span class="keywordflow">return</span> D3DFMT_X8R8G8B8;
00062         }
00063         <span class="keywordflow">else</span> {
00064             <span class="keywordflow">return</span> PDeviceCombo()-&gt;m_BackBufferFormat;
00065         }
00066     }
00067     <span class="keywordtype">void</span>                    BackBufferForceTrueColorEnable() { m_BackBufferForceTrueColor = <span class="keyword">true</span>; }
00068     <span class="keywordtype">void</span>                    BackBufferForceTrueColorDisable() { m_BackBufferForceTrueColor = <span class="keyword">false</span>; }
00069 
00070     D3DDISPLAYMODE          DisplayMode () { <span class="keywordflow">return</span> m_bIsWindowed ? Windowed_DisplayMode : Fullscreen_DisplayMode; }
00071     <span class="keywordtype">void</span> SetDisplayMode(D3DDISPLAYMODE value) { <span class="keywordflow">if</span> (m_bIsWindowed) Windowed_DisplayMode = value; <span class="keywordflow">else</span> Fullscreen_DisplayMode = value; }
00072 
00073     D3DFORMAT DepthStencilBufferFormat() { <span class="keywordflow">return</span> m_bIsWindowed ? Windowed_DepthStencilBufferFormat : Fullscreen_DepthStencilBufferFormat; }
00074     <span class="keywordtype">void</span> SetDepthStencilBufferFormat(D3DFORMAT value) { <span class="keywordflow">if</span> (m_bIsWindowed) Windowed_DepthStencilBufferFormat = value; <span class="keywordflow">else</span> Fullscreen_DepthStencilBufferFormat = value; }
00075 
00076     D3DMULTISAMPLE_TYPE MultisampleType() { <span class="keywordflow">return</span> m_bIsWindowed ? Windowed_MultisampleType : Fullscreen_MultisampleType; }
00077 
00078     <span class="keywordtype">void</span> SetMultisampleTypeToBest() {
00079         Windowed_MultisampleType = Windowed_BestMultisampleType;
00080         Fullscreen_MultisampleType = Fullscreen_BestMultisampleType;
00081     }
00082     
00083     <span class="keywordtype">void</span> SetMultisampleTypeToWorst() {
00084         Windowed_MultisampleType = Windowed_WorstMultisampleType;
00085         Fullscreen_MultisampleType = Fullscreen_WorstMultisampleType;
00086     }
00087 
00088     D3DMULTISAMPLE_TYPE MultisampleTypeBest() {
00089         <span class="keywordflow">return</span> m_bIsWindowed ? Windowed_BestMultisampleType : Fullscreen_BestMultisampleType;
00090     }
00091 
00092     D3DMULTISAMPLE_TYPE MultisampleTypeWorst() {
00093         <span class="keywordflow">return</span> m_bIsWindowed ? Windowed_WorstMultisampleType : Fullscreen_WorstMultisampleType;
00094     }
00095 
00096     <span class="keywordtype">void</span> SetMultisampleType(D3DMULTISAMPLE_TYPE value) {
00097         <span class="keywordflow">if</span> (m_bIsWindowed) Windowed_MultisampleType = value; <span class="keywordflow">else</span> Fullscreen_MultisampleType = value;
00098     }
00099 
00100     DWORD MultisampleQuality() { <span class="keywordflow">return</span> m_bIsWindowed ? Windowed_MultisampleQuality : Fullscreen_MultisampleQuality; }
00101     <span class="keywordtype">void</span> SetMultisampleQuality(DWORD value) { <span class="keywordflow">if</span> (m_bIsWindowed) Windowed_MultisampleQuality = value; <span class="keywordflow">else</span> Fullscreen_MultisampleQuality = value; }
00102 
00103     VertexProcessingType GetVertexProcessingType() { <span class="keywordflow">return</span> m_bIsWindowed ? Windowed_VertexProcessingType : Fullscreen_VertexProcessingType; }
00104     <span class="keywordtype">void</span> SetVertexProcessingType(VertexProcessingType value) { <span class="keywordflow">if</span> (m_bIsWindowed) Windowed_VertexProcessingType = value; <span class="keywordflow">else</span> Fullscreen_VertexProcessingType = value; }
00105 
00106     UINT PresentInterval() { <span class="keywordflow">return</span> m_bIsWindowed ? Windowed_PresentInterval : Fullscreen_PresentInterval; }
00107     <span class="keywordtype">void</span> SetPresentInterval(UINT value) { <span class="keywordflow">if</span> (m_bIsWindowed) Windowed_PresentInterval = value; <span class="keywordflow">else</span> Fullscreen_PresentInterval = value; }
00108 
00109     <span class="keywordtype">bool</span> DeviceClip() { <span class="keywordflow">return</span> bDeviceClip; }
00110     <span class="keywordtype">void</span> SetDeviceClip( <span class="keywordtype">bool</span> bClip ) { bDeviceClip = bClip; }
00111 }; <span class="comment">// class D3DSettings</span>
00112 
00113 <span class="comment">//-----------------------------------------------------------------------------</span>
00114 <span class="comment">// Name: class CD3DSettingsDialog</span>
00115 <span class="comment">// Desc: Dialog box to allow the user to change the D3D settings</span>
00116 <span class="comment">//-----------------------------------------------------------------------------</span>
00117 <span class="keyword">class </span>CD3DSettingsDialog
00118 {
00119 <span class="keyword">private</span>:
00120     HWND                    m_hDlg;
00121     D3DEnumeration*         m_pEnumeration;
00122     D3DSettings             m_d3dSettings;
00123 
00124     <span class="comment">// ComboBox helper functions</span>
00125     <span class="keywordtype">void</span>    ComboBoxAdd                 ( <span class="keywordtype">int</span> id, <span class="keyword">const</span> <span class="keywordtype">void</span>* pData, LPCTSTR pstrDesc );
00126     <span class="keywordtype">void</span>    ComboBoxSelect              ( <span class="keywordtype">int</span> id, <span class="keyword">const</span> <span class="keywordtype">void</span>* pData );
00127     <span class="keywordtype">void</span>*   ComboBoxSelected            ( <span class="keywordtype">int</span> id );
00128     <span class="keywordtype">bool</span>    ComboBoxSomethingSelected   ( <span class="keywordtype">int</span> id );
00129     UINT    ComboBoxCount               ( <span class="keywordtype">int</span> id );
00130     <span class="keywordtype">void</span>    ComboBoxSelectIndex         ( <span class="keywordtype">int</span> id, <span class="keywordtype">int</span> index );
00131     <span class="keywordtype">void</span>    ComboBoxClear               ( <span class="keywordtype">int</span> id );
00132     <span class="keywordtype">bool</span>    ComboBoxContainsText        ( <span class="keywordtype">int</span> id, LPCTSTR pstrText );
00133 
00134     <span class="keywordtype">void</span>    AdapterChanged              ();
00135     <span class="keywordtype">void</span>    DeviceChanged               ();
00136     <span class="keywordtype">void</span>    WindowedFullscreenChanged   ();
00137     <span class="keywordtype">void</span>    AdapterFormatChanged        ();
00138     <span class="keywordtype">void</span>    ResolutionChanged           ();
00139     <span class="keywordtype">void</span>    RefreshRateChanged          ();
00140     <span class="keywordtype">void</span>    BackBufferFormatChanged     ();
00141     <span class="keywordtype">void</span>    DSBufferFormatChanged       ();
00142     <span class="keywordtype">void</span>    MultisampleTypeChanged      ();
00143     <span class="keywordtype">void</span>    MultisampleQualityChanged   ();
00144     <span class="keywordtype">void</span>    VertexProcessingChanged     ();
00145     <span class="keywordtype">void</span>    PresentIntervalChanged      ();
00146     <span class="keywordtype">void</span>    DeviceClipChanged           ();
00147 
00148 <span class="keyword">public</span>:
00149             CD3DSettingsDialog          ( D3DEnumeration* pEnumeration, D3DSettings* pSettings);
00150     INT_PTR ShowDialog                  ( HWND hwndParent );
00151     INT_PTR DialogProc                  ( HWND hDlg, UINT msg, WPARAM wParam, LPARAM lParam );
00152     <span class="keywordtype">void</span>    GetFinalSettings            ( D3DSettings* pSettings ) { *pSettings = m_d3dSettings; }
00153 }; <span class="comment">// class CD3DSettingsDialog</span>
00154 
00155 <span class="preprocessor">#endif</span>
00156 <span class="preprocessor"></span>
00157 
00158 
</pre></div><hr><address style="align: right;"><small>
Generated on Tue Jun 13 11:14:33 2006 for gRenderDX9 by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
