<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gRenderDX9: d3dFont.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>d3dFont.cpp</h1><div class="fragment"><pre>00001 <span class="comment">/*****************************************************************************/</span>
00002 <span class="comment">/*  File:   d3dFont.cpp</span>
00003 <span class="comment">/*  Desc:   Font interface implementation for DirectX9 </span>
00004 <span class="comment">/*  Author: Ruslan Shestopalyuk</span>
00005 <span class="comment">/*  Date:   02.11.2004</span>
00006 <span class="comment">/*****************************************************************************/</span>
00007 <span class="preprocessor">#include "gRenderPch.h"</span>
00008 <span class="preprocessor">#include "d3dFont.h"</span>
00009 
00010 <span class="comment">/*****************************************************************************/</span>
00011 <span class="comment">/*  FontDX9 implementation</span>
00012 <span class="comment">/*****************************************************************************/</span>
00013 FontDX9::FontDX9( IDirect3DDevice9* pDevice )
00014 {
00015     m_pDevice = pDevice;
00016     m_pFont = NULL;
00017 } <span class="comment">// FontDX9::FontDX9</span>
00018 
00019 FontDX9::~FontDX9()
00020 {
00021 }
00022 
00023 <span class="keywordtype">bool</span> FontDX9::Create( <span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">int</span> height, DWORD charset, <span class="keywordtype">bool</span> bBold, <span class="keywordtype">bool</span> bItalic )
00024 {
00025     HDC hDC = GetDC( NULL );
00026     <span class="keywordtype">int</span> nHeight = -MulDiv( height, GetDeviceCaps( hDC, LOGPIXELSY ), 72 );
00027     ReleaseDC( NULL, hDC );
00028     HRESULT hr = D3DXCreateFont( m_pDevice, nHeight, 0, (DWORD)bBold, 0, (DWORD)bItalic, 
00029                                     DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, DEFAULT_QUALITY, 
00030                                     DEFAULT_PITCH | FF_DONTCARE, name, &amp;m_pFont );
00031     <span class="keywordflow">return</span> (hr == S_OK);
00032 } <span class="comment">// FontDX9::Create</span>
00033 
00034 <span class="keywordtype">bool</span> FontDX9::Create( <span class="keyword">const</span> <span class="keywordtype">char</span>* texName, <span class="keywordtype">int</span> charW, <span class="keywordtype">int</span> charH )
00035 {
00036     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00037 } <span class="comment">// FontDX9::Create</span>
00038 
00039 <span class="keywordtype">int</span> FontDX9::GetStringWidth( <span class="keyword">const</span> <span class="keywordtype">char</span>* str, <span class="keywordtype">int</span> spacing )
00040 {
00041     <span class="keywordflow">return</span> 0;
00042 } <span class="comment">// FontDX9::GetStringWidth</span>
00043 
00044 <span class="keywordtype">int</span> FontDX9::GetCharWidth( BYTE ch )
00045 {
00046     <span class="keywordflow">return</span> 0;
00047 } <span class="comment">// FontDX9::GetCharWidth</span>
00048 
00049 <span class="keywordtype">int</span> FontDX9::GetCharHeight( BYTE ch )
00050 {
00051     <span class="keywordflow">return</span> 0;
00052 } <span class="comment">// FontDX9::GetCharHeight</span>
00053 
00054 <span class="keywordtype">bool</span> FontDX9::DrawString( <span class="keyword">const</span> <span class="keywordtype">char</span>* str, <span class="keyword">const</span> Vector3D&amp; pos, DWORD color, <span class="keywordtype">int</span> spacing )
00055 {
00056     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00057 } <span class="comment">// FontDX9::DrawString</span>
00058 
00059 <span class="keywordtype">bool</span> FontDX9::DrawString3D( <span class="keyword">const</span> <span class="keywordtype">char</span>* str, <span class="keyword">const</span> Vector3D&amp; pos, DWORD color , <span class="keywordtype">int</span> spacing )
00060 {
00061     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00062 } <span class="comment">// FontDX9::DrawString3D</span>
00063 
00064 <span class="keywordtype">bool</span> FontDX9::DrawChar( <span class="keyword">const</span> Vector3D&amp; pos, BYTE ch, DWORD color )
00065 {
00066     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00067 } <span class="comment">// FontDX9::DrawChar</span>
00068 
00069 <span class="keywordtype">bool</span> FontDX9::DrawChar( <span class="keyword">const</span> Vector3D&amp; pos, <span class="keyword">const</span> Rct&amp; uv, DWORD color )
00070 {
00071     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00072 } <span class="comment">// FontDX9::DrawChar</span>
00073 
00074 <span class="keywordtype">bool</span> FontDX9::DrawChar( <span class="keyword">const</span> Vector3D&amp; pos, <span class="keyword">const</span> Rct&amp; uv, <span class="keywordtype">float</span> w, <span class="keywordtype">float</span> h, DWORD color )
00075 {
00076     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00077 } <span class="comment">// FontDX9::DrawChar</span>
00078 
00079 <span class="keywordtype">void</span> FontDX9::Flush()
00080 {
00081 
00082 } <span class="comment">// FontDX9::Flush</span>
00083 
00084 <span class="keywordtype">void</span> FontDX9::DeleteDeviceObjects()
00085 {
00086     SAFE_RELEASE( m_pFont );
00087 } <span class="comment">// FontDX9::DeleteDeviceObjects</span>
00088 
00089 <span class="keywordtype">void</span> FontDX9::InvalidateDeviceObjects()
00090 {
00091     <span class="keywordflow">if</span> (m_pFont) m_pFont-&gt;OnLostDevice();
00092 } <span class="comment">// FontDX9::InvalidateDeviceObjects</span>
00093 
00094 <span class="keywordtype">void</span> FontDX9::RestoreDeviceObjects()
00095 {
00096     <span class="keywordflow">if</span> (m_pFont) m_pFont-&gt;OnResetDevice();
00097 } <span class="comment">// FontDX9::RestoreDeviceObjects</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Tue Jun 13 11:14:33 2006 for gRenderDX9 by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
