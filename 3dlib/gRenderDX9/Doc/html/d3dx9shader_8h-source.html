<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gRenderDX9: d3dx9shader.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>d3dx9shader.h</h1><div class="fragment"><pre>00001 
00002 <span class="comment">//</span>
00003 <span class="comment">//  Copyright (c) Microsoft Corporation.  All rights reserved.</span>
00004 <span class="comment">//</span>
00005 <span class="comment">//  File:       d3dx9shader.h</span>
00006 <span class="comment">//  Content:    D3DX Shader APIs</span>
00007 <span class="comment">//</span>
00009 <span class="comment"></span>
00010 <span class="preprocessor">#include "d3dx9.h"</span>
00011 
00012 <span class="preprocessor">#ifndef __D3DX9SHADER_H__</span>
00013 <span class="preprocessor"></span><span class="preprocessor">#define __D3DX9SHADER_H__</span>
00014 <span class="preprocessor"></span>
00015 
00016 <span class="comment">//---------------------------------------------------------------------------</span>
00017 <span class="comment">// D3DXTX_VERSION:</span>
00018 <span class="comment">// --------------</span>
00019 <span class="comment">// Version token used to create a procedural texture filler in effects</span>
00020 <span class="comment">// Used by D3DXFill[]TX functions</span>
00021 <span class="comment">//---------------------------------------------------------------------------</span>
00022 <span class="preprocessor">#define D3DXTX_VERSION(_Major,_Minor) (('T' &lt;&lt; 24) | ('X' &lt;&lt; 16) | ((_Major) &lt;&lt; 8) | (_Minor))</span>
00023 <span class="preprocessor"></span>
00024 
00025 
00026 <span class="comment">//----------------------------------------------------------------------------</span>
00027 <span class="comment">// D3DXSHADER flags:</span>
00028 <span class="comment">// -----------------</span>
00029 <span class="comment">// D3DXSHADER_DEBUG</span>
00030 <span class="comment">//   Insert debug file/line/type/symbol information.</span>
00031 <span class="comment">//</span>
00032 <span class="comment">// D3DXSHADER_SKIPVALIDATION</span>
00033 <span class="comment">//   Do not validate the generated code against known capabilities and</span>
00034 <span class="comment">//   constraints.  This option is only recommended when compiling shaders</span>
00035 <span class="comment">//   you KNOW will work.  (ie. have compiled before without this option.)</span>
00036 <span class="comment">//   Shaders are always validated by D3D before they are set to the device.</span>
00037 <span class="comment">//</span>
00038 <span class="comment">// D3DXSHADER_SKIPOPTIMIZATION </span>
00039 <span class="comment">//   Instructs the compiler to skip optimization steps during code generation.</span>
00040 <span class="comment">//   Unless you are trying to isolate a problem in your code using this option </span>
00041 <span class="comment">//   is not recommended.</span>
00042 <span class="comment">//</span>
00043 <span class="comment">// D3DXSHADER_PACKMATRIX_ROWMAJOR</span>
00044 <span class="comment">//   Unless explicitly specified, matrices will be packed in row-major order</span>
00045 <span class="comment">//   on input and output from the shader.</span>
00046 <span class="comment">//</span>
00047 <span class="comment">// D3DXSHADER_PACKMATRIX_COLUMNMAJOR</span>
00048 <span class="comment">//   Unless explicitly specified, matrices will be packed in column-major </span>
00049 <span class="comment">//   order on input and output from the shader.  This is generally more </span>
00050 <span class="comment">//   efficient, since it allows vector-matrix multiplication to be performed</span>
00051 <span class="comment">//   using a series of dot-products.</span>
00052 <span class="comment">//</span>
00053 <span class="comment">// D3DXSHADER_PARTIALPRECISION</span>
00054 <span class="comment">//   Force all computations in resulting shader to occur at partial precision.</span>
00055 <span class="comment">//   This may result in faster evaluation of shaders on some hardware.</span>
00056 <span class="comment">//</span>
00057 <span class="comment">// D3DXSHADER_FORCE_VS_SOFTWARE_NOOPT</span>
00058 <span class="comment">//   Force compiler to compile against the next highest available software</span>
00059 <span class="comment">//   target for vertex shaders.  This flag also turns optimizations off, </span>
00060 <span class="comment">//   and debugging on.  </span>
00061 <span class="comment">//</span>
00062 <span class="comment">// D3DXSHADER_FORCE_PS_SOFTWARE_NOOPT</span>
00063 <span class="comment">//   Force compiler to compile against the next highest available software</span>
00064 <span class="comment">//   target for pixel shaders.  This flag also turns optimizations off, </span>
00065 <span class="comment">//   and debugging on.</span>
00066 <span class="comment">//</span>
00067 <span class="comment">// D3DXSHADER_NO_PRESHADER</span>
00068 <span class="comment">//   Disables Preshaders. Using this flag will cause the compiler to not </span>
00069 <span class="comment">//   pull out static expression for evaluation on the host cpu</span>
00070 <span class="comment">//</span>
00071 <span class="comment">// D3DXSHADER_AVOID_FLOW_CONTROL</span>
00072 <span class="comment">//   Hint compiler to avoid flow-control constructs where possible.</span>
00073 <span class="comment">//</span>
00074 <span class="comment">// D3DXSHADER_PREFER_FLOW_CONTROL</span>
00075 <span class="comment">//   Hint compiler to prefer flow-control constructs where possible.</span>
00076 <span class="comment">//</span>
00077 <span class="comment">//----------------------------------------------------------------------------</span>
00078 
00079 <span class="preprocessor">#define D3DXSHADER_DEBUG                    (1 &lt;&lt; 0)</span>
00080 <span class="preprocessor"></span><span class="preprocessor">#define D3DXSHADER_SKIPVALIDATION           (1 &lt;&lt; 1)</span>
00081 <span class="preprocessor"></span><span class="preprocessor">#define D3DXSHADER_SKIPOPTIMIZATION         (1 &lt;&lt; 2)</span>
00082 <span class="preprocessor"></span><span class="preprocessor">#define D3DXSHADER_PACKMATRIX_ROWMAJOR      (1 &lt;&lt; 3)</span>
00083 <span class="preprocessor"></span><span class="preprocessor">#define D3DXSHADER_PACKMATRIX_COLUMNMAJOR   (1 &lt;&lt; 4)</span>
00084 <span class="preprocessor"></span><span class="preprocessor">#define D3DXSHADER_PARTIALPRECISION         (1 &lt;&lt; 5)</span>
00085 <span class="preprocessor"></span><span class="preprocessor">#define D3DXSHADER_FORCE_VS_SOFTWARE_NOOPT  (1 &lt;&lt; 6)</span>
00086 <span class="preprocessor"></span><span class="preprocessor">#define D3DXSHADER_FORCE_PS_SOFTWARE_NOOPT  (1 &lt;&lt; 7)</span>
00087 <span class="preprocessor"></span><span class="preprocessor">#define D3DXSHADER_NO_PRESHADER             (1 &lt;&lt; 8)</span>
00088 <span class="preprocessor"></span><span class="preprocessor">#define D3DXSHADER_AVOID_FLOW_CONTROL       (1 &lt;&lt; 9)</span>
00089 <span class="preprocessor"></span><span class="preprocessor">#define D3DXSHADER_PREFER_FLOW_CONTROL      (1 &lt;&lt; 10)</span>
00090 <span class="preprocessor"></span>
00091 
00092 
00093 <span class="comment">//----------------------------------------------------------------------------</span>
00094 <span class="comment">// D3DXHANDLE:</span>
00095 <span class="comment">// -----------</span>
00096 <span class="comment">// Handle values used to efficiently reference shader and effect parameters.</span>
00097 <span class="comment">// Strings can be used as handles.  However, handles are not always strings.</span>
00098 <span class="comment">//----------------------------------------------------------------------------</span>
00099 
00100 <span class="keyword">typedef</span> LPCSTR D3DXHANDLE;
00101 <span class="keyword">typedef</span> D3DXHANDLE *LPD3DXHANDLE;
00102 
00103 
00104 <span class="comment">//----------------------------------------------------------------------------</span>
00105 <span class="comment">// D3DXMACRO:</span>
00106 <span class="comment">// ----------</span>
00107 <span class="comment">// Preprocessor macro definition.  The application pass in a NULL-terminated</span>
00108 <span class="comment">// array of this structure to various D3DX APIs.  This enables the application</span>
00109 <span class="comment">// to #define tokens at runtime, before the file is parsed.</span>
00110 <span class="comment">//----------------------------------------------------------------------------</span>
00111 
00112 <span class="keyword">typedef</span> <span class="keyword">struct </span>_D3DXMACRO
00113 {
00114     LPCSTR Name;
00115     LPCSTR Definition;
00116 
00117 } D3DXMACRO, *LPD3DXMACRO;
00118 
00119 
00120 <span class="comment">//----------------------------------------------------------------------------</span>
00121 <span class="comment">// D3DXSEMANTIC:</span>
00122 <span class="comment">//----------------------------------------------------------------------------</span>
00123 
00124 <span class="keyword">typedef</span> <span class="keyword">struct </span>_D3DXSEMANTIC
00125 {
00126     UINT Usage;
00127     UINT UsageIndex;
00128 
00129 } D3DXSEMANTIC, *LPD3DXSEMANTIC;
00130 
00131 
00132 
00133 <span class="comment">//----------------------------------------------------------------------------</span>
00134 <span class="comment">// D3DXFRAGMENT_DESC:</span>
00135 <span class="comment">//----------------------------------------------------------------------------</span>
00136 
00137 <span class="keyword">typedef</span> <span class="keyword">struct </span>_D3DXFRAGMENT_DESC
00138 {
00139     LPCSTR Name;
00140     DWORD Target;
00141 
00142 } D3DXFRAGMENT_DESC, *LPD3DXFRAGMENT_DESC;
00143 
00144 
00145 <span class="comment">//----------------------------------------------------------------------------</span>
00146 <span class="comment">// D3DXREGISTER_SET:</span>
00147 <span class="comment">//----------------------------------------------------------------------------</span>
00148 
00149 <span class="keyword">typedef</span> <span class="keyword">enum</span> _D3DXREGISTER_SET
00150 {
00151     D3DXRS_BOOL,
00152     D3DXRS_INT4,
00153     D3DXRS_FLOAT4,
00154     D3DXRS_SAMPLER,
00155 
00156     <span class="comment">// force 32-bit size enum</span>
00157     D3DXRS_FORCE_DWORD = 0x7fffffff
00158 
00159 } D3DXREGISTER_SET, *LPD3DXREGISTER_SET;
00160 
00161 
00162 <span class="comment">//----------------------------------------------------------------------------</span>
00163 <span class="comment">// D3DXPARAMETER_CLASS:</span>
00164 <span class="comment">//----------------------------------------------------------------------------</span>
00165 
00166 <span class="keyword">typedef</span> <span class="keyword">enum</span> _D3DXPARAMETER_CLASS
00167 {
00168     D3DXPC_SCALAR,
00169     D3DXPC_VECTOR,
00170     D3DXPC_MATRIX_ROWS,
00171     D3DXPC_MATRIX_COLUMNS,
00172     D3DXPC_OBJECT,
00173     D3DXPC_STRUCT,
00174 
00175     <span class="comment">// force 32-bit size enum</span>
00176     D3DXPC_FORCE_DWORD = 0x7fffffff
00177 
00178 } D3DXPARAMETER_CLASS, *LPD3DXPARAMETER_CLASS;
00179 
00180 
00181 <span class="comment">//----------------------------------------------------------------------------</span>
00182 <span class="comment">// D3DXPARAMETER_TYPE:</span>
00183 <span class="comment">//----------------------------------------------------------------------------</span>
00184 
00185 <span class="keyword">typedef</span> <span class="keyword">enum</span> _D3DXPARAMETER_TYPE
00186 {
00187     D3DXPT_VOID,
00188     D3DXPT_BOOL,
00189     D3DXPT_INT,
00190     D3DXPT_FLOAT,
00191     D3DXPT_STRING,
00192     D3DXPT_TEXTURE,
00193     D3DXPT_TEXTURE1D,
00194     D3DXPT_TEXTURE2D,
00195     D3DXPT_TEXTURE3D,
00196     D3DXPT_TEXTURECUBE,
00197     D3DXPT_SAMPLER,
00198     D3DXPT_SAMPLER1D,
00199     D3DXPT_SAMPLER2D,
00200     D3DXPT_SAMPLER3D,
00201     D3DXPT_SAMPLERCUBE,
00202     D3DXPT_PIXELSHADER,
00203     D3DXPT_VERTEXSHADER,
00204     D3DXPT_PIXELFRAGMENT,
00205     D3DXPT_VERTEXFRAGMENT,
00206 
00207     <span class="comment">// force 32-bit size enum</span>
00208     D3DXPT_FORCE_DWORD = 0x7fffffff
00209 
00210 } D3DXPARAMETER_TYPE, *LPD3DXPARAMETER_TYPE;
00211 
00212 
00213 <span class="comment">//----------------------------------------------------------------------------</span>
00214 <span class="comment">// D3DXCONSTANTTABLE_DESC:</span>
00215 <span class="comment">//----------------------------------------------------------------------------</span>
00216 
00217 <span class="keyword">typedef</span> <span class="keyword">struct </span>_D3DXCONSTANTTABLE_DESC
00218 {
00219     LPCSTR Creator;                     <span class="comment">// Creator string</span>
00220     DWORD Version;                      <span class="comment">// Shader version</span>
00221     UINT Constants;                     <span class="comment">// Number of constants</span>
00222 
00223 } D3DXCONSTANTTABLE_DESC, *LPD3DXCONSTANTTABLE_DESC;
00224 
00225 
00226 <span class="comment">//----------------------------------------------------------------------------</span>
00227 <span class="comment">// D3DXCONSTANT_DESC:</span>
00228 <span class="comment">//----------------------------------------------------------------------------</span>
00229 
00230 <span class="keyword">typedef</span> <span class="keyword">struct </span>_D3DXCONSTANT_DESC
00231 {
00232     LPCSTR Name;                        <span class="comment">// Constant name</span>
00233 
00234     D3DXREGISTER_SET RegisterSet;       <span class="comment">// Register set</span>
00235     UINT RegisterIndex;                 <span class="comment">// Register index</span>
00236     UINT RegisterCount;                 <span class="comment">// Number of registers occupied</span>
00237 
00238     D3DXPARAMETER_CLASS Class;          <span class="comment">// Class</span>
00239     D3DXPARAMETER_TYPE Type;            <span class="comment">// Component type</span>
00240 
00241     UINT Rows;                          <span class="comment">// Number of rows</span>
00242     UINT Columns;                       <span class="comment">// Number of columns</span>
00243     UINT Elements;                      <span class="comment">// Number of array elements</span>
00244     UINT StructMembers;                 <span class="comment">// Number of structure member sub-parameters</span>
00245 
00246     UINT Bytes;                         <span class="comment">// Data size, in bytes</span>
00247     LPCVOID DefaultValue;               <span class="comment">// Pointer to default value</span>
00248 
00249 } D3DXCONSTANT_DESC, *LPD3DXCONSTANT_DESC;
00250 
00251 
00252 
00253 <span class="comment">//----------------------------------------------------------------------------</span>
00254 <span class="comment">// ID3DXConstantTable:</span>
00255 <span class="comment">//----------------------------------------------------------------------------</span>
00256 
00257 <span class="keyword">typedef</span> interface ID3DXConstantTable ID3DXConstantTable;
00258 <span class="keyword">typedef</span> interface ID3DXConstantTable *LPD3DXCONSTANTTABLE;
00259 
00260 <span class="comment">// {AB3C758F-093E-4356-B762-4DB18F1B3A01}</span>
00261 DEFINE_GUID(IID_ID3DXConstantTable, 
00262 0xab3c758f, 0x93e, 0x4356, 0xb7, 0x62, 0x4d, 0xb1, 0x8f, 0x1b, 0x3a, 0x1);
00263 
00264 
00265 <span class="preprocessor">#undef INTERFACE</span>
00266 <span class="preprocessor"></span><span class="preprocessor">#define INTERFACE ID3DXConstantTable</span>
00267 <span class="preprocessor"></span>
00268 DECLARE_INTERFACE_(ID3DXConstantTable, IUnknown)
00269 {
00270     <span class="comment">// IUnknown</span>
00271     STDMETHOD(QueryInterface)(THIS_ REFIID iid, LPVOID *ppv) PURE;
00272     STDMETHOD_(ULONG, AddRef)(THIS) PURE;
00273     STDMETHOD_(ULONG, Release)(THIS) PURE;
00274 
00275     <span class="comment">// Buffer</span>
00276     STDMETHOD_(LPVOID, GetBufferPointer)(THIS) PURE;
00277     STDMETHOD_(DWORD, GetBufferSize)(THIS) PURE;
00278 
00279     <span class="comment">// Descs</span>
00280     STDMETHOD(GetDesc)(THIS_ D3DXCONSTANTTABLE_DESC *pDesc) PURE;
00281     STDMETHOD(GetConstantDesc)(THIS_ D3DXHANDLE hConstant, D3DXCONSTANT_DESC *pConstantDesc, UINT *pCount) PURE;
00282     STDMETHOD_(UINT, GetSamplerIndex)(THIS_ D3DXHANDLE hConstant) PURE;
00283 
00284     <span class="comment">// Handle operations</span>
00285     STDMETHOD_(D3DXHANDLE, GetConstant)(THIS_ D3DXHANDLE hConstant, UINT Index) PURE;
00286     STDMETHOD_(D3DXHANDLE, GetConstantByName)(THIS_ D3DXHANDLE hConstant, LPCSTR pName) PURE;
00287     STDMETHOD_(D3DXHANDLE, GetConstantElement)(THIS_ D3DXHANDLE hConstant, UINT Index) PURE;
00288 
00289     <span class="comment">// Set Constants</span>
00290     STDMETHOD(SetDefaults)(THIS_ LPDIRECT3DDEVICE9 pDevice) PURE;
00291     STDMETHOD(SetValue)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, LPCVOID pData, UINT Bytes) PURE;
00292     STDMETHOD(SetBool)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, BOOL b) PURE;
00293     STDMETHOD(SetBoolArray)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, CONST BOOL* pb, UINT Count) PURE;
00294     STDMETHOD(SetInt)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, INT n) PURE;
00295     STDMETHOD(SetIntArray)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, CONST INT* pn, UINT Count) PURE;
00296     STDMETHOD(SetFloat)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, FLOAT f) PURE;
00297     STDMETHOD(SetFloatArray)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, CONST FLOAT* pf, UINT Count) PURE;
00298     STDMETHOD(SetVector)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, CONST D3DXVECTOR4* pVector) PURE;
00299     STDMETHOD(SetVectorArray)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, CONST D3DXVECTOR4* pVector, UINT Count) PURE;
00300     STDMETHOD(SetMatrix)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, CONST D3DXMATRIX* pMatrix) PURE;
00301     STDMETHOD(SetMatrixArray)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, CONST D3DXMATRIX* pMatrix, UINT Count) PURE;
00302     STDMETHOD(SetMatrixPointerArray)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, CONST D3DXMATRIX** ppMatrix, UINT Count) PURE;
00303     STDMETHOD(SetMatrixTranspose)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, CONST D3DXMATRIX* pMatrix) PURE;
00304     STDMETHOD(SetMatrixTransposeArray)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, CONST D3DXMATRIX* pMatrix, UINT Count) PURE;
00305     STDMETHOD(SetMatrixTransposePointerArray)(THIS_ LPDIRECT3DDEVICE9 pDevice, D3DXHANDLE hConstant, CONST D3DXMATRIX** ppMatrix, UINT Count) PURE;
00306 };
00307 
00308 
00309 <span class="comment">//----------------------------------------------------------------------------</span>
00310 <span class="comment">// ID3DXTextureShader:</span>
00311 <span class="comment">//----------------------------------------------------------------------------</span>
00312 
00313 <span class="keyword">typedef</span> interface ID3DXTextureShader ID3DXTextureShader;
00314 <span class="keyword">typedef</span> interface ID3DXTextureShader *LPD3DXTEXTURESHADER;
00315 
00316 <span class="comment">// {3E3D67F8-AA7A-405d-A857-BA01D4758426}</span>
00317 DEFINE_GUID(IID_ID3DXTextureShader, 
00318 0x3e3d67f8, 0xaa7a, 0x405d, 0xa8, 0x57, 0xba, 0x1, 0xd4, 0x75, 0x84, 0x26);
00319 
00320 <span class="preprocessor">#undef INTERFACE</span>
00321 <span class="preprocessor"></span><span class="preprocessor">#define INTERFACE ID3DXTextureShader</span>
00322 <span class="preprocessor"></span>
00323 DECLARE_INTERFACE_(ID3DXTextureShader, IUnknown)
00324 {
00325     <span class="comment">// IUnknown</span>
00326     STDMETHOD(QueryInterface)(THIS_ REFIID iid, LPVOID *ppv) PURE;
00327     STDMETHOD_(ULONG, AddRef)(THIS) PURE;
00328     STDMETHOD_(ULONG, Release)(THIS) PURE;
00329 
00330     <span class="comment">// Gets</span>
00331     STDMETHOD(GetFunction)(THIS_ LPD3DXBUFFER *ppFunction) PURE;
00332     STDMETHOD(GetConstantBuffer)(THIS_ LPD3DXBUFFER *ppConstantBuffer) PURE;
00333 
00334     <span class="comment">// Descs</span>
00335     STDMETHOD(GetDesc)(THIS_ D3DXCONSTANTTABLE_DESC *pDesc) PURE;
00336     STDMETHOD(GetConstantDesc)(THIS_ D3DXHANDLE hConstant, D3DXCONSTANT_DESC *pConstantDesc, UINT *pCount) PURE;
00337 
00338     <span class="comment">// Handle operations</span>
00339     STDMETHOD_(D3DXHANDLE, GetConstant)(THIS_ D3DXHANDLE hConstant, UINT Index) PURE;
00340     STDMETHOD_(D3DXHANDLE, GetConstantByName)(THIS_ D3DXHANDLE hConstant, LPCSTR pName) PURE;
00341     STDMETHOD_(D3DXHANDLE, GetConstantElement)(THIS_ D3DXHANDLE hConstant, UINT Index) PURE;
00342 
00343     <span class="comment">// Set Constants</span>
00344     STDMETHOD(SetDefaults)(THIS) PURE;
00345     STDMETHOD(SetValue)(THIS_ D3DXHANDLE hConstant, LPCVOID pData, UINT Bytes) PURE;
00346     STDMETHOD(SetBool)(THIS_ D3DXHANDLE hConstant, BOOL b) PURE;
00347     STDMETHOD(SetBoolArray)(THIS_ D3DXHANDLE hConstant, CONST BOOL* pb, UINT Count) PURE;
00348     STDMETHOD(SetInt)(THIS_ D3DXHANDLE hConstant, INT n) PURE;
00349     STDMETHOD(SetIntArray)(THIS_ D3DXHANDLE hConstant, CONST INT* pn, UINT Count) PURE;
00350     STDMETHOD(SetFloat)(THIS_ D3DXHANDLE hConstant, FLOAT f) PURE;
00351     STDMETHOD(SetFloatArray)(THIS_ D3DXHANDLE hConstant, CONST FLOAT* pf, UINT Count) PURE;
00352     STDMETHOD(SetVector)(THIS_ D3DXHANDLE hConstant, CONST D3DXVECTOR4* pVector) PURE;
00353     STDMETHOD(SetVectorArray)(THIS_ D3DXHANDLE hConstant, CONST D3DXVECTOR4* pVector, UINT Count) PURE;
00354     STDMETHOD(SetMatrix)(THIS_ D3DXHANDLE hConstant, CONST D3DXMATRIX* pMatrix) PURE;
00355     STDMETHOD(SetMatrixArray)(THIS_ D3DXHANDLE hConstant, CONST D3DXMATRIX* pMatrix, UINT Count) PURE;
00356     STDMETHOD(SetMatrixPointerArray)(THIS_ D3DXHANDLE hConstant, CONST D3DXMATRIX** ppMatrix, UINT Count) PURE;
00357     STDMETHOD(SetMatrixTranspose)(THIS_ D3DXHANDLE hConstant, CONST D3DXMATRIX* pMatrix) PURE;
00358     STDMETHOD(SetMatrixTransposeArray)(THIS_ D3DXHANDLE hConstant, CONST D3DXMATRIX* pMatrix, UINT Count) PURE;
00359     STDMETHOD(SetMatrixTransposePointerArray)(THIS_ D3DXHANDLE hConstant, CONST D3DXMATRIX** ppMatrix, UINT Count) PURE;
00360 };
00361 
00362 
00363 
00364 <span class="comment">//----------------------------------------------------------------------------</span>
00365 <span class="comment">// ID3DXFragmentLinker</span>
00366 <span class="comment">//----------------------------------------------------------------------------</span>
00367 
00368 <span class="keyword">typedef</span> interface ID3DXFragmentLinker ID3DXFragmentLinker;
00369 <span class="keyword">typedef</span> interface ID3DXFragmentLinker *LPD3DXFRAGMENTLINKER;
00370 
00371 <span class="comment">// {1A2C0CC2-E5B6-4ebc-9E8D-390E057811B6}</span>
00372 DEFINE_GUID(IID_ID3DXFragmentLinker, 
00373 0x1a2c0cc2, 0xe5b6, 0x4ebc, 0x9e, 0x8d, 0x39, 0xe, 0x5, 0x78, 0x11, 0xb6);
00374 
00375 <span class="preprocessor">#undef INTERFACE</span>
00376 <span class="preprocessor"></span><span class="preprocessor">#define INTERFACE ID3DXFragmentLinker</span>
00377 <span class="preprocessor"></span>
00378 DECLARE_INTERFACE_(ID3DXFragmentLinker, IUnknown)
00379 {
00380     <span class="comment">// IUnknown</span>
00381     STDMETHOD(QueryInterface)(THIS_ REFIID iid, LPVOID *ppv) PURE;
00382     STDMETHOD_(ULONG, AddRef)(THIS) PURE;
00383     STDMETHOD_(ULONG, Release)(THIS) PURE;
00384 
00385     <span class="comment">// ID3DXFragmentLinker</span>
00386 
00387     <span class="comment">// fragment access and information retrieval functions</span>
00388     STDMETHOD(GetDevice)(THIS_ LPDIRECT3DDEVICE9* ppDevice) PURE;
00389     STDMETHOD_(UINT, GetNumberOfFragments)(THIS) PURE;
00390 
00391     STDMETHOD_(D3DXHANDLE, GetFragmentHandleByIndex)(THIS_ UINT Index) PURE;
00392     STDMETHOD_(D3DXHANDLE, GetFragmentHandleByName)(THIS_ LPCSTR Name) PURE;
00393     STDMETHOD(GetFragmentDesc)(THIS_ D3DXHANDLE Name, LPD3DXFRAGMENT_DESC FragDesc) PURE;
00394 
00395     <span class="comment">// add the fragments in the buffer to the linker</span>
00396     STDMETHOD(AddFragments)(THIS_ CONST DWORD *Fragments) PURE;
00397 
00398     <span class="comment">// Create a buffer containing the fragments.  Suitable for saving to disk</span>
00399     STDMETHOD(GetAllFragments)(THIS_ LPD3DXBUFFER *ppBuffer) PURE;
00400     STDMETHOD(GetFragment)(THIS_ D3DXHANDLE Name, LPD3DXBUFFER *ppBuffer) PURE;
00401 
00402     STDMETHOD(LinkShader)(THIS_ LPCSTR pProfile, DWORD Flags, CONST D3DXHANDLE *rgFragmentHandles, UINT cFragments, LPD3DXBUFFER *ppBuffer, LPD3DXBUFFER *ppErrorMsgs) PURE;
00403     STDMETHOD(LinkVertexShader)(THIS_ LPCSTR pProfile, DWORD Flags, CONST D3DXHANDLE *rgFragmentHandles, UINT cFragments, LPDIRECT3DVERTEXSHADER9 *pVShader, LPD3DXBUFFER *ppErrorMsgs) PURE;
00404     STDMETHOD(LinkPixelShader)(THIS_ LPCSTR pProfile, DWORD Flags, CONST D3DXHANDLE *rgFragmentHandles, UINT cFragments, LPDIRECT3DPIXELSHADER9 *pPShader, LPD3DXBUFFER *ppErrorMsgs) PURE;
00405 
00406     STDMETHOD(ClearCache)(THIS) PURE;
00407 };
00408 
00409 
00410 <span class="comment">//----------------------------------------------------------------------------</span>
00411 <span class="comment">// D3DXINCLUDE_TYPE:</span>
00412 <span class="comment">//----------------------------------------------------------------------------</span>
00413 
00414 <span class="keyword">typedef</span> <span class="keyword">enum</span> _D3DXINCLUDE_TYPE
00415 {
00416     D3DXINC_LOCAL,
00417     D3DXINC_SYSTEM,
00418 
00419     <span class="comment">// force 32-bit size enum</span>
00420     D3DXINC_FORCE_DWORD = 0x7fffffff
00421 
00422 } D3DXINCLUDE_TYPE, *LPD3DXINCLUDE_TYPE;
00423 
00424 
00425 <span class="comment">//----------------------------------------------------------------------------</span>
00426 <span class="comment">// ID3DXInclude:</span>
00427 <span class="comment">// -------------</span>
00428 <span class="comment">// This interface is intended to be implemented by the application, and can</span>
00429 <span class="comment">// be used by various D3DX APIs.  This enables application-specific handling</span>
00430 <span class="comment">// of #include directives in source files.</span>
00431 <span class="comment">//</span>
00432 <span class="comment">// Open()</span>
00433 <span class="comment">//    Opens an include file.  If successful, it should fill in ppData and</span>
00434 <span class="comment">//    pBytes.  The data pointer returned must remain valid until Close is</span>
00435 <span class="comment">//    subsequently called.</span>
00436 <span class="comment">// Close()</span>
00437 <span class="comment">//    Closes an include file.  If Open was successful, Close is guaranteed</span>
00438 <span class="comment">//    to be called before the API using this interface returns.</span>
00439 <span class="comment">//----------------------------------------------------------------------------</span>
00440 
00441 <span class="keyword">typedef</span> interface ID3DXInclude ID3DXInclude;
00442 <span class="keyword">typedef</span> interface ID3DXInclude *LPD3DXINCLUDE;
00443 
00444 <span class="preprocessor">#undef INTERFACE</span>
00445 <span class="preprocessor"></span><span class="preprocessor">#define INTERFACE ID3DXInclude</span>
00446 <span class="preprocessor"></span>
00447 DECLARE_INTERFACE(ID3DXInclude)
00448 {
00449     STDMETHOD(Open)(THIS_ D3DXINCLUDE_TYPE IncludeType, LPCSTR pFileName, LPCVOID pParentData, LPCVOID *ppData, UINT *pBytes) PURE;
00450     STDMETHOD(Close)(THIS_ LPCVOID pData) PURE;
00451 };
00452 
00453 
00455 <span class="comment">// APIs //////////////////////////////////////////////////////////////////////</span>
00457 <span class="comment"></span>
00458 <span class="preprocessor">#ifdef __cplusplus</span>
00459 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00460 <span class="preprocessor">#endif //__cplusplus</span>
00461 <span class="preprocessor"></span>
00462 
00463 <span class="comment">//----------------------------------------------------------------------------</span>
00464 <span class="comment">// D3DXAssembleShader:</span>
00465 <span class="comment">// -------------------</span>
00466 <span class="comment">// Assembles a shader.</span>
00467 <span class="comment">//</span>
00468 <span class="comment">// Parameters:</span>
00469 <span class="comment">//  pSrcFile</span>
00470 <span class="comment">//      Source file name</span>
00471 <span class="comment">//  hSrcModule</span>
00472 <span class="comment">//      Module handle. if NULL, current module will be used</span>
00473 <span class="comment">//  pSrcResource</span>
00474 <span class="comment">//      Resource name in module</span>
00475 <span class="comment">//  pSrcData</span>
00476 <span class="comment">//      Pointer to source code</span>
00477 <span class="comment">//  SrcDataLen</span>
00478 <span class="comment">//      Size of source code, in bytes</span>
00479 <span class="comment">//  pDefines</span>
00480 <span class="comment">//      Optional NULL-terminated array of preprocessor macro definitions.</span>
00481 <span class="comment">//  pInclude</span>
00482 <span class="comment">//      Optional interface pointer to use for handling #include directives.</span>
00483 <span class="comment">//      If this parameter is NULL, #includes will be honored when assembling</span>
00484 <span class="comment">//      from file, and will error when assembling from resource or memory.</span>
00485 <span class="comment">//  Flags</span>
00486 <span class="comment">//      See D3DXSHADER_xxx flags</span>
00487 <span class="comment">//  ppShader</span>
00488 <span class="comment">//      Returns a buffer containing the created shader.  This buffer contains</span>
00489 <span class="comment">//      the assembled shader code, as well as any embedded debug info.</span>
00490 <span class="comment">//  ppErrorMsgs</span>
00491 <span class="comment">//      Returns a buffer containing a listing of errors and warnings that were</span>
00492 <span class="comment">//      encountered during assembly.  If you are running in a debugger,</span>
00493 <span class="comment">//      these are the same messages you will see in your debug output.</span>
00494 <span class="comment">//----------------------------------------------------------------------------</span>
00495 
00496 
00497 HRESULT WINAPI
00498     D3DXAssembleShaderFromFileA(
00499         LPCSTR                          pSrcFile,
00500         CONST D3DXMACRO*                pDefines,
00501         LPD3DXINCLUDE                   pInclude,
00502         DWORD                           Flags,
00503         LPD3DXBUFFER*                   ppShader,
00504         LPD3DXBUFFER*                   ppErrorMsgs);
00505 
00506 HRESULT WINAPI
00507     D3DXAssembleShaderFromFileW(
00508         LPCWSTR                         pSrcFile,
00509         CONST D3DXMACRO*                pDefines,
00510         LPD3DXINCLUDE                   pInclude,
00511         DWORD                           Flags,
00512         LPD3DXBUFFER*                   ppShader,
00513         LPD3DXBUFFER*                   ppErrorMsgs);
00514 
00515 <span class="preprocessor">#ifdef UNICODE</span>
00516 <span class="preprocessor"></span><span class="preprocessor">#define D3DXAssembleShaderFromFile D3DXAssembleShaderFromFileW</span>
00517 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00518 <span class="preprocessor"></span><span class="preprocessor">#define D3DXAssembleShaderFromFile D3DXAssembleShaderFromFileA</span>
00519 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00520 <span class="preprocessor"></span>
00521 
00522 HRESULT WINAPI
00523     D3DXAssembleShaderFromResourceA(
00524         HMODULE                         hSrcModule,
00525         LPCSTR                          pSrcResource,
00526         CONST D3DXMACRO*                pDefines,
00527         LPD3DXINCLUDE                   pInclude,
00528         DWORD                           Flags,
00529         LPD3DXBUFFER*                   ppShader,
00530         LPD3DXBUFFER*                   ppErrorMsgs);
00531 
00532 HRESULT WINAPI
00533     D3DXAssembleShaderFromResourceW(
00534         HMODULE                         hSrcModule,
00535         LPCWSTR                         pSrcResource,
00536         CONST D3DXMACRO*                pDefines,
00537         LPD3DXINCLUDE                   pInclude,
00538         DWORD                           Flags,
00539         LPD3DXBUFFER*                   ppShader,
00540         LPD3DXBUFFER*                   ppErrorMsgs);
00541 
00542 <span class="preprocessor">#ifdef UNICODE</span>
00543 <span class="preprocessor"></span><span class="preprocessor">#define D3DXAssembleShaderFromResource D3DXAssembleShaderFromResourceW</span>
00544 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00545 <span class="preprocessor"></span><span class="preprocessor">#define D3DXAssembleShaderFromResource D3DXAssembleShaderFromResourceA</span>
00546 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00547 <span class="preprocessor"></span>
00548 
00549 HRESULT WINAPI
00550     D3DXAssembleShader(
00551         LPCSTR                          pSrcData,
00552         UINT                            SrcDataLen,
00553         CONST D3DXMACRO*                pDefines,
00554         LPD3DXINCLUDE                   pInclude,
00555         DWORD                           Flags,
00556         LPD3DXBUFFER*                   ppShader,
00557         LPD3DXBUFFER*                   ppErrorMsgs);
00558 
00559 
00560 
00561 <span class="comment">//----------------------------------------------------------------------------</span>
00562 <span class="comment">// D3DXCompileShader:</span>
00563 <span class="comment">// ------------------</span>
00564 <span class="comment">// Compiles a shader.</span>
00565 <span class="comment">//</span>
00566 <span class="comment">// Parameters:</span>
00567 <span class="comment">//  pSrcFile</span>
00568 <span class="comment">//      Source file name.</span>
00569 <span class="comment">//  hSrcModule</span>
00570 <span class="comment">//      Module handle. if NULL, current module will be used.</span>
00571 <span class="comment">//  pSrcResource</span>
00572 <span class="comment">//      Resource name in module.</span>
00573 <span class="comment">//  pSrcData</span>
00574 <span class="comment">//      Pointer to source code.</span>
00575 <span class="comment">//  SrcDataLen</span>
00576 <span class="comment">//      Size of source code, in bytes.</span>
00577 <span class="comment">//  pDefines</span>
00578 <span class="comment">//      Optional NULL-terminated array of preprocessor macro definitions.</span>
00579 <span class="comment">//  pInclude</span>
00580 <span class="comment">//      Optional interface pointer to use for handling #include directives.</span>
00581 <span class="comment">//      If this parameter is NULL, #includes will be honored when compiling</span>
00582 <span class="comment">//      from file, and will error when compiling from resource or memory.</span>
00583 <span class="comment">//  pFunctionName</span>
00584 <span class="comment">//      Name of the entrypoint function where execution should begin.</span>
00585 <span class="comment">//  pProfile</span>
00586 <span class="comment">//      Instruction set to be used when generating code.  Currently supported</span>
00587 <span class="comment">//      profiles are "vs_1_1", "vs_2_0", "vs_2_a", "vs_2_sw", "ps_1_1", </span>
00588 <span class="comment">//      "ps_1_2", "ps_1_3", "ps_1_4", "ps_2_0", "ps_2_a", "ps_2_sw", "tx_1_0"</span>
00589 <span class="comment">//  Flags</span>
00590 <span class="comment">//      See D3DXSHADER_xxx flags.</span>
00591 <span class="comment">//  ppShader</span>
00592 <span class="comment">//      Returns a buffer containing the created shader.  This buffer contains</span>
00593 <span class="comment">//      the compiled shader code, as well as any embedded debug and symbol</span>
00594 <span class="comment">//      table info.  (See D3DXGetShaderConstantTable)</span>
00595 <span class="comment">//  ppErrorMsgs</span>
00596 <span class="comment">//      Returns a buffer containing a listing of errors and warnings that were</span>
00597 <span class="comment">//      encountered during the compile.  If you are running in a debugger,</span>
00598 <span class="comment">//      these are the same messages you will see in your debug output.</span>
00599 <span class="comment">//  ppConstantTable</span>
00600 <span class="comment">//      Returns a ID3DXConstantTable object which can be used to set</span>
00601 <span class="comment">//      shader constants to the device.  Alternatively, an application can</span>
00602 <span class="comment">//      parse the D3DXSHADER_CONSTANTTABLE block embedded as a comment within</span>
00603 <span class="comment">//      the shader.</span>
00604 <span class="comment">//----------------------------------------------------------------------------</span>
00605 
00606 HRESULT WINAPI
00607     D3DXCompileShaderFromFileA(
00608         LPCSTR                          pSrcFile,
00609         CONST D3DXMACRO*                pDefines,
00610         LPD3DXINCLUDE                   pInclude,
00611         LPCSTR                          pFunctionName,
00612         LPCSTR                          pProfile,
00613         DWORD                           Flags,
00614         LPD3DXBUFFER*                   ppShader,
00615         LPD3DXBUFFER*                   ppErrorMsgs,
00616         LPD3DXCONSTANTTABLE*            ppConstantTable);
00617 
00618 HRESULT WINAPI
00619     D3DXCompileShaderFromFileW(
00620         LPCWSTR                         pSrcFile,
00621         CONST D3DXMACRO*                pDefines,
00622         LPD3DXINCLUDE                   pInclude,
00623         LPCSTR                          pFunctionName,
00624         LPCSTR                          pProfile,
00625         DWORD                           Flags,
00626         LPD3DXBUFFER*                   ppShader,
00627         LPD3DXBUFFER*                   ppErrorMsgs,
00628         LPD3DXCONSTANTTABLE*            ppConstantTable);
00629 
00630 <span class="preprocessor">#ifdef UNICODE</span>
00631 <span class="preprocessor"></span><span class="preprocessor">#define D3DXCompileShaderFromFile D3DXCompileShaderFromFileW</span>
00632 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00633 <span class="preprocessor"></span><span class="preprocessor">#define D3DXCompileShaderFromFile D3DXCompileShaderFromFileA</span>
00634 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00635 <span class="preprocessor"></span>
00636 
00637 HRESULT WINAPI
00638     D3DXCompileShaderFromResourceA(
00639         HMODULE                         hSrcModule,
00640         LPCSTR                          pSrcResource,
00641         CONST D3DXMACRO*                pDefines,
00642         LPD3DXINCLUDE                   pInclude,
00643         LPCSTR                          pFunctionName,
00644         LPCSTR                          pProfile,
00645         DWORD                           Flags,
00646         LPD3DXBUFFER*                   ppShader,
00647         LPD3DXBUFFER*                   ppErrorMsgs,
00648         LPD3DXCONSTANTTABLE*            ppConstantTable);
00649 
00650 HRESULT WINAPI
00651     D3DXCompileShaderFromResourceW(
00652         HMODULE                         hSrcModule,
00653         LPCWSTR                         pSrcResource,
00654         CONST D3DXMACRO*                pDefines,
00655         LPD3DXINCLUDE                   pInclude,
00656         LPCSTR                          pFunctionName,
00657         LPCSTR                          pProfile,
00658         DWORD                           Flags,
00659         LPD3DXBUFFER*                   ppShader,
00660         LPD3DXBUFFER*                   ppErrorMsgs,
00661         LPD3DXCONSTANTTABLE*            ppConstantTable);
00662 
00663 <span class="preprocessor">#ifdef UNICODE</span>
00664 <span class="preprocessor"></span><span class="preprocessor">#define D3DXCompileShaderFromResource D3DXCompileShaderFromResourceW</span>
00665 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00666 <span class="preprocessor"></span><span class="preprocessor">#define D3DXCompileShaderFromResource D3DXCompileShaderFromResourceA</span>
00667 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00668 <span class="preprocessor"></span>
00669 
00670 HRESULT WINAPI
00671     D3DXCompileShader(
00672         LPCSTR                          pSrcData,
00673         UINT                            SrcDataLen,
00674         CONST D3DXMACRO*                pDefines,
00675         LPD3DXINCLUDE                   pInclude,
00676         LPCSTR                          pFunctionName,
00677         LPCSTR                          pProfile,
00678         DWORD                           Flags,
00679         LPD3DXBUFFER*                   ppShader,
00680         LPD3DXBUFFER*                   ppErrorMsgs,
00681         LPD3DXCONSTANTTABLE*            ppConstantTable);
00682 
00683 
00684 <span class="comment">//----------------------------------------------------------------------------</span>
00685 <span class="comment">// D3DXDisassembleShader:</span>
00686 <span class="comment">// ----------------------</span>
00687 <span class="comment">// Takes a binary shader, and returns a buffer containing text assembly.</span>
00688 <span class="comment">//</span>
00689 <span class="comment">// Parameters:</span>
00690 <span class="comment">//  pShader</span>
00691 <span class="comment">//      Pointer to the shader byte code.</span>
00692 <span class="comment">//  ShaderSizeInBytes</span>
00693 <span class="comment">//      Size of the shader byte code in bytes.</span>
00694 <span class="comment">//  EnableColorCode</span>
00695 <span class="comment">//      Emit HTML tags for color coding the output?</span>
00696 <span class="comment">//  pComments</span>
00697 <span class="comment">//      Pointer to a comment string to include at the top of the shader.</span>
00698 <span class="comment">//  ppDisassembly</span>
00699 <span class="comment">//      Returns a buffer containing the disassembled shader.</span>
00700 <span class="comment">//----------------------------------------------------------------------------</span>
00701 
00702 HRESULT WINAPI
00703     D3DXDisassembleShader(
00704         CONST DWORD*                    pShader, 
00705         BOOL                            EnableColorCode, 
00706         LPCSTR                          pComments, 
00707         LPD3DXBUFFER*                   ppDisassembly);
00708 
00709 
00710 <span class="comment">//----------------------------------------------------------------------------</span>
00711 <span class="comment">// D3DXGetPixelShaderProfile/D3DXGetVertexShaderProfile:</span>
00712 <span class="comment">// -----------------------------------------------------</span>
00713 <span class="comment">// Returns the name of the HLSL profile best suited to a given device.</span>
00714 <span class="comment">//</span>
00715 <span class="comment">// Parameters:</span>
00716 <span class="comment">//  pDevice</span>
00717 <span class="comment">//      Pointer to the device in question</span>
00718 <span class="comment">//----------------------------------------------------------------------------</span>
00719 
00720 LPCSTR WINAPI
00721     D3DXGetPixelShaderProfile(
00722         LPDIRECT3DDEVICE9               pDevice);
00723 
00724 LPCSTR WINAPI
00725     D3DXGetVertexShaderProfile(
00726         LPDIRECT3DDEVICE9               pDevice);
00727 
00728 
00729 <span class="comment">//----------------------------------------------------------------------------</span>
00730 <span class="comment">// D3DXFindShaderComment:</span>
00731 <span class="comment">// ----------------------</span>
00732 <span class="comment">// Searches through a shader for a particular comment, denoted by a FourCC in</span>
00733 <span class="comment">// the first DWORD of the comment.  If the comment is not found, and no other</span>
00734 <span class="comment">// error has occurred, S_FALSE is returned.</span>
00735 <span class="comment">//</span>
00736 <span class="comment">// Parameters:</span>
00737 <span class="comment">//  pFunction</span>
00738 <span class="comment">//      Pointer to the function DWORD stream</span>
00739 <span class="comment">//  FourCC</span>
00740 <span class="comment">//      FourCC used to identify the desired comment block.</span>
00741 <span class="comment">//  ppData</span>
00742 <span class="comment">//      Returns a pointer to the comment data (not including comment token</span>
00743 <span class="comment">//      and FourCC).  Can be NULL.</span>
00744 <span class="comment">//  pSizeInBytes</span>
00745 <span class="comment">//      Returns the size of the comment data in bytes.  Can be NULL.</span>
00746 <span class="comment">//----------------------------------------------------------------------------</span>
00747 
00748 HRESULT WINAPI
00749     D3DXFindShaderComment(
00750         CONST DWORD*                    pFunction,
00751         DWORD                           FourCC,
00752         LPCVOID*                        ppData,
00753         UINT*                           pSizeInBytes);
00754 
00755 
00756 <span class="comment">//----------------------------------------------------------------------------</span>
00757 <span class="comment">// D3DXGetShaderSize:</span>
00758 <span class="comment">// ------------------</span>
00759 <span class="comment">// Returns the size of the shader byte-code, in bytes.</span>
00760 <span class="comment">//</span>
00761 <span class="comment">// Parameters:</span>
00762 <span class="comment">//  pFunction</span>
00763 <span class="comment">//      Pointer to the function DWORD stream</span>
00764 <span class="comment">//----------------------------------------------------------------------------</span>
00765 
00766 UINT WINAPI
00767     D3DXGetShaderSize(
00768         CONST DWORD*                    pFunction);
00769 
00770 
00771 <span class="comment">//----------------------------------------------------------------------------</span>
00772 <span class="comment">// D3DXGetShaderVersion:</span>
00773 <span class="comment">// -----------------------</span>
00774 <span class="comment">// Returns the shader version of a given shader.  Returns zero if the shader </span>
00775 <span class="comment">// function is NULL.</span>
00776 <span class="comment">//</span>
00777 <span class="comment">// Parameters:</span>
00778 <span class="comment">//  pFunction</span>
00779 <span class="comment">//      Pointer to the function DWORD stream</span>
00780 <span class="comment">//----------------------------------------------------------------------------</span>
00781 
00782 DWORD WINAPI
00783     D3DXGetShaderVersion(
00784         CONST DWORD*                    pFunction);
00785 
00786 <span class="comment">//----------------------------------------------------------------------------</span>
00787 <span class="comment">// D3DXGetShaderSemantics:</span>
00788 <span class="comment">// -----------------------</span>
00789 <span class="comment">// Gets semantics for all input elements referenced inside a given shader.</span>
00790 <span class="comment">//</span>
00791 <span class="comment">// Parameters:</span>
00792 <span class="comment">//  pFunction</span>
00793 <span class="comment">//      Pointer to the function DWORD stream</span>
00794 <span class="comment">//  pSemantics</span>
00795 <span class="comment">//      Pointer to an array of D3DXSEMANTIC structures.  The function will</span>
00796 <span class="comment">//      fill this array with the semantics for each input element referenced</span>
00797 <span class="comment">//      inside the shader.  This array is assumed to contain at least</span>
00798 <span class="comment">//      MAXD3DDECLLENGTH elements.</span>
00799 <span class="comment">//  pCount</span>
00800 <span class="comment">//      Returns the number of elements referenced by the shader</span>
00801 <span class="comment">//----------------------------------------------------------------------------</span>
00802 
00803 HRESULT WINAPI
00804     D3DXGetShaderInputSemantics(
00805         CONST DWORD*                    pFunction,
00806         D3DXSEMANTIC*                   pSemantics,
00807         UINT*                           pCount);
00808 
00809 HRESULT WINAPI
00810     D3DXGetShaderOutputSemantics(
00811         CONST DWORD*                    pFunction,
00812         D3DXSEMANTIC*                   pSemantics,
00813         UINT*                           pCount);
00814 
00815 
00816 <span class="comment">//----------------------------------------------------------------------------</span>
00817 <span class="comment">// D3DXGetShaderSamplers:</span>
00818 <span class="comment">// ----------------------</span>
00819 <span class="comment">// Gets semantics for all input elements referenced inside a given shader.</span>
00820 <span class="comment">//</span>
00821 <span class="comment">// pFunction</span>
00822 <span class="comment">//      Pointer to the function DWORD stream</span>
00823 <span class="comment">// pSamplers</span>
00824 <span class="comment">//      Pointer to an array of LPCSTRs.  The function will fill this array</span>
00825 <span class="comment">//      with pointers to the sampler names contained within pFunction, for</span>
00826 <span class="comment">//      each sampler referenced inside the shader.  This array is assumed to</span>
00827 <span class="comment">//      contain at least 16 elements.</span>
00828 <span class="comment">// pCount</span>
00829 <span class="comment">//      Returns the number of samplers referenced by the shader</span>
00830 <span class="comment">//----------------------------------------------------------------------------</span>
00831 
00832 HRESULT WINAPI
00833     D3DXGetShaderSamplers(
00834         CONST DWORD*                    pFunction,
00835         LPCSTR*                         pSamplers,
00836         UINT*                           pCount);
00837 
00838 
00839 <span class="comment">//----------------------------------------------------------------------------</span>
00840 <span class="comment">// D3DXGetShaderConstantTable:</span>
00841 <span class="comment">// ---------------------------</span>
00842 <span class="comment">// Gets shader constant table embedded inside shader.  A constant table is</span>
00843 <span class="comment">// generated by D3DXAssembleShader and D3DXCompileShader, and is embedded in</span>
00844 <span class="comment">// the body of the shader.</span>
00845 <span class="comment">//</span>
00846 <span class="comment">// Parameters:</span>
00847 <span class="comment">//  pFunction</span>
00848 <span class="comment">//      Pointer to the function DWORD stream</span>
00849 <span class="comment">//  ppConstantTable</span>
00850 <span class="comment">//      Returns a ID3DXConstantTable object which can be used to set</span>
00851 <span class="comment">//      shader constants to the device.  Alternatively, an application can</span>
00852 <span class="comment">//      parse the D3DXSHADER_CONSTANTTABLE block embedded as a comment within</span>
00853 <span class="comment">//      the shader.</span>
00854 <span class="comment">//----------------------------------------------------------------------------</span>
00855 
00856 HRESULT WINAPI
00857     D3DXGetShaderConstantTable(
00858         CONST DWORD*                    pFunction,
00859         LPD3DXCONSTANTTABLE*            ppConstantTable);
00860 
00861 
00862 
00863 <span class="comment">//----------------------------------------------------------------------------</span>
00864 <span class="comment">// D3DXCreateTextureShader:</span>
00865 <span class="comment">// ------------------------</span>
00866 <span class="comment">// Creates a texture shader object, given the compiled shader.</span>
00867 <span class="comment">//</span>
00868 <span class="comment">// Parameters</span>
00869 <span class="comment">//  pFunction</span>
00870 <span class="comment">//      Pointer to the function DWORD stream</span>
00871 <span class="comment">//  ppTextureShader</span>
00872 <span class="comment">//      Returns a ID3DXTextureShader object which can be used to procedurally </span>
00873 <span class="comment">//      fill the contents of a texture using the D3DXFillTextureTX functions.</span>
00874 <span class="comment">//----------------------------------------------------------------------------</span>
00875 
00876 HRESULT WINAPI
00877     D3DXCreateTextureShader(
00878         CONST DWORD*                    pFunction, 
00879         LPD3DXTEXTURESHADER*            ppTextureShader);
00880 
00881 
00882 
00883 <span class="comment">//----------------------------------------------------------------------------</span>
00884 <span class="comment">// D3DXGatherFragments:</span>
00885 <span class="comment">// -------------------</span>
00886 <span class="comment">// Assembles shader fragments into a buffer to be passed to a fragment linker.</span>
00887 <span class="comment">//   will generate shader fragments for all fragments in the file</span>
00888 <span class="comment">//</span>
00889 <span class="comment">// Parameters:</span>
00890 <span class="comment">//  pSrcFile</span>
00891 <span class="comment">//      Source file name</span>
00892 <span class="comment">//  hSrcModule</span>
00893 <span class="comment">//      Module handle. if NULL, current module will be used</span>
00894 <span class="comment">//  pSrcResource</span>
00895 <span class="comment">//      Resource name in module</span>
00896 <span class="comment">//  pSrcData</span>
00897 <span class="comment">//      Pointer to source code</span>
00898 <span class="comment">//  SrcDataLen</span>
00899 <span class="comment">//      Size of source code, in bytes</span>
00900 <span class="comment">//  pDefines</span>
00901 <span class="comment">//      Optional NULL-terminated array of preprocessor macro definitions.</span>
00902 <span class="comment">//  pInclude</span>
00903 <span class="comment">//      Optional interface pointer to use for handling #include directives.</span>
00904 <span class="comment">//      If this parameter is NULL, #includes will be honored when assembling</span>
00905 <span class="comment">//      from file, and will error when assembling from resource or memory.</span>
00906 <span class="comment">//  Flags</span>
00907 <span class="comment">//      See D3DXSHADER_xxx flags</span>
00908 <span class="comment">//  ppShader</span>
00909 <span class="comment">//      Returns a buffer containing the created shader fragments.  This buffer contains</span>
00910 <span class="comment">//      the assembled shader code, as well as any embedded debug info.</span>
00911 <span class="comment">//  ppErrorMsgs</span>
00912 <span class="comment">//      Returns a buffer containing a listing of errors and warnings that were</span>
00913 <span class="comment">//      encountered during assembly.  If you are running in a debugger,</span>
00914 <span class="comment">//      these are the same messages you will see in your debug output.</span>
00915 <span class="comment">//----------------------------------------------------------------------------</span>
00916 
00917 
00918 HRESULT WINAPI
00919 D3DXGatherFragmentsFromFileA(
00920         LPCSTR                          pSrcFile,
00921         CONST D3DXMACRO*                pDefines,
00922         LPD3DXINCLUDE                   pInclude,
00923         DWORD                           Flags,
00924         LPD3DXBUFFER*                   ppShader,
00925         LPD3DXBUFFER*                   ppErrorMsgs);
00926 
00927 HRESULT WINAPI
00928 D3DXGatherFragmentsFromFileW(
00929         LPCWSTR                         pSrcFile,
00930         CONST D3DXMACRO*                pDefines,
00931         LPD3DXINCLUDE                   pInclude,
00932         DWORD                           Flags,
00933         LPD3DXBUFFER*                   ppShader,
00934         LPD3DXBUFFER*                   ppErrorMsgs);
00935 
00936 <span class="preprocessor">#ifdef UNICODE</span>
00937 <span class="preprocessor"></span><span class="preprocessor">#define D3DXGatherFragmentsFromFile D3DXGatherFragmentsFromFileW</span>
00938 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00939 <span class="preprocessor"></span><span class="preprocessor">#define D3DXGatherFragmentsFromFile D3DXGatherFragmentsFromFileA</span>
00940 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00941 <span class="preprocessor"></span>
00942 
00943 HRESULT WINAPI
00944     D3DXGatherFragmentsFromResourceA(
00945         HMODULE                         hSrcModule,
00946         LPCSTR                          pSrcResource,
00947         CONST D3DXMACRO*                pDefines,
00948         LPD3DXINCLUDE                   pInclude,
00949         DWORD                           Flags,
00950         LPD3DXBUFFER*                   ppShader,
00951         LPD3DXBUFFER*                   ppErrorMsgs);
00952 
00953 HRESULT WINAPI
00954     D3DXGatherFragmentsFromResourceW(
00955         HMODULE                         hSrcModule,
00956         LPCWSTR                         pSrcResource,
00957         CONST D3DXMACRO*                pDefines,
00958         LPD3DXINCLUDE                   pInclude,
00959         DWORD                           Flags,
00960         LPD3DXBUFFER*                   ppShader,
00961         LPD3DXBUFFER*                   ppErrorMsgs);
00962 
00963 <span class="preprocessor">#ifdef UNICODE</span>
00964 <span class="preprocessor"></span><span class="preprocessor">#define D3DXGatherFragmentsFromResource D3DXGatherFragmentsFromResourceW</span>
00965 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00966 <span class="preprocessor"></span><span class="preprocessor">#define D3DXGatherFragmentsFromResource D3DXGatherFragmentsFromResourceA</span>
00967 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00968 <span class="preprocessor"></span>
00969 
00970 HRESULT WINAPI
00971     D3DXGatherFragments(
00972         LPCSTR                          pSrcData,
00973         UINT                            SrcDataLen,
00974         CONST D3DXMACRO*                pDefines,
00975         LPD3DXINCLUDE                   pInclude,
00976         DWORD                           Flags,
00977         LPD3DXBUFFER*                   ppShader,
00978         LPD3DXBUFFER*                   ppErrorMsgs);
00979 
00980 
00981 
00982 <span class="comment">//----------------------------------------------------------------------------</span>
00983 <span class="comment">// D3DXCreateFragmentLinker:</span>
00984 <span class="comment">// -------------------------</span>
00985 <span class="comment">// Creates a fragment linker with a given cache size.  The interface returned </span>
00986 <span class="comment">// can be used to link together shader fragments.  (both HLSL &amp; ASM fragements)</span>
00987 <span class="comment">//</span>
00988 <span class="comment">// Parameters:</span>
00989 <span class="comment">//  pDevice</span>
00990 <span class="comment">//      Pointer to the device on which to create the shaders</span>
00991 <span class="comment">//  ShaderCacheSize</span>
00992 <span class="comment">//      Size of the shader cache</span>
00993 <span class="comment">//  ppFragmentLinker</span>
00994 <span class="comment">//      pointer to a memory location to put the created interface pointer</span>
00995 <span class="comment">//</span>
00996 <span class="comment">//----------------------------------------------------------------------------</span>
00997 
00998 HRESULT WINAPI
00999     D3DXCreateFragmentLinker(
01000         LPDIRECT3DDEVICE9               pDevice,
01001         UINT                            ShaderCacheSize,
01002         LPD3DXFRAGMENTLINKER*           ppFragmentLinker);
01003 
01004 
01005 
01006 <span class="preprocessor">#ifdef __cplusplus</span>
01007 <span class="preprocessor"></span>}
01008 <span class="preprocessor">#endif //__cplusplus</span>
01009 <span class="preprocessor"></span>
01010 
01012 <span class="comment">// Shader comment block layouts //////////////////////////////////////////////</span>
01014 <span class="comment"></span>
01015 <span class="comment">//----------------------------------------------------------------------------</span>
01016 <span class="comment">// D3DXSHADER_CONSTANTTABLE:</span>
01017 <span class="comment">// -------------------------</span>
01018 <span class="comment">// Shader constant information; included as an CTAB comment block inside</span>
01019 <span class="comment">// shaders.  All offsets are BYTE offsets from start of CONSTANTTABLE struct.</span>
01020 <span class="comment">// Entries in the table are sorted by Name in ascending order.</span>
01021 <span class="comment">//----------------------------------------------------------------------------</span>
01022 
01023 <span class="keyword">typedef</span> <span class="keyword">struct </span>_D3DXSHADER_CONSTANTTABLE
01024 {
01025     DWORD Size;             <span class="comment">// sizeof(D3DXSHADER_CONSTANTTABLE)</span>
01026     DWORD Creator;          <span class="comment">// LPCSTR offset</span>
01027     DWORD Version;          <span class="comment">// shader version</span>
01028     DWORD Constants;        <span class="comment">// number of constants</span>
01029     DWORD ConstantInfo;     <span class="comment">// D3DXSHADER_CONSTANTINFO[Constants] offset</span>
01030     DWORD Flags;            <span class="comment">// flags shader was compiled with</span>
01031     DWORD Target;           <span class="comment">// LPCSTR offset </span>
01032 
01033 } D3DXSHADER_CONSTANTTABLE, *LPD3DXSHADER_CONSTANTTABLE;
01034 
01035 
01036 <span class="keyword">typedef</span> <span class="keyword">struct </span>_D3DXSHADER_CONSTANTINFO
01037 {
01038     DWORD Name;             <span class="comment">// LPCSTR offset</span>
01039     WORD  RegisterSet;      <span class="comment">// D3DXREGISTER_SET</span>
01040     WORD  RegisterIndex;    <span class="comment">// register number</span>
01041     WORD  RegisterCount;    <span class="comment">// number of registers</span>
01042     WORD  Reserved;         <span class="comment">// reserved</span>
01043     DWORD TypeInfo;         <span class="comment">// D3DXSHADER_TYPEINFO offset</span>
01044     DWORD DefaultValue;     <span class="comment">// offset of default value</span>
01045 
01046 } D3DXSHADER_CONSTANTINFO, *LPD3DXSHADER_CONSTANTINFO;
01047 
01048 
01049 <span class="keyword">typedef</span> <span class="keyword">struct </span>_D3DXSHADER_TYPEINFO
01050 {
01051     WORD  Class;            <span class="comment">// D3DXPARAMETER_CLASS</span>
01052     WORD  Type;             <span class="comment">// D3DXPARAMETER_TYPE</span>
01053     WORD  Rows;             <span class="comment">// number of rows (matrices)</span>
01054     WORD  Columns;          <span class="comment">// number of columns (vectors and matrices)</span>
01055     WORD  Elements;         <span class="comment">// array dimension</span>
01056     WORD  StructMembers;    <span class="comment">// number of struct members</span>
01057     DWORD StructMemberInfo; <span class="comment">// D3DXSHADER_STRUCTMEMBERINFO[Members] offset</span>
01058 
01059 } D3DXSHADER_TYPEINFO, *LPD3DXSHADER_TYPEINFO;
01060 
01061 
01062 <span class="keyword">typedef</span> <span class="keyword">struct </span>_D3DXSHADER_STRUCTMEMBERINFO
01063 {
01064     DWORD Name;             <span class="comment">// LPCSTR offset</span>
01065     DWORD TypeInfo;         <span class="comment">// D3DXSHADER_TYPEINFO offset</span>
01066 
01067 } D3DXSHADER_STRUCTMEMBERINFO, *LPD3DXSHADER_STRUCTMEMBERINFO;
01068 
01069 
01070 
01071 <span class="preprocessor">#endif //__D3DX9SHADER_H__</span>
01072 <span class="preprocessor"></span>
</pre></div><hr><address style="align: right;"><small>
Generated on Tue Jun 13 11:14:34 2006 for gRenderDX9 by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
