<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gRenderDX9: d3dTexture.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>d3dTexture.h</h1><div class="fragment"><pre>00001 <span class="comment">/*****************************************************************************/</span>
00002 <span class="comment">/*  File:   d3dTexture.h</span>
00003 <span class="comment">/*  Desc:   Texture interface implementation for DirectX9 </span>
00004 <span class="comment">/*  Author: Ruslan Shestopalyuk</span>
00005 <span class="comment">/*  Date:   02.11.2004</span>
00006 <span class="comment">/*****************************************************************************/</span>
00007 <span class="preprocessor">#ifndef __D3DTEXTURE_H__</span>
00008 <span class="preprocessor"></span><span class="preprocessor">#define __D3DTEXTURE_H__</span>
00009 <span class="preprocessor"></span><span class="preprocessor">#include "ITexture.h"</span>
00010 <span class="preprocessor">#include "IResourceManager.h"</span>
00011 
00012 <span class="comment">/*****************************************************************************/</span>
00013 <span class="comment">/*  Class:  TextureDX9</span>
00014 <span class="comment">/*  Desc:   Direct3D9 texture class </span>
00015 <span class="comment">/*****************************************************************************/</span>
00016 <span class="keyword">class </span>TextureDX9 : <span class="keyword">public</span> ITexture, <span class="keyword">public</span> IResource
00017 {
00018     IDirect3DDevice9*           m_pDevice;          <span class="comment">//  device interface        </span>
00019 
00020     IDirect3DTexture9*          m_pTexture;         <span class="comment">//  1D/2D texture interface</span>
00021     IDirect3DCubeTexture9*      m_pCubeTexture;     <span class="comment">//  the CubeMap texture interface</span>
00022     IDirect3DVolumeTexture9*    m_pVolTexture;      <span class="comment">//  volume texture interface</span>
00023     IDirect3DSurface9*          m_pZBuffer;         <span class="comment">//  interface to Z-buffer surface, if texture used as depth buffer</span>
00024     
00025     IDirect3DBaseTexture9*      m_pBaseTexture;     <span class="comment">//  general texture interface</span>
00026 
00027     <span class="keywordtype">int</span>                         m_ID;               <span class="comment">//  id in the texture manager</span>
00028     std::string                 m_Name;             <span class="comment">//  texture (file) name</span>
00029     std::string                 m_SearchPath;       <span class="comment">//  suggested texture search path</span>
00030     TextureType                 m_Type;             <span class="comment">//  texture type</span>
00031     <span class="keywordtype">int</span>                         m_NMipMaps;         <span class="comment">//  number of mip maps</span>
00032     TextureMemoryPool           m_MemoryPool;       <span class="comment">//  memory pool</span>
00033     DepthStencilFormat          m_DSFormat;
00034     ColorFormat                 m_ColorFormat;      <span class="comment">//  texture pixels color format</span>
00035     <span class="keywordtype">int</span>                         m_Width;            
00036     <span class="keywordtype">int</span>                         m_Height;
00037 
00038     <span class="keywordtype">bool</span>                        m_bRenderTarget;
00039     <span class="keywordtype">bool</span>                        m_bDynamic;
00040     <span class="keywordtype">bool</span>                        m_bNoTexture;
00041 
00042 <span class="keyword">public</span>:
00043                                 TextureDX9      ( IDirect3DDevice9* pDevice );
00044                                 TextureDX9      ();
00045                                 ~TextureDX9     ();
00046 
00047     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>*         GetName         ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_Name.c_str(); }
00048     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>*         GetSearchPath   ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_SearchPath.c_str(); }
00049     <span class="keyword">virtual</span> <span class="keywordtype">void</span>                SetSearchPath   ( <span class="keyword">const</span> <span class="keywordtype">char</span>* path ) { m_SearchPath = path; }
00050 
00051     <span class="keyword">virtual</span> TextureType         GetType         ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_Type; }
00052     <span class="keyword">virtual</span> <span class="keywordtype">int</span>                 GetNMipMaps     ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_NMipMaps; }
00053     <span class="keyword">virtual</span> TextureMemoryPool   GetMemoryPool   ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_MemoryPool; }
00054     <span class="keyword">virtual</span> ColorFormat         GetColorFormat  ();
00055     <span class="keyword">virtual</span> <span class="keywordtype">int</span>                 GetWidth        ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_Width; }
00056     <span class="keyword">virtual</span> <span class="keywordtype">int</span>                 GetHeight       ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_Height; }
00057 
00058     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>                HasAlpha        ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }
00059     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>                IsRenderTarget  ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_bRenderTarget; }
00060     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>                IsDepthStencil  ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (m_DSFormat != dsfNone); }
00061     <span class="keyword">virtual</span> <span class="keywordtype">int</span>                 GetApproxSize   ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 0; }
00062 
00063     IDirect3DSurface9*          GetSurface      ( <span class="keywordtype">int</span> idx = 0 );
00064     IDirect3DBaseTexture9*      GetTextureBase  ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_pBaseTexture; } 
00065     IDirect3DTexture9*          GetTexture2D    ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_pTexture; } 
00066 
00067     TextureMemoryPool           GetPool         ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_MemoryPool; }
00068     <span class="keywordtype">int</span>                         GetSize         () <span class="keyword">const</span>;
00069 
00070     <span class="keyword">virtual</span> <span class="keywordtype">void</span>                SetID           ( <span class="keywordtype">int</span> id ) { m_ID = id; }
00071     <span class="keyword">virtual</span> <span class="keywordtype">int</span>                 GetID           ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_ID; }
00072 
00073     <span class="keyword">virtual</span> BYTE*               LockBits        ( <span class="keywordtype">int</span>&amp; pitch, <span class="keywordtype">int</span> level = 0 );
00074     <span class="keyword">virtual</span> BYTE*               LockBits        ( <span class="keywordtype">int</span>&amp; pitch, <span class="keyword">const</span> Rct&amp; rect, <span class="keywordtype">int</span> level = 0 ) <span class="keyword">const</span>;
00075     <span class="keyword">virtual</span> <span class="keywordtype">void</span>                UnlockBits      ( <span class="keywordtype">int</span> level = 0 ) <span class="keyword">const</span>;
00076 
00077     <span class="keyword">virtual</span> <span class="keywordtype">void</span>                Bind            ( <span class="keywordtype">int</span> stage = 0 );
00078     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>                SaveToFile      ( <span class="keyword">const</span> <span class="keywordtype">char</span>* fName ) <span class="keyword">const</span>;
00079     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>                Reload          ();
00080 
00081     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>                Create          ( <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, 
00082                                                     ColorFormat clrFormat, 
00083                                                     <span class="keywordtype">int</span> nMips = 0, 
00084                                                     TextureMemoryPool memPool = tmpManaged, 
00085                                                     <span class="keywordtype">bool</span> bRenderTarget = <span class="keyword">false</span>, 
00086                                                     DepthStencilFormat bDepthStencil = dsfNone,
00087                                                     <span class="keywordtype">bool</span> bDynamic = <span class="keyword">false</span> );
00088     <span class="keyword">virtual</span> <span class="keywordtype">void</span>                DeleteDeviceObjects     ();
00089     <span class="keyword">virtual</span> <span class="keywordtype">void</span>                InvalidateDeviceObjects ();
00090     <span class="keyword">virtual</span> <span class="keywordtype">void</span>                RestoreDeviceObjects    ();
00091 
00092     <span class="keyword">virtual</span> <span class="keywordtype">void</span>                SetName         ( <span class="keyword">const</span> <span class="keywordtype">char</span>* name ) { m_Name = name; }
00093     <span class="keyword">virtual</span> <span class="keywordtype">void</span>                LoadHeader      ();
00094     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>                Load            (); 
00095 
00096 <span class="keyword">private</span>:
00097     <span class="keywordtype">bool</span>                        Create          ();
00098     <span class="keywordtype">bool</span>                        LoadFromFile    ( <span class="keyword">const</span> <span class="keywordtype">char</span>* fName );
00099     <span class="keywordtype">bool</span>                        LoadFromMemory  ( <span class="keyword">const</span> BYTE* pBuf, <span class="keywordtype">int</span> nBytes );
00100 
00101 }; <span class="comment">// class TextureDX9</span>
00102 
00103 <span class="preprocessor">#endif // __D3DTEXTURE_H__</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Tue Jun 13 11:14:33 2006 for gRenderDX9 by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
